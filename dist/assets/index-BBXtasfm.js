var sm=Object.defineProperty;var nm=(s,e,t)=>e in s?sm(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var S=(s,e,t)=>nm(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ql(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const Fe={},ai=[],_s=()=>{},Ud=()=>!1,qo=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Zl=s=>s.startsWith("onUpdate:"),Ct=Object.assign,ec=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},im=Object.prototype.hasOwnProperty,De=(s,e)=>im.call(s,e),fe=Array.isArray,li=s=>Yo(s)==="[object Map]",Hd=s=>Yo(s)==="[object Set]",pe=s=>typeof s=="function",ut=s=>typeof s=="string",Vs=s=>typeof s=="symbol",ze=s=>s!==null&&typeof s=="object",zd=s=>(ze(s)||pe(s))&&pe(s.then)&&pe(s.catch),qd=Object.prototype.toString,Yo=s=>qd.call(s),rm=s=>Yo(s).slice(8,-1),Yd=s=>Yo(s)==="[object Object]",tc=s=>ut(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Gi=Ql(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Go=s=>{const e=Object.create(null);return(t=>e[t]||(e[t]=s(t)))},om=/-\w/g,Xt=Go(s=>s.replace(om,e=>e.slice(1).toUpperCase())),am=/\B([A-Z])/g,dn=Go(s=>s.replace(am,"-$1").toLowerCase()),Ko=Go(s=>s.charAt(0).toUpperCase()+s.slice(1)),_a=Go(s=>s?`on${Ko(s)}`:""),ln=(s,e)=>!Object.is(s,e),ho=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},Gd=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},sc=s=>{const e=parseFloat(s);return isNaN(e)?s:e};let Jc;const Jo=()=>Jc||(Jc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xo(s){if(fe(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],i=ut(n)?hm(n):Xo(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(ut(s)||ze(s))return s}const lm=/;(?![^(]*\))/g,cm=/:([^]+)/,um=/\/\*[^]*?\*\//g;function hm(s){const e={};return s.replace(um,"").split(lm).forEach(t=>{if(t){const n=t.split(cm);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function at(s){let e="";if(ut(s))e=s;else if(fe(s))for(let t=0;t<s.length;t++){const n=at(s[t]);n&&(e+=n+" ")}else if(ze(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const dm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fm=Ql(dm);function Kd(s){return!!s||s===""}const Jd=s=>!!(s&&s.__v_isRef===!0),se=s=>ut(s)?s:s==null?"":fe(s)||ze(s)&&(s.toString===qd||!pe(s.toString))?Jd(s)?se(s.value):JSON.stringify(s,Xd,2):String(s),Xd=(s,e)=>Jd(e)?Xd(s,e.value):li(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],r)=>(t[wa(n,r)+" =>"]=i,t),{})}:Hd(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>wa(t))}:Vs(e)?wa(e):ze(e)&&!fe(e)&&!Yd(e)?String(e):e,wa=(s,e="")=>{var t;return Vs(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lt;class gm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lt,!e&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Lt;try{return Lt=this,e()}finally{Lt=t}}}on(){++this._on===1&&(this.prevScope=Lt,Lt=this)}off(){this._on>0&&--this._on===0&&(Lt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function pm(){return Lt}let Ve;const xa=new WeakSet;class Qd{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lt&&Lt.active&&Lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xa.has(this)&&(xa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ef(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xc(this),tf(this);const e=Ve,t=is;Ve=this,is=!0;try{return this.fn()}finally{sf(this),Ve=e,is=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)rc(e);this.deps=this.depsTail=void 0,Xc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ol(this)&&this.run()}get dirty(){return ol(this)}}let Zd=0,Ki,Ji;function ef(s,e=!1){if(s.flags|=8,e){s.next=Ji,Ji=s;return}s.next=Ki,Ki=s}function nc(){Zd++}function ic(){if(--Zd>0)return;if(Ji){let e=Ji;for(Ji=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;Ki;){let e=Ki;for(Ki=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){s||(s=n)}e=t}}if(s)throw s}function tf(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sf(s){let e,t=s.depsTail,n=t;for(;n;){const i=n.prevDep;n.version===-1?(n===t&&(t=i),rc(n),mm(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}s.deps=e,s.depsTail=t}function ol(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(nf(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function nf(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===hr)||(s.globalVersion=hr,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!ol(s))))return;s.flags|=2;const e=s.dep,t=Ve,n=is;Ve=s,is=!0;try{tf(s);const i=s.fn(s._value);(e.version===0||ln(i,s._value))&&(s.flags|=128,s._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ve=t,is=n,sf(s),s.flags&=-3}}function rc(s,e=!1){const{dep:t,prevSub:n,nextSub:i}=s;if(n&&(n.nextSub=i,s.prevSub=void 0),i&&(i.prevSub=n,s.nextSub=void 0),t.subs===s&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)rc(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function mm(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let is=!0;const rf=[];function Fs(){rf.push(is),is=!1}function Bs(){const s=rf.pop();is=s===void 0?!0:s}function Xc(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=Ve;Ve=void 0;try{e()}finally{Ve=t}}}let hr=0;class ym{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class oc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ve||!is||Ve===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ve)t=this.activeLink=new ym(Ve,this),Ve.deps?(t.prevDep=Ve.depsTail,Ve.depsTail.nextDep=t,Ve.depsTail=t):Ve.deps=Ve.depsTail=t,of(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Ve.depsTail,t.nextDep=void 0,Ve.depsTail.nextDep=t,Ve.depsTail=t,Ve.deps===t&&(Ve.deps=n)}return t}trigger(e){this.version++,hr++,this.notify(e)}notify(e){nc();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{ic()}}}function of(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)of(n)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const al=new WeakMap,Dn=Symbol(""),ll=Symbol(""),dr=Symbol("");function St(s,e,t){if(is&&Ve){let n=al.get(s);n||al.set(s,n=new Map);let i=n.get(t);i||(n.set(t,i=new oc),i.map=n,i.key=t),i.track()}}function Ms(s,e,t,n,i,r){const o=al.get(s);if(!o){hr++;return}const a=l=>{l&&l.trigger()};if(nc(),e==="clear")o.forEach(a);else{const l=fe(s),c=l&&tc(t);if(l&&t==="length"){const u=Number(n);o.forEach((h,d)=>{(d==="length"||d===dr||!Vs(d)&&d>=u)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(dr)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Dn)),li(s)&&a(o.get(ll)));break;case"delete":l||(a(o.get(Dn)),li(s)&&a(o.get(ll)));break;case"set":li(s)&&a(o.get(Dn));break}}ic()}function Vn(s){const e=Me(s);return e===s?e:(St(e,"iterate",dr),Jt(s)?e:e.map(ls))}function Qo(s){return St(s=Me(s),"iterate",dr),s}function Js(s,e){return Ws(s)?In(s)?pi(ls(e)):pi(e):ls(e)}const bm={__proto__:null,[Symbol.iterator](){return ka(this,Symbol.iterator,s=>Js(this,s))},concat(...s){return Vn(this).concat(...s.map(e=>fe(e)?Vn(e):e))},entries(){return ka(this,"entries",s=>(s[1]=Js(this,s[1]),s))},every(s,e){return Ss(this,"every",s,e,void 0,arguments)},filter(s,e){return Ss(this,"filter",s,e,t=>t.map(n=>Js(this,n)),arguments)},find(s,e){return Ss(this,"find",s,e,t=>Js(this,t),arguments)},findIndex(s,e){return Ss(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return Ss(this,"findLast",s,e,t=>Js(this,t),arguments)},findLastIndex(s,e){return Ss(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return Ss(this,"forEach",s,e,void 0,arguments)},includes(...s){return Sa(this,"includes",s)},indexOf(...s){return Sa(this,"indexOf",s)},join(s){return Vn(this).join(s)},lastIndexOf(...s){return Sa(this,"lastIndexOf",s)},map(s,e){return Ss(this,"map",s,e,void 0,arguments)},pop(){return Ti(this,"pop")},push(...s){return Ti(this,"push",s)},reduce(s,...e){return Qc(this,"reduce",s,e)},reduceRight(s,...e){return Qc(this,"reduceRight",s,e)},shift(){return Ti(this,"shift")},some(s,e){return Ss(this,"some",s,e,void 0,arguments)},splice(...s){return Ti(this,"splice",s)},toReversed(){return Vn(this).toReversed()},toSorted(s){return Vn(this).toSorted(s)},toSpliced(...s){return Vn(this).toSpliced(...s)},unshift(...s){return Ti(this,"unshift",s)},values(){return ka(this,"values",s=>Js(this,s))}};function ka(s,e,t){const n=Qo(s),i=n[e]();return n!==s&&!Jt(s)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=t(r.value)),r}),i}const vm=Array.prototype;function Ss(s,e,t,n,i,r){const o=Qo(s),a=o!==s&&!Jt(s),l=o[e];if(l!==vm[e]){const h=l.apply(s,r);return a?ls(h):h}let c=t;o!==s&&(a?c=function(h,d){return t.call(this,Js(s,h),d,s)}:t.length>2&&(c=function(h,d){return t.call(this,h,d,s)}));const u=l.call(o,c,n);return a&&i?i(u):u}function Qc(s,e,t,n){const i=Qo(s);let r=t;return i!==s&&(Jt(s)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,s)}):r=function(o,a,l){return t.call(this,o,Js(s,a),l,s)}),i[e](r,...n)}function Sa(s,e,t){const n=Me(s);St(n,"iterate",dr);const i=n[e](...t);return(i===-1||i===!1)&&cc(t[0])?(t[0]=Me(t[0]),n[e](...t)):i}function Ti(s,e,t=[]){Fs(),nc();const n=Me(s)[e].apply(s,t);return ic(),Bs(),n}const _m=Ql("__proto__,__v_isRef,__isVue"),af=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Vs));function wm(s){Vs(s)||(s=String(s));const e=Me(this);return St(e,"has",s),e.hasOwnProperty(s)}class lf{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return n===(i?r?Rm:df:r?hf:uf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=fe(e);if(!i){let l;if(o&&(l=bm[t]))return l;if(t==="hasOwnProperty")return wm}const a=Reflect.get(e,t,Ot(e)?e:n);if((Vs(t)?af.has(t):_m(t))||(i||St(e,"get",t),r))return a;if(Ot(a)){const l=o&&tc(t)?a:a.value;return i&&ze(l)?ul(l):l}return ze(a)?i?ul(a):Zo(a):a}}class cf extends lf{constructor(e=!1){super(!1,e)}set(e,t,n,i){let r=e[t];const o=fe(e)&&tc(t);if(!this._isShallow){const c=Ws(r);if(!Jt(n)&&!Ws(n)&&(r=Me(r),n=Me(n)),!o&&Ot(r)&&!Ot(n))return c||(r.value=n),!0}const a=o?Number(t)<e.length:De(e,t),l=Reflect.set(e,t,n,Ot(e)?e:i);return e===Me(i)&&(a?ln(n,r)&&Ms(e,"set",t,n):Ms(e,"add",t,n)),l}deleteProperty(e,t){const n=De(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Ms(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!Vs(t)||!af.has(t))&&St(e,"has",t),n}ownKeys(e){return St(e,"iterate",fe(e)?"length":Dn),Reflect.ownKeys(e)}}class xm extends lf{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const km=new cf,Sm=new xm,Em=new cf(!0);const cl=s=>s,jr=s=>Reflect.getPrototypeOf(s);function Tm(s,e,t){return function(...n){const i=this.__v_raw,r=Me(i),o=li(r),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,c=i[s](...n),u=t?cl:e?pi:ls;return!e&&St(r,"iterate",l?ll:Dn),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Vr(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function Pm(s,e){const t={get(i){const r=this.__v_raw,o=Me(r),a=Me(i);s||(ln(i,a)&&St(o,"get",i),St(o,"get",a));const{has:l}=jr(o),c=e?cl:s?pi:ls;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!s&&St(Me(i),"iterate",Dn),i.size},has(i){const r=this.__v_raw,o=Me(r),a=Me(i);return s||(ln(i,a)&&St(o,"has",i),St(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Me(a),c=e?cl:s?pi:ls;return!s&&St(l,"iterate",Dn),a.forEach((u,h)=>i.call(r,c(u),c(h),o))}};return Ct(t,s?{add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear")}:{add(i){!e&&!Jt(i)&&!Ws(i)&&(i=Me(i));const r=Me(this);return jr(r).has.call(r,i)||(r.add(i),Ms(r,"add",i,i)),this},set(i,r){!e&&!Jt(r)&&!Ws(r)&&(r=Me(r));const o=Me(this),{has:a,get:l}=jr(o);let c=a.call(o,i);c||(i=Me(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?ln(r,u)&&Ms(o,"set",i,r):Ms(o,"add",i,r),this},delete(i){const r=Me(this),{has:o,get:a}=jr(r);let l=o.call(r,i);l||(i=Me(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&Ms(r,"delete",i,void 0),c},clear(){const i=Me(this),r=i.size!==0,o=i.clear();return r&&Ms(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Tm(i,s,e)}),t}function ac(s,e){const t=Pm(s,e);return(n,i,r)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?n:Reflect.get(De(t,i)&&i in n?t:n,i,r)}const Om={get:ac(!1,!1)},Cm={get:ac(!1,!0)},Am={get:ac(!0,!1)};const uf=new WeakMap,hf=new WeakMap,df=new WeakMap,Rm=new WeakMap;function Mm(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Dm(s){return s.__v_skip||!Object.isExtensible(s)?0:Mm(rm(s))}function Zo(s){return Ws(s)?s:lc(s,!1,km,Om,uf)}function ff(s){return lc(s,!1,Em,Cm,hf)}function ul(s){return lc(s,!0,Sm,Am,df)}function lc(s,e,t,n,i){if(!ze(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=Dm(s);if(r===0)return s;const o=i.get(s);if(o)return o;const a=new Proxy(s,r===2?n:t);return i.set(s,a),a}function In(s){return Ws(s)?In(s.__v_raw):!!(s&&s.__v_isReactive)}function Ws(s){return!!(s&&s.__v_isReadonly)}function Jt(s){return!!(s&&s.__v_isShallow)}function cc(s){return s?!!s.__v_raw:!1}function Me(s){const e=s&&s.__v_raw;return e?Me(e):s}function Im(s){return!De(s,"__v_skip")&&Object.isExtensible(s)&&Gd(s,"__v_skip",!0),s}const ls=s=>ze(s)?Zo(s):s,pi=s=>ze(s)?ul(s):s;function Ot(s){return s?s.__v_isRef===!0:!1}function I(s){return gf(s,!1)}function Nm(s){return gf(s,!0)}function gf(s,e){return Ot(s)?s:new $m(s,e)}class $m{constructor(e,t){this.dep=new oc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Me(e),this._value=t?e:ls(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Jt(e)||Ws(e);e=n?e:Me(e),ln(e,t)&&(this._rawValue=e,this._value=n?e:ls(e),this.dep.trigger())}}function Te(s){return Ot(s)?s.value:s}const Lm={get:(s,e,t)=>e==="__v_raw"?s:Te(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const i=s[e];return Ot(i)&&!Ot(t)?(i.value=t,!0):Reflect.set(s,e,t,n)}};function pf(s){return In(s)?s:new Proxy(s,Lm)}class Fm{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new oc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ve!==this)return ef(this,!0),!0}get value(){const e=this.dep.track();return nf(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Bm(s,e,t=!1){let n,i;return pe(s)?n=s:(n=s.get,i=s.set),new Fm(n,i,t)}const Ur={},To=new WeakMap;let kn;function Wm(s,e=!1,t=kn){if(t){let n=To.get(t);n||To.set(t,n=[]),n.push(s)}}function jm(s,e,t=Fe){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=t,c=x=>i?x:Jt(x)||i===!1||i===0?Ds(x,1):Ds(x);let u,h,d,f,g=!1,p=!1;if(Ot(s)?(h=()=>s.value,g=Jt(s)):In(s)?(h=()=>c(s),g=!0):fe(s)?(p=!0,g=s.some(x=>In(x)||Jt(x)),h=()=>s.map(x=>{if(Ot(x))return x.value;if(In(x))return c(x);if(pe(x))return l?l(x,2):x()})):pe(s)?e?h=l?()=>l(s,2):s:h=()=>{if(d){Fs();try{d()}finally{Bs()}}const x=kn;kn=u;try{return l?l(s,3,[f]):s(f)}finally{kn=x}}:h=_s,e&&i){const x=h,T=i===!0?1/0:i;h=()=>Ds(x(),T)}const m=pm(),y=()=>{u.stop(),m&&m.active&&ec(m.effects,u)};if(r&&e){const x=e;e=(...T)=>{x(...T),y()}}let b=p?new Array(s.length).fill(Ur):Ur;const v=x=>{if(!(!(u.flags&1)||!u.dirty&&!x))if(e){const T=u.run();if(i||g||(p?T.some((C,A)=>ln(C,b[A])):ln(T,b))){d&&d();const C=kn;kn=u;try{const A=[T,b===Ur?void 0:p&&b[0]===Ur?[]:b,f];b=T,l?l(e,3,A):e(...A)}finally{kn=C}}}else u.run()};return a&&a(v),u=new Qd(h),u.scheduler=o?()=>o(v,!1):v,f=x=>Wm(x,!1,u),d=u.onStop=()=>{const x=To.get(u);if(x){if(l)l(x,4);else for(const T of x)T();To.delete(u)}},e?n?v(!0):b=u.run():o?o(v.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function Ds(s,e=1/0,t){if(e<=0||!ze(s)||s.__v_skip||(t=t||new Map,(t.get(s)||0)>=e))return s;if(t.set(s,e),e--,Ot(s))Ds(s.value,e,t);else if(fe(s))for(let n=0;n<s.length;n++)Ds(s[n],e,t);else if(Hd(s)||li(s))s.forEach(n=>{Ds(n,e,t)});else if(Yd(s)){for(const n in s)Ds(s[n],e,t);for(const n of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,n)&&Ds(s[n],e,t)}return s}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mr(s,e,t,n){try{return n?s(...n):s()}catch(i){ea(i,e,t)}}function xs(s,e,t,n){if(pe(s)){const i=Mr(s,e,t,n);return i&&zd(i)&&i.catch(r=>{ea(r,e,t)}),i}if(fe(s)){const i=[];for(let r=0;r<s.length;r++)i.push(xs(s[r],e,t,n));return i}}function ea(s,e,t,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Fe;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](s,l,c)===!1)return}a=a.parent}if(r){Fs(),Mr(r,null,10,[s,l,c]),Bs();return}}Vm(s,t,i,n,o)}function Vm(s,e,t,n=!0,i=!1){if(i)throw s;console.error(s)}const Dt=[];let ps=-1;const ci=[];let Xs=null,ei=0;const mf=Promise.resolve();let Po=null;function pt(s){const e=Po||mf;return s?e.then(this?s.bind(this):s):e}function Um(s){let e=ps+1,t=Dt.length;for(;e<t;){const n=e+t>>>1,i=Dt[n],r=fr(i);r<s||r===s&&i.flags&2?e=n+1:t=n}return e}function uc(s){if(!(s.flags&1)){const e=fr(s),t=Dt[Dt.length-1];!t||!(s.flags&2)&&e>=fr(t)?Dt.push(s):Dt.splice(Um(e),0,s),s.flags|=1,yf()}}function yf(){Po||(Po=mf.then(vf))}function Hm(s){fe(s)?ci.push(...s):Xs&&s.id===-1?Xs.splice(ei+1,0,s):s.flags&1||(ci.push(s),s.flags|=1),yf()}function Zc(s,e,t=ps+1){for(;t<Dt.length;t++){const n=Dt[t];if(n&&n.flags&2){if(s&&n.id!==s.uid)continue;Dt.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function bf(s){if(ci.length){const e=[...new Set(ci)].sort((t,n)=>fr(t)-fr(n));if(ci.length=0,Xs){Xs.push(...e);return}for(Xs=e,ei=0;ei<Xs.length;ei++){const t=Xs[ei];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Xs=null,ei=0}}const fr=s=>s.id==null?s.flags&2?-1:1/0:s.id;function vf(s){try{for(ps=0;ps<Dt.length;ps++){const e=Dt[ps];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Mr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ps<Dt.length;ps++){const e=Dt[ps];e&&(e.flags&=-2)}ps=-1,Dt.length=0,bf(),Po=null,(Dt.length||ci.length)&&vf()}}let wt=null,_f=null;function Oo(s){const e=wt;return wt=s,_f=s&&s.type.__scopeId||null,e}function nt(s,e=wt,t){if(!e||s._n)return s;const n=(...i)=>{n._d&&Ro(-1);const r=Oo(e);let o;try{o=s(...i)}finally{Oo(r),n._d&&Ro(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function mt(s,e){if(wt===null)return s;const t=ra(wt),n=s.dirs||(s.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,l=Fe]=e[i];r&&(pe(r)&&(r={mounted:r,updated:r}),r.deep&&Ds(o),n.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return s}function pn(s,e,t,n){const i=s.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Fs(),xs(l,t,8,[s.el,a,s,e]),Bs())}}function fo(s,e){if(Et){let t=Et.provides;const n=Et.parent&&Et.parent.provides;n===t&&(t=Et.provides=Object.create(n)),t[s]=e}}function rs(s,e,t=!1){const n=Uy();if(n||hi){let i=hi?hi._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&s in i)return i[s];if(arguments.length>1)return t&&pe(e)?e.call(n&&n.proxy):e}}const zm=Symbol.for("v-scx"),qm=()=>rs(zm);function os(s,e,t){return wf(s,e,t)}function wf(s,e,t=Fe){const{immediate:n,deep:i,flush:r,once:o}=t,a=Ct({},t),l=e&&n||!e&&r!=="post";let c;if(mr){if(r==="sync"){const f=qm();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=_s,f.resume=_s,f.pause=_s,f}}const u=Et;a.call=(f,g,p)=>xs(f,u,g,p);let h=!1;r==="post"?a.scheduler=f=>{Ut(f,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(f,g)=>{g?f():uc(f)}),a.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=jm(s,e,a);return mr&&(c?c.push(d):l&&d()),d}function Ym(s,e,t){const n=this.proxy,i=ut(s)?s.includes(".")?xf(n,s):()=>n[s]:s.bind(n,n);let r;pe(e)?r=e:(r=e.handler,t=e);const o=Dr(this),a=wf(i,r.bind(n),t);return o(),a}function xf(s,e){const t=e.split(".");return()=>{let n=s;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}const Gm=Symbol("_vte"),Km=s=>s.__isTeleport,Jm=Symbol("_leaveCb");function hc(s,e){s.shapeFlag&6&&s.component?(s.transition=e,hc(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function ne(s,e){return pe(s)?Ct({name:s.name},e,{setup:s}):s}function kf(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const Co=new WeakMap;function Xi(s,e,t,n,i=!1){if(fe(s)){s.forEach((g,p)=>Xi(g,e&&(fe(e)?e[p]:e),t,n,i));return}if(ui(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Xi(s,e,t,n.component.subTree);return}const r=n.shapeFlag&4?ra(n.component):n.el,o=i?null:r,{i:a,r:l}=s,c=e&&e.r,u=a.refs===Fe?a.refs={}:a.refs,h=a.setupState,d=Me(h),f=h===Fe?Ud:g=>De(d,g);if(c!=null&&c!==l){if(eu(e),ut(c))u[c]=null,f(c)&&(h[c]=null);else if(Ot(c)){c.value=null;const g=e;g.k&&(u[g.k]=null)}}if(pe(l))Mr(l,a,12,[o,u]);else{const g=ut(l),p=Ot(l);if(g||p){const m=()=>{if(s.f){const y=g?f(l)?h[l]:u[l]:l.value;if(i)fe(y)&&ec(y,r);else if(fe(y))y.includes(r)||y.push(r);else if(g)u[l]=[r],f(l)&&(h[l]=u[l]);else{const b=[r];l.value=b,s.k&&(u[s.k]=b)}}else g?(u[l]=o,f(l)&&(h[l]=o)):p&&(l.value=o,s.k&&(u[s.k]=o))};if(o){const y=()=>{m(),Co.delete(s)};y.id=-1,Co.set(s,y),Ut(y,t)}else eu(s),m()}}}function eu(s){const e=Co.get(s);e&&(e.flags|=8,Co.delete(s))}Jo().requestIdleCallback;Jo().cancelIdleCallback;const ui=s=>!!s.type.__asyncLoader,Sf=s=>s.type.__isKeepAlive;function Xm(s,e){Ef(s,"a",e)}function Qm(s,e){Ef(s,"da",e)}function Ef(s,e,t=Et){const n=s.__wdc||(s.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return s()});if(ta(e,n,t),t){let i=t.parent;for(;i&&i.parent;)Sf(i.parent.vnode)&&Zm(n,e,t,i),i=i.parent}}function Zm(s,e,t,n){const i=ta(e,s,n,!0);sa(()=>{ec(n[e],i)},t)}function ta(s,e,t=Et,n=!1){if(t){const i=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{Fs();const a=Dr(t),l=xs(e,t,s,o);return a(),Bs(),l});return n?i.unshift(r):i.push(r),r}}const Us=s=>(e,t=Et)=>{(!mr||s==="sp")&&ta(s,(...n)=>e(...n),t)},ey=Us("bm"),ht=Us("m"),ty=Us("bu"),dc=Us("u"),Tf=Us("bum"),sa=Us("um"),sy=Us("sp"),ny=Us("rtg"),iy=Us("rtc");function ry(s,e=Et){ta("ec",s,e)}const oy="components";function ay(s,e){return cy(oy,s,!0,e)||s}const ly=Symbol.for("v-ndc");function cy(s,e,t=!0,n=!1){const i=wt||Et;if(i){const r=i.type;{const a=Gy(r,!1);if(a&&(a===e||a===Xt(e)||a===Ko(Xt(e))))return r}const o=tu(i[s]||r[s],e)||tu(i.appContext[s],e);return!o&&n?r:o}}function tu(s,e){return s&&(s[e]||s[Xt(e)]||s[Ko(Xt(e))])}function Hs(s,e,t,n){let i;const r=t,o=fe(s);if(o||ut(s)){const a=o&&In(s);let l=!1,c=!1;a&&(l=!Jt(s),c=Ws(s),s=Qo(s)),i=new Array(s.length);for(let u=0,h=s.length;u<h;u++)i[u]=e(l?c?pi(ls(s[u])):ls(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){i=new Array(s);for(let a=0;a<s;a++)i[a]=e(a+1,a,void 0,r)}else if(ze(s))if(s[Symbol.iterator])i=Array.from(s,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(s);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(s[u],u,l,r)}}else i=[];return i}function fc(s,e,t={},n,i){if(wt.ce||wt.parent&&ui(wt.parent)&&wt.parent.ce){const c=Object.keys(t).length>0;return P(),ke(_e,null,[W("slot",t,n)],c?-2:64)}let r=s[e];r&&r._c&&(r._d=!1),P();const o=r&&Pf(r(t)),a=t.key||o&&o.key,l=ke(_e,{key:(a&&!Vs(a)?a:`_${e}`)+(!o&&n?"_fb":"")},o||[],o&&s._===1?64:-2);return r&&r._c&&(r._d=!0),l}function Pf(s){return s.some(e=>pr(e)?!(e.type===js||e.type===_e&&!Pf(e.children)):!0)?s:null}const hl=s=>s?Yf(s)?ra(s):hl(s.parent):null,Qi=Ct(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>hl(s.parent),$root:s=>hl(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>Cf(s),$forceUpdate:s=>s.f||(s.f=()=>{uc(s.update)}),$nextTick:s=>s.n||(s.n=pt.bind(s.proxy)),$watch:s=>Ym.bind(s)}),Ea=(s,e)=>s!==Fe&&!s.__isScriptSetup&&De(s,e),uy={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=s;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(Ea(n,e))return o[e]=1,n[e];if(i!==Fe&&De(i,e))return o[e]=2,i[e];if(De(r,e))return o[e]=3,r[e];if(t!==Fe&&De(t,e))return o[e]=4,t[e];dl&&(o[e]=0)}}const c=Qi[e];let u,h;if(c)return e==="$attrs"&&St(s.attrs,"get",""),c(s);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==Fe&&De(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,De(h,e))return h[e]},set({_:s},e,t){const{data:n,setupState:i,ctx:r}=s;return Ea(i,e)?(i[e]=t,!0):n!==Fe&&De(n,e)?(n[e]=t,!0):De(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:i,props:r,type:o}},a){let l;return!!(t[a]||s!==Fe&&a[0]!=="$"&&De(s,a)||Ea(e,a)||De(r,a)||De(n,a)||De(Qi,a)||De(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:De(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function su(s){return fe(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let dl=!0;function hy(s){const e=Cf(s),t=s.proxy,n=s.ctx;dl=!1,e.beforeCreate&&nu(e.beforeCreate,s,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:y,beforeUnmount:b,destroyed:v,unmounted:x,render:T,renderTracked:C,renderTriggered:A,errorCaptured:O,serverPrefetch:L,expose:Y,inheritAttrs:Z,components:q,directives:we,filters:Be}=e;if(c&&dy(c,n,null),o)for(const J in o){const ee=o[J];pe(ee)&&(n[J]=ee.bind(t))}if(i){const J=i.call(t,t);ze(J)&&(s.data=Zo(J))}if(dl=!0,r)for(const J in r){const ee=r[J],ye=pe(ee)?ee.bind(t,t):pe(ee.get)?ee.get.bind(t,t):_s,Xe=!pe(ee)&&pe(ee.set)?ee.set.bind(t):_s,le=Ft({get:ye,set:Xe});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>le.value,set:be=>le.value=be})}if(a)for(const J in a)Of(a[J],n,t,J);if(l){const J=pe(l)?l.call(t):l;Reflect.ownKeys(J).forEach(ee=>{fo(ee,J[ee])})}u&&nu(u,s,"c");function Q(J,ee){fe(ee)?ee.forEach(ye=>J(ye.bind(t))):ee&&J(ee.bind(t))}if(Q(ey,h),Q(ht,d),Q(ty,f),Q(dc,g),Q(Xm,p),Q(Qm,m),Q(ry,O),Q(iy,C),Q(ny,A),Q(Tf,b),Q(sa,x),Q(sy,L),fe(Y))if(Y.length){const J=s.exposed||(s.exposed={});Y.forEach(ee=>{Object.defineProperty(J,ee,{get:()=>t[ee],set:ye=>t[ee]=ye,enumerable:!0})})}else s.exposed||(s.exposed={});T&&s.render===_s&&(s.render=T),Z!=null&&(s.inheritAttrs=Z),q&&(s.components=q),we&&(s.directives=we),L&&kf(s)}function dy(s,e,t=_s){fe(s)&&(s=fl(s));for(const n in s){const i=s[n];let r;ze(i)?"default"in i?r=rs(i.from||n,i.default,!0):r=rs(i.from||n):r=rs(i),Ot(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function nu(s,e,t){xs(fe(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function Of(s,e,t,n){let i=n.includes(".")?xf(t,n):()=>t[n];if(ut(s)){const r=e[s];pe(r)&&os(i,r)}else if(pe(s))os(i,s.bind(t));else if(ze(s))if(fe(s))s.forEach(r=>Of(r,e,t,n));else{const r=pe(s.handler)?s.handler.bind(t):e[s.handler];pe(r)&&os(i,r,s)}}function Cf(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(c=>Ao(l,c,o,!0)),Ao(l,e,o)),ze(e)&&r.set(e,l),l}function Ao(s,e,t,n=!1){const{mixins:i,extends:r}=e;r&&Ao(s,r,t,!0),i&&i.forEach(o=>Ao(s,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=fy[o]||t&&t[o];s[o]=a?a(s[o],e[o]):e[o]}return s}const fy={data:iu,props:ru,emits:ru,methods:Fi,computed:Fi,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Fi,directives:Fi,watch:py,provide:iu,inject:gy};function iu(s,e){return e?s?function(){return Ct(pe(s)?s.call(this,this):s,pe(e)?e.call(this,this):e)}:e:s}function gy(s,e){return Fi(fl(s),fl(e))}function fl(s){if(fe(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function Rt(s,e){return s?[...new Set([].concat(s,e))]:e}function Fi(s,e){return s?Ct(Object.create(null),s,e):e}function ru(s,e){return s?fe(s)&&fe(e)?[...new Set([...s,...e])]:Ct(Object.create(null),su(s),su(e??{})):e}function py(s,e){if(!s)return e;if(!e)return s;const t=Ct(Object.create(null),s);for(const n in e)t[n]=Rt(s[n],e[n]);return t}function Af(){return{app:null,config:{isNativeTag:Ud,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let my=0;function yy(s,e){return function(n,i=null){pe(n)||(n=Ct({},n)),i!=null&&!ze(i)&&(i=null);const r=Af(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:my++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:Jy,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&pe(u.install)?(o.add(u),u.install(c,...h)):pe(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,d){if(!l){const f=c._ceVNode||W(n,i);return f.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),s(f,u,d),l=!0,c._container=u,u.__vue_app__=c,ra(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(xs(a,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=hi;hi=c;try{return u()}finally{hi=h}}};return c}}let hi=null;const by=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${Xt(e)}Modifiers`]||s[`${dn(e)}Modifiers`];function vy(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||Fe;let i=t;const r=e.startsWith("update:"),o=r&&by(n,e.slice(7));o&&(o.trim&&(i=t.map(u=>ut(u)?u.trim():u)),o.number&&(i=t.map(sc)));let a,l=n[a=_a(e)]||n[a=_a(Xt(e))];!l&&r&&(l=n[a=_a(dn(e))]),l&&xs(l,s,6,i);const c=n[a+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,xs(c,s,6,i)}}const _y=new WeakMap;function Rf(s,e,t=!1){const n=t?_y:e.emitsCache,i=n.get(s);if(i!==void 0)return i;const r=s.emits;let o={},a=!1;if(!pe(s)){const l=c=>{const u=Rf(c,e,!0);u&&(a=!0,Ct(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!r&&!a?(ze(s)&&n.set(s,null),null):(fe(r)?r.forEach(l=>o[l]=null):Ct(o,r),ze(s)&&n.set(s,o),o)}function na(s,e){return!s||!qo(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(s,e[0].toLowerCase()+e.slice(1))||De(s,dn(e))||De(s,e))}function ou(s){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:d,setupState:f,ctx:g,inheritAttrs:p}=s,m=Oo(s);let y,b;try{if(t.shapeFlag&4){const x=i||n,T=x;y=ys(c.call(T,x,u,h,f,d,g)),b=a}else{const x=e;y=ys(x.length>1?x(h,{attrs:a,slots:o,emit:l}):x(h,null)),b=e.props?a:wy(a)}}catch(x){Zi.length=0,ea(x,s,1),y=W(js)}let v=y;if(b&&p!==!1){const x=Object.keys(b),{shapeFlag:T}=v;x.length&&T&7&&(r&&x.some(Zl)&&(b=xy(b,r)),v=mi(v,b,!1,!0))}return t.dirs&&(v=mi(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(t.dirs):t.dirs),t.transition&&hc(v,t.transition),y=v,Oo(m),y}const wy=s=>{let e;for(const t in s)(t==="class"||t==="style"||qo(t))&&((e||(e={}))[t]=s[t]);return e},xy=(s,e)=>{const t={};for(const n in s)(!Zl(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function ky(s,e,t){const{props:n,children:i,component:r}=s,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?au(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==n[d]&&!na(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?au(n,o,c):!0:!!o;return!1}function au(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==s[r]&&!na(t,r))return!0}return!1}function Sy({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const Mf={},Df=()=>Object.create(Mf),If=s=>Object.getPrototypeOf(s)===Mf;function Ey(s,e,t,n=!1){const i={},r=Df();s.propsDefaults=Object.create(null),Nf(s,e,i,r);for(const o in s.propsOptions[0])o in i||(i[o]=void 0);t?s.props=n?i:ff(i):s.type.props?s.props=i:s.props=r,s.attrs=r}function Ty(s,e,t,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=s,a=Me(i),[l]=s.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(na(s.emitsOptions,d))continue;const f=e[d];if(l)if(De(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const g=Xt(d);i[g]=gl(l,a,g,f,s,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{Nf(s,e,i,r)&&(c=!0);let u;for(const h in a)(!e||!De(e,h)&&((u=dn(h))===h||!De(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(i[h]=gl(l,a,h,void 0,s,!0)):delete i[h]);if(r!==a)for(const h in r)(!e||!De(e,h))&&(delete r[h],c=!0)}c&&Ms(s.attrs,"set","")}function Nf(s,e,t,n){const[i,r]=s.propsOptions;let o=!1,a;if(e)for(let l in e){if(Gi(l))continue;const c=e[l];let u;i&&De(i,u=Xt(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:na(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=Me(t),c=a||Fe;for(let u=0;u<r.length;u++){const h=r[u];t[h]=gl(i,l,h,c[h],s,!De(c,h))}}return o}function gl(s,e,t,n,i,r){const o=s[t];if(o!=null){const a=De(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&pe(l)){const{propsDefaults:c}=i;if(t in c)n=c[t];else{const u=Dr(i);n=c[t]=l.call(null,e),u()}}else n=l;i.ce&&i.ce._setProp(t,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===dn(t))&&(n=!0))}return n}const Py=new WeakMap;function $f(s,e,t=!1){const n=t?Py:e.propsCache,i=n.get(s);if(i)return i;const r=s.props,o={},a=[];let l=!1;if(!pe(s)){const u=h=>{l=!0;const[d,f]=$f(h,e,!0);Ct(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!l)return ze(s)&&n.set(s,ai),ai;if(fe(r))for(let u=0;u<r.length;u++){const h=Xt(r[u]);lu(h)&&(o[h]=Fe)}else if(r)for(const u in r){const h=Xt(u);if(lu(h)){const d=r[u],f=o[h]=fe(d)||pe(d)?{type:d}:Ct({},d),g=f.type;let p=!1,m=!0;if(fe(g))for(let y=0;y<g.length;++y){const b=g[y],v=pe(b)&&b.name;if(v==="Boolean"){p=!0;break}else v==="String"&&(m=!1)}else p=pe(g)&&g.name==="Boolean";f[0]=p,f[1]=m,(p||De(f,"default"))&&a.push(h)}}const c=[o,a];return ze(s)&&n.set(s,c),c}function lu(s){return s[0]!=="$"&&!Gi(s)}const gc=s=>s==="_"||s==="_ctx"||s==="$stable",pc=s=>fe(s)?s.map(ys):[ys(s)],Oy=(s,e,t)=>{if(e._n)return e;const n=nt((...i)=>pc(e(...i)),t);return n._c=!1,n},Lf=(s,e,t)=>{const n=s._ctx;for(const i in s){if(gc(i))continue;const r=s[i];if(pe(r))e[i]=Oy(i,r,n);else if(r!=null){const o=pc(r);e[i]=()=>o}}},Ff=(s,e)=>{const t=pc(e);s.slots.default=()=>t},Bf=(s,e,t)=>{for(const n in e)(t||!gc(n))&&(s[n]=e[n])},Cy=(s,e,t)=>{const n=s.slots=Df();if(s.vnode.shapeFlag&32){const i=e._;i?(Bf(n,e,t),t&&Gd(n,"_",i,!0)):Lf(e,n)}else e&&Ff(s,e)},Ay=(s,e,t)=>{const{vnode:n,slots:i}=s;let r=!0,o=Fe;if(n.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:Bf(i,e,t):(r=!e.$stable,Lf(e,i)),o=e}else e&&(Ff(s,e),o={default:1});if(r)for(const a in i)!gc(a)&&o[a]==null&&delete i[a]},Ut=Ny;function Ry(s){return My(s)}function My(s,e){const t=Jo();t.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=_s,insertStaticContent:g}=s,p=(_,w,E,R=null,N=null,M=null,H=void 0,V=null,j=!!w.dynamicChildren)=>{if(_===w)return;_&&!Pi(_,w)&&(R=D(_),be(_,N,M,!0),_=null),w.patchFlag===-2&&(j=!1,w.dynamicChildren=null);const{type:F,ref:re,shapeFlag:z}=w;switch(F){case ia:m(_,w,E,R);break;case js:y(_,w,E,R);break;case go:_==null&&b(w,E,R,H);break;case _e:q(_,w,E,R,N,M,H,V,j);break;default:z&1?T(_,w,E,R,N,M,H,V,j):z&6?we(_,w,E,R,N,M,H,V,j):(z&64||z&128)&&F.process(_,w,E,R,N,M,H,V,j,G)}re!=null&&N?Xi(re,_&&_.ref,M,w||_,!w):re==null&&_&&_.ref!=null&&Xi(_.ref,null,M,_,!0)},m=(_,w,E,R)=>{if(_==null)n(w.el=a(w.children),E,R);else{const N=w.el=_.el;w.children!==_.children&&c(N,w.children)}},y=(_,w,E,R)=>{_==null?n(w.el=l(w.children||""),E,R):w.el=_.el},b=(_,w,E,R)=>{[_.el,_.anchor]=g(_.children,w,E,R,_.el,_.anchor)},v=({el:_,anchor:w},E,R)=>{let N;for(;_&&_!==w;)N=d(_),n(_,E,R),_=N;n(w,E,R)},x=({el:_,anchor:w})=>{let E;for(;_&&_!==w;)E=d(_),i(_),_=E;i(w)},T=(_,w,E,R,N,M,H,V,j)=>{if(w.type==="svg"?H="svg":w.type==="math"&&(H="mathml"),_==null)C(w,E,R,N,M,H,V,j);else{const F=_.el&&_.el._isVueCE?_.el:null;try{F&&F._beginPatch(),L(_,w,N,M,H,V,j)}finally{F&&F._endPatch()}}},C=(_,w,E,R,N,M,H,V)=>{let j,F;const{props:re,shapeFlag:z,transition:te,dirs:he}=_;if(j=_.el=o(_.type,M,re&&re.is,re),z&8?u(j,_.children):z&16&&O(_.children,j,null,R,N,Ta(_,M),H,V),he&&pn(_,null,R,"created"),A(j,_,_.scopeId,H,R),re){for(const We in re)We!=="value"&&!Gi(We)&&r(j,We,null,re[We],M,R);"value"in re&&r(j,"value",null,re.value,M),(F=re.onVnodeBeforeMount)&&fs(F,R,_)}he&&pn(_,null,R,"beforeMount");const Pe=Dy(N,te);Pe&&te.beforeEnter(j),n(j,w,E),((F=re&&re.onVnodeMounted)||Pe||he)&&Ut(()=>{F&&fs(F,R,_),Pe&&te.enter(j),he&&pn(_,null,R,"mounted")},N)},A=(_,w,E,R,N)=>{if(E&&f(_,E),R)for(let M=0;M<R.length;M++)f(_,R[M]);if(N){let M=N.subTree;if(w===M||Uf(M.type)&&(M.ssContent===w||M.ssFallback===w)){const H=N.vnode;A(_,H,H.scopeId,H.slotScopeIds,N.parent)}}},O=(_,w,E,R,N,M,H,V,j=0)=>{for(let F=j;F<_.length;F++){const re=_[F]=V?Qs(_[F]):ys(_[F]);p(null,re,w,E,R,N,M,H,V)}},L=(_,w,E,R,N,M,H)=>{const V=w.el=_.el;let{patchFlag:j,dynamicChildren:F,dirs:re}=w;j|=_.patchFlag&16;const z=_.props||Fe,te=w.props||Fe;let he;if(E&&mn(E,!1),(he=te.onVnodeBeforeUpdate)&&fs(he,E,w,_),re&&pn(w,_,E,"beforeUpdate"),E&&mn(E,!0),(z.innerHTML&&te.innerHTML==null||z.textContent&&te.textContent==null)&&u(V,""),F?Y(_.dynamicChildren,F,V,E,R,Ta(w,N),M):H||ee(_,w,V,null,E,R,Ta(w,N),M,!1),j>0){if(j&16)Z(V,z,te,E,N);else if(j&2&&z.class!==te.class&&r(V,"class",null,te.class,N),j&4&&r(V,"style",z.style,te.style,N),j&8){const Pe=w.dynamicProps;for(let We=0;We<Pe.length;We++){const Ie=Pe[We],It=z[Ie],Nt=te[Ie];(Nt!==It||Ie==="value")&&r(V,Ie,It,Nt,N,E)}}j&1&&_.children!==w.children&&u(V,w.children)}else!H&&F==null&&Z(V,z,te,E,N);((he=te.onVnodeUpdated)||re)&&Ut(()=>{he&&fs(he,E,w,_),re&&pn(w,_,E,"updated")},R)},Y=(_,w,E,R,N,M,H)=>{for(let V=0;V<w.length;V++){const j=_[V],F=w[V],re=j.el&&(j.type===_e||!Pi(j,F)||j.shapeFlag&198)?h(j.el):E;p(j,F,re,null,R,N,M,H,!0)}},Z=(_,w,E,R,N)=>{if(w!==E){if(w!==Fe)for(const M in w)!Gi(M)&&!(M in E)&&r(_,M,w[M],null,N,R);for(const M in E){if(Gi(M))continue;const H=E[M],V=w[M];H!==V&&M!=="value"&&r(_,M,V,H,N,R)}"value"in E&&r(_,"value",w.value,E.value,N)}},q=(_,w,E,R,N,M,H,V,j)=>{const F=w.el=_?_.el:a(""),re=w.anchor=_?_.anchor:a("");let{patchFlag:z,dynamicChildren:te,slotScopeIds:he}=w;he&&(V=V?V.concat(he):he),_==null?(n(F,E,R),n(re,E,R),O(w.children||[],E,re,N,M,H,V,j)):z>0&&z&64&&te&&_.dynamicChildren&&_.dynamicChildren.length===te.length?(Y(_.dynamicChildren,te,E,N,M,H,V),(w.key!=null||N&&w===N.subTree)&&Wf(_,w,!0)):ee(_,w,E,re,N,M,H,V,j)},we=(_,w,E,R,N,M,H,V,j)=>{w.slotScopeIds=V,_==null?w.shapeFlag&512?N.ctx.activate(w,E,R,H,j):Be(w,E,R,N,M,H,j):ce(_,w,j)},Be=(_,w,E,R,N,M,H)=>{const V=_.component=Vy(_,R,N);if(Sf(_)&&(V.ctx.renderer=G),Hy(V,!1,H),V.asyncDep){if(N&&N.registerDep(V,Q,H),!_.el){const j=V.subTree=W(js);y(null,j,w,E),_.placeholder=j.el}}else Q(V,_,w,E,N,M,H)},ce=(_,w,E)=>{const R=w.component=_.component;if(ky(_,w,E))if(R.asyncDep&&!R.asyncResolved){J(R,w,E);return}else R.next=w,R.update();else w.el=_.el,R.vnode=w},Q=(_,w,E,R,N,M,H)=>{const V=()=>{if(_.isMounted){let{next:z,bu:te,u:he,parent:Pe,vnode:We}=_;{const hs=jf(_);if(hs){z&&(z.el=We.el,J(_,z,H)),hs.asyncDep.then(()=>{_.isUnmounted||V()});return}}let Ie=z,It;mn(_,!1),z?(z.el=We.el,J(_,z,H)):z=We,te&&ho(te),(It=z.props&&z.props.onVnodeBeforeUpdate)&&fs(It,Pe,z,We),mn(_,!0);const Nt=ou(_),us=_.subTree;_.subTree=Nt,p(us,Nt,h(us.el),D(us),_,N,M),z.el=Nt.el,Ie===null&&Sy(_,Nt.el),he&&Ut(he,N),(It=z.props&&z.props.onVnodeUpdated)&&Ut(()=>fs(It,Pe,z,We),N)}else{let z;const{el:te,props:he}=w,{bm:Pe,m:We,parent:Ie,root:It,type:Nt}=_,us=ui(w);mn(_,!1),Pe&&ho(Pe),!us&&(z=he&&he.onVnodeBeforeMount)&&fs(z,Ie,w),mn(_,!0);{It.ce&&It.ce._def.shadowRoot!==!1&&It.ce._injectChildStyle(Nt);const hs=_.subTree=ou(_);p(null,hs,E,R,_,N,M),w.el=hs.el}if(We&&Ut(We,N),!us&&(z=he&&he.onVnodeMounted)){const hs=w;Ut(()=>fs(z,Ie,hs),N)}(w.shapeFlag&256||Ie&&ui(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&_.a&&Ut(_.a,N),_.isMounted=!0,w=E=R=null}};_.scope.on();const j=_.effect=new Qd(V);_.scope.off();const F=_.update=j.run.bind(j),re=_.job=j.runIfDirty.bind(j);re.i=_,re.id=_.uid,j.scheduler=()=>uc(re),mn(_,!0),F()},J=(_,w,E)=>{w.component=_;const R=_.vnode.props;_.vnode=w,_.next=null,Ty(_,w.props,R,E),Ay(_,w.children,E),Fs(),Zc(_),Bs()},ee=(_,w,E,R,N,M,H,V,j=!1)=>{const F=_&&_.children,re=_?_.shapeFlag:0,z=w.children,{patchFlag:te,shapeFlag:he}=w;if(te>0){if(te&128){Xe(F,z,E,R,N,M,H,V,j);return}else if(te&256){ye(F,z,E,R,N,M,H,V,j);return}}he&8?(re&16&&qe(F,N,M),z!==F&&u(E,z)):re&16?he&16?Xe(F,z,E,R,N,M,H,V,j):qe(F,N,M,!0):(re&8&&u(E,""),he&16&&O(z,E,R,N,M,H,V,j))},ye=(_,w,E,R,N,M,H,V,j)=>{_=_||ai,w=w||ai;const F=_.length,re=w.length,z=Math.min(F,re);let te;for(te=0;te<z;te++){const he=w[te]=j?Qs(w[te]):ys(w[te]);p(_[te],he,E,null,N,M,H,V,j)}F>re?qe(_,N,M,!0,!1,z):O(w,E,R,N,M,H,V,j,z)},Xe=(_,w,E,R,N,M,H,V,j)=>{let F=0;const re=w.length;let z=_.length-1,te=re-1;for(;F<=z&&F<=te;){const he=_[F],Pe=w[F]=j?Qs(w[F]):ys(w[F]);if(Pi(he,Pe))p(he,Pe,E,null,N,M,H,V,j);else break;F++}for(;F<=z&&F<=te;){const he=_[z],Pe=w[te]=j?Qs(w[te]):ys(w[te]);if(Pi(he,Pe))p(he,Pe,E,null,N,M,H,V,j);else break;z--,te--}if(F>z){if(F<=te){const he=te+1,Pe=he<re?w[he].el:R;for(;F<=te;)p(null,w[F]=j?Qs(w[F]):ys(w[F]),E,Pe,N,M,H,V,j),F++}}else if(F>te)for(;F<=z;)be(_[F],N,M,!0),F++;else{const he=F,Pe=F,We=new Map;for(F=Pe;F<=te;F++){const jt=w[F]=j?Qs(w[F]):ys(w[F]);jt.key!=null&&We.set(jt.key,F)}let Ie,It=0;const Nt=te-Pe+1;let us=!1,hs=0;const Ei=new Array(Nt);for(F=0;F<Nt;F++)Ei[F]=0;for(F=he;F<=z;F++){const jt=_[F];if(It>=Nt){be(jt,N,M,!0);continue}let ds;if(jt.key!=null)ds=We.get(jt.key);else for(Ie=Pe;Ie<=te;Ie++)if(Ei[Ie-Pe]===0&&Pi(jt,w[Ie])){ds=Ie;break}ds===void 0?be(jt,N,M,!0):(Ei[ds-Pe]=F+1,ds>=hs?hs=ds:us=!0,p(jt,w[ds],E,null,N,M,H,V,j),It++)}const Yc=us?Iy(Ei):ai;for(Ie=Yc.length-1,F=Nt-1;F>=0;F--){const jt=Pe+F,ds=w[jt],Gc=w[jt+1],Kc=jt+1<re?Gc.el||Vf(Gc):R;Ei[F]===0?p(null,ds,E,Kc,N,M,H,V,j):us&&(Ie<0||F!==Yc[Ie]?le(ds,E,Kc,2):Ie--)}}},le=(_,w,E,R,N=null)=>{const{el:M,type:H,transition:V,children:j,shapeFlag:F}=_;if(F&6){le(_.component.subTree,w,E,R);return}if(F&128){_.suspense.move(w,E,R);return}if(F&64){H.move(_,w,E,G);return}if(H===_e){n(M,w,E);for(let z=0;z<j.length;z++)le(j[z],w,E,R);n(_.anchor,w,E);return}if(H===go){v(_,w,E);return}if(R!==2&&F&1&&V)if(R===0)V.beforeEnter(M),n(M,w,E),Ut(()=>V.enter(M),N);else{const{leave:z,delayLeave:te,afterLeave:he}=V,Pe=()=>{_.ctx.isUnmounted?i(M):n(M,w,E)},We=()=>{M._isLeaving&&M[Jm](!0),z(M,()=>{Pe(),he&&he()})};te?te(M,Pe,We):We()}else n(M,w,E)},be=(_,w,E,R=!1,N=!1)=>{const{type:M,props:H,ref:V,children:j,dynamicChildren:F,shapeFlag:re,patchFlag:z,dirs:te,cacheIndex:he}=_;if(z===-2&&(N=!1),V!=null&&(Fs(),Xi(V,null,E,_,!0),Bs()),he!=null&&(w.renderCache[he]=void 0),re&256){w.ctx.deactivate(_);return}const Pe=re&1&&te,We=!ui(_);let Ie;if(We&&(Ie=H&&H.onVnodeBeforeUnmount)&&fs(Ie,w,_),re&6)lt(_.component,E,R);else{if(re&128){_.suspense.unmount(E,R);return}Pe&&pn(_,null,w,"beforeUnmount"),re&64?_.type.remove(_,w,E,G,R):F&&!F.hasOnce&&(M!==_e||z>0&&z&64)?qe(F,w,E,!1,!0):(M===_e&&z&384||!N&&re&16)&&qe(j,w,E),R&&Ce(_)}(We&&(Ie=H&&H.onVnodeUnmounted)||Pe)&&Ut(()=>{Ie&&fs(Ie,w,_),Pe&&pn(_,null,w,"unmounted")},E)},Ce=_=>{const{type:w,el:E,anchor:R,transition:N}=_;if(w===_e){Le(E,R);return}if(w===go){x(_);return}const M=()=>{i(E),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(_.shapeFlag&1&&N&&!N.persisted){const{leave:H,delayLeave:V}=N,j=()=>H(E,M);V?V(_.el,M,j):j()}else M()},Le=(_,w)=>{let E;for(;_!==w;)E=d(_),i(_),_=E;i(w)},lt=(_,w,E)=>{const{bum:R,scope:N,job:M,subTree:H,um:V,m:j,a:F}=_;cu(j),cu(F),R&&ho(R),N.stop(),M&&(M.flags|=8,be(H,_,w,E)),V&&Ut(V,w),Ut(()=>{_.isUnmounted=!0},w)},qe=(_,w,E,R=!1,N=!1,M=0)=>{for(let H=M;H<_.length;H++)be(_[H],w,E,R,N)},D=_=>{if(_.shapeFlag&6)return D(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const w=d(_.anchor||_.el),E=w&&w[Gm];return E?d(E):w};let U=!1;const B=(_,w,E)=>{let R;_==null?w._vnode&&(be(w._vnode,null,null,!0),R=w._vnode.component):p(w._vnode||null,_,w,null,null,null,E),w._vnode=_,U||(U=!0,Zc(R),bf(),U=!1)},G={p,um:be,m:le,r:Ce,mt:Be,mc:O,pc:ee,pbc:Y,n:D,o:s};return{render:B,hydrate:void 0,createApp:yy(B)}}function Ta({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function mn({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function Dy(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Wf(s,e,t=!1){const n=s.children,i=e.children;if(fe(n)&&fe(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Qs(i[r]),a.el=o.el),!t&&a.patchFlag!==-2&&Wf(o,a)),a.type===ia&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(s.type===_e?1:0)),a.type===js&&!a.el&&(a.el=o.el)}}function Iy(s){const e=s.slice(),t=[0];let n,i,r,o,a;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(i=t[t.length-1],s[i]<c){e[n]=i,t.push(n);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,s[t[a]]<c?r=a+1:o=a;c<s[t[r]]&&(r>0&&(e[n]=t[r-1]),t[r]=n)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function jf(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jf(e)}function cu(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}function Vf(s){if(s.placeholder)return s.placeholder;const e=s.component;return e?Vf(e.subTree):null}const Uf=s=>s.__isSuspense;function Ny(s,e){e&&e.pendingBranch?fe(s)?e.effects.push(...s):e.effects.push(s):Hm(s)}const _e=Symbol.for("v-fgt"),ia=Symbol.for("v-txt"),js=Symbol.for("v-cmt"),go=Symbol.for("v-stc"),Zi=[];let Yt=null;function P(s=!1){Zi.push(Yt=s?null:[])}function $y(){Zi.pop(),Yt=Zi[Zi.length-1]||null}let gr=1;function Ro(s,e=!1){gr+=s,s<0&&Yt&&e&&(Yt.hasOnce=!0)}function Hf(s){return s.dynamicChildren=gr>0?Yt||ai:null,$y(),gr>0&&Yt&&Yt.push(s),s}function $(s,e,t,n,i,r){return Hf(k(s,e,t,n,i,r,!0))}function ke(s,e,t,n,i){return Hf(W(s,e,t,n,i,!0))}function pr(s){return s?s.__v_isVNode===!0:!1}function Pi(s,e){return s.type===e.type&&s.key===e.key}const zf=({key:s})=>s??null,po=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?ut(s)||Ot(s)||pe(s)?{i:wt,r:s,k:e,f:!!t}:s:null);function k(s,e=null,t=null,n=0,i=null,r=s===_e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&zf(e),ref:e&&po(e),scopeId:_f,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:wt};return a?(mc(l,t),r&128&&s.normalize(l)):t&&(l.shapeFlag|=ut(t)?8:16),gr>0&&!o&&Yt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Yt.push(l),l}const W=Ly;function Ly(s,e=null,t=null,n=0,i=null,r=!1){if((!s||s===ly)&&(s=js),pr(s)){const a=mi(s,e,!0);return t&&mc(a,t),gr>0&&!r&&Yt&&(a.shapeFlag&6?Yt[Yt.indexOf(s)]=a:Yt.push(a)),a.patchFlag=-2,a}if(Ky(s)&&(s=s.__vccOpts),e){e=Fy(e);let{class:a,style:l}=e;a&&!ut(a)&&(e.class=at(a)),ze(l)&&(cc(l)&&!fe(l)&&(l=Ct({},l)),e.style=Xo(l))}const o=ut(s)?1:Uf(s)?128:Km(s)?64:ze(s)?4:pe(s)?2:0;return k(s,e,t,n,i,o,r,!0)}function Fy(s){return s?cc(s)||If(s)?Ct({},s):s:null}function mi(s,e,t=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=s,c=e?qf(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&zf(c),ref:e&&e.ref?t&&r?fe(r)?r.concat(po(e)):[r,po(e)]:po(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==_e?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&mi(s.ssContent),ssFallback:s.ssFallback&&mi(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&hc(u,l.clone(u)),u}function ve(s=" ",e=0){return W(ia,null,s,e)}function By(s,e){const t=W(go,null,s);return t.staticCount=e,t}function K(s="",e=!1){return e?(P(),ke(js,null,s)):W(js,null,s)}function ys(s){return s==null||typeof s=="boolean"?W(js):fe(s)?W(_e,null,s.slice()):pr(s)?Qs(s):W(ia,null,String(s))}function Qs(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:mi(s)}function mc(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(fe(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),mc(s,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!If(e)?e._ctx=wt:i===3&&wt&&(wt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:wt},t=32):(e=String(e),n&64?(t=16,e=[ve(e)]):t=8);s.children=e,s.shapeFlag|=t}function qf(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=at([e.class,n.class]));else if(i==="style")e.style=Xo([e.style,n.style]);else if(qo(i)){const r=e[i],o=n[i];o&&r!==o&&!(fe(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function fs(s,e,t,n=null){xs(s,e,7,[t,n])}const Wy=Af();let jy=0;function Vy(s,e,t){const n=s.type,i=(e?e.appContext:s.appContext)||Wy,r={uid:jy++,vnode:s,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$f(n,i),emitsOptions:Rf(n,i),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:n.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=vy.bind(null,r),s.ce&&s.ce(r),r}let Et=null;const Uy=()=>Et||wt;let Mo,pl;{const s=Jo(),e=(t,n)=>{let i;return(i=s[t])||(i=s[t]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Mo=e("__VUE_INSTANCE_SETTERS__",t=>Et=t),pl=e("__VUE_SSR_SETTERS__",t=>mr=t)}const Dr=s=>{const e=Et;return Mo(s),s.scope.on(),()=>{s.scope.off(),Mo(e)}},uu=()=>{Et&&Et.scope.off(),Mo(null)};function Yf(s){return s.vnode.shapeFlag&4}let mr=!1;function Hy(s,e=!1,t=!1){e&&pl(e);const{props:n,children:i}=s.vnode,r=Yf(s);Ey(s,n,r,e),Cy(s,i,t||e);const o=r?zy(s,e):void 0;return e&&pl(!1),o}function zy(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,uy);const{setup:n}=t;if(n){Fs();const i=s.setupContext=n.length>1?Yy(s):null,r=Dr(s),o=Mr(n,s,0,[s.props,i]),a=zd(o);if(Bs(),r(),(a||s.sp)&&!ui(s)&&kf(s),a){if(o.then(uu,uu),e)return o.then(l=>{hu(s,l)}).catch(l=>{ea(l,s,0)});s.asyncDep=o}else hu(s,o)}else Gf(s)}function hu(s,e,t){pe(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:ze(e)&&(s.setupState=pf(e)),Gf(s)}function Gf(s,e,t){const n=s.type;s.render||(s.render=n.render||_s);{const i=Dr(s);Fs();try{hy(s)}finally{Bs(),i()}}}const qy={get(s,e){return St(s,"get",""),s[e]}};function Yy(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,qy),slots:s.slots,emit:s.emit,expose:e}}function ra(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(pf(Im(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in Qi)return Qi[t](s)},has(e,t){return t in e||t in Qi}})):s.proxy}function Gy(s,e=!0){return pe(s)?s.displayName||s.name:s.name||e&&s.__name}function Ky(s){return pe(s)&&"__vccOpts"in s}const Ft=(s,e)=>Bm(s,e,mr);function Kf(s,e,t){try{Ro(-1);const n=arguments.length;return n===2?ze(e)&&!fe(e)?pr(e)?W(s,null,[e]):W(s,e):W(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&pr(t)&&(t=[t]),W(s,e,t))}finally{Ro(1)}}const Jy="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ml;const du=typeof window<"u"&&window.trustedTypes;if(du)try{ml=du.createPolicy("vue",{createHTML:s=>s})}catch{}const Jf=ml?s=>ml.createHTML(s):s=>s,Xy="http://www.w3.org/2000/svg",Qy="http://www.w3.org/1998/Math/MathML",Cs=typeof document<"u"?document:null,fu=Cs&&Cs.createElement("template"),Zy={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const i=e==="svg"?Cs.createElementNS(Xy,s):e==="mathml"?Cs.createElementNS(Qy,s):t?Cs.createElement(s,{is:t}):Cs.createElement(s);return s==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:s=>Cs.createTextNode(s),createComment:s=>Cs.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Cs.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{fu.innerHTML=Jf(n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s);const a=fu.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},eb=Symbol("_vtc");function tb(s,e,t){const n=s[eb];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const gu=Symbol("_vod"),sb=Symbol("_vsh"),nb=Symbol(""),ib=/(?:^|;)\s*display\s*:/;function rb(s,e,t){const n=s.style,i=ut(t);let r=!1;if(t&&!i){if(e)if(ut(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&mo(n,a,"")}else for(const o in e)t[o]==null&&mo(n,o,"");for(const o in t)o==="display"&&(r=!0),mo(n,o,t[o])}else if(i){if(e!==t){const o=n[nb];o&&(t+=";"+o),n.cssText=t,r=ib.test(t)}}else e&&s.removeAttribute("style");gu in s&&(s[gu]=r?n.display:"",s[sb]&&(n.display="none"))}const pu=/\s*!important$/;function mo(s,e,t){if(fe(t))t.forEach(n=>mo(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=ob(s,e);pu.test(t)?s.setProperty(dn(n),t.replace(pu,""),"important"):s[n]=t}}const mu=["Webkit","Moz","ms"],Pa={};function ob(s,e){const t=Pa[e];if(t)return t;let n=Xt(e);if(n!=="filter"&&n in s)return Pa[e]=n;n=Ko(n);for(let i=0;i<mu.length;i++){const r=mu[i]+n;if(r in s)return Pa[e]=r}return e}const yu="http://www.w3.org/1999/xlink";function bu(s,e,t,n,i,r=fm(e)){n&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(yu,e.slice(6,e.length)):s.setAttributeNS(yu,e,t):t==null||r&&!Kd(t)?s.removeAttribute(e):s.setAttribute(e,r?"":Vs(t)?String(t):t)}function vu(s,e,t,n,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?Jf(t):t);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?s.getAttribute("value")||"":s.value,l=t==null?s.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in s))&&(s.value=l),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const a=typeof s[e];a==="boolean"?t=Kd(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(i||e)}function ti(s,e,t,n){s.addEventListener(e,t,n)}function ab(s,e,t,n){s.removeEventListener(e,t,n)}const _u=Symbol("_vei");function lb(s,e,t,n,i=null){const r=s[_u]||(s[_u]={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=cb(e);if(n){const c=r[e]=db(n,i);ti(s,a,c,l)}else o&&(ab(s,a,o,l),r[e]=void 0)}}const wu=/(?:Once|Passive|Capture)$/;function cb(s){let e;if(wu.test(s)){e={};let n;for(;n=s.match(wu);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):dn(s.slice(2)),e]}let Oa=0;const ub=Promise.resolve(),hb=()=>Oa||(ub.then(()=>Oa=0),Oa=Date.now());function db(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;xs(fb(n,t.value),e,5,[n])};return t.value=s,t.attached=hb(),t}function fb(s,e){if(fe(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const xu=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,gb=(s,e,t,n,i,r)=>{const o=i==="svg";e==="class"?tb(s,n,o):e==="style"?rb(s,t,n):qo(e)?Zl(e)||lb(s,e,t,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pb(s,e,n,o))?(vu(s,e,n),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&bu(s,e,n,o,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!ut(n))?vu(s,Xt(e),n,r,e):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),bu(s,e,n,o))};function pb(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&xu(e)&&pe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&s.tagName==="IFRAME"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=s.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return xu(e)&&ut(t)?!1:e in s}const ku=s=>{const e=s.props["onUpdate:modelValue"]||!1;return fe(e)?t=>ho(e,t):e};function mb(s){s.target.composing=!0}function Su(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ca=Symbol("_assign");function Eu(s,e,t){return e&&(s=s.trim()),t&&(s=sc(s)),s}const yt={created(s,{modifiers:{lazy:e,trim:t,number:n}},i){s[Ca]=ku(i);const r=n||i.props&&i.props.type==="number";ti(s,e?"change":"input",o=>{o.target.composing||s[Ca](Eu(s.value,t,r))}),(t||r)&&ti(s,"change",()=>{s.value=Eu(s.value,t,r)}),e||(ti(s,"compositionstart",mb),ti(s,"compositionend",Su),ti(s,"change",Su))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:r}},o){if(s[Ca]=ku(o),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?sc(s.value):s.value,l=e??"";a!==l&&(document.activeElement===s&&s.type!=="range"&&(n&&e===t||i&&s.value.trim()===l)||(s.value=l))}},yb={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},er=(s,e)=>{const t=s._withKeys||(s._withKeys={}),n=e.join(".");return t[n]||(t[n]=(i=>{if(!("key"in i))return;const r=dn(i.key);if(e.some(o=>o===r||yb[o]===r))return s(i)}))},bb=Ct({patchProp:gb},Zy);let Tu;function vb(){return Tu||(Tu=Ry(bb))}const _b=((...s)=>{const e=vb().createApp(...s),{mount:t}=e;return e.mount=n=>{const i=xb(n);if(!i)return;const r=e._component;!pe(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,wb(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function wb(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function xb(s){return ut(s)?document.querySelector(s):s}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const si=typeof document<"u";function Xf(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function kb(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&Xf(s.default)}const Re=Object.assign;function Aa(s,e){const t={};for(const n in e){const i=e[n];t[n]=cs(i)?i.map(s):s(i)}return t}const tr=()=>{},cs=Array.isArray;function Pu(s,e){const t={};for(const n in s)t[n]=n in e?e[n]:s[n];return t}const Qf=/#/g,Sb=/&/g,Eb=/\//g,Tb=/=/g,Pb=/\?/g,Zf=/\+/g,Ob=/%5B/g,Cb=/%5D/g,eg=/%5E/g,Ab=/%60/g,tg=/%7B/g,Rb=/%7C/g,sg=/%7D/g,Mb=/%20/g;function yc(s){return s==null?"":encodeURI(""+s).replace(Rb,"|").replace(Ob,"[").replace(Cb,"]")}function Db(s){return yc(s).replace(tg,"{").replace(sg,"}").replace(eg,"^")}function yl(s){return yc(s).replace(Zf,"%2B").replace(Mb,"+").replace(Qf,"%23").replace(Sb,"%26").replace(Ab,"`").replace(tg,"{").replace(sg,"}").replace(eg,"^")}function Ib(s){return yl(s).replace(Tb,"%3D")}function Nb(s){return yc(s).replace(Qf,"%23").replace(Pb,"%3F")}function $b(s){return Nb(s).replace(Eb,"%2F")}function yr(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const Lb=/\/$/,Fb=s=>s.replace(Lb,"");function Ra(s,e,t="/"){let n,i={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(n=e.slice(0,l),r=e.slice(l,a>0?a:e.length),i=s(r.slice(1))),a>=0&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=Vb(n??e,t),{fullPath:n+r+o,path:n,query:i,hash:yr(o)}}function Bb(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Ou(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function Wb(s,e,t){const n=e.matched.length-1,i=t.matched.length-1;return n>-1&&n===i&&yi(e.matched[n],t.matched[i])&&ng(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function yi(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function ng(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(var t in s)if(!jb(s[t],e[t]))return!1;return!0}function jb(s,e){return cs(s)?Cu(s,e):cs(e)?Cu(e,s):(s==null?void 0:s.valueOf())===(e==null?void 0:e.valueOf())}function Cu(s,e){return cs(e)?s.length===e.length&&s.every((t,n)=>t===e[n]):s.length===1&&s[0]===e}function Vb(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),n=s.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let r=t.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+n.slice(o).join("/")}const Gs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let bl=(function(s){return s.pop="pop",s.push="push",s})({}),Ma=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function Ub(s){if(!s)if(si){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),Fb(s)}const Hb=/^[^#]+#/;function zb(s,e){return s.replace(Hb,"#")+e}function qb(s,e){const t=document.documentElement.getBoundingClientRect(),n=s.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const oa=()=>({left:window.scrollX,top:window.scrollY});function Yb(s){let e;if("el"in s){const t=s.el,n=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=qb(i,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Au(s,e){return(history.state?history.state.position-e:-1)+s}const vl=new Map;function Gb(s,e){vl.set(s,e)}function Kb(s){const e=vl.get(s);return vl.delete(s),e}function Jb(s){return typeof s=="string"||s&&typeof s=="object"}function ig(s){return typeof s=="string"||typeof s=="symbol"}let Qe=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const rg=Symbol("");Qe.MATCHER_NOT_FOUND+"",Qe.NAVIGATION_GUARD_REDIRECT+"",Qe.NAVIGATION_ABORTED+"",Qe.NAVIGATION_CANCELLED+"",Qe.NAVIGATION_DUPLICATED+"";function bi(s,e){return Re(new Error,{type:s,[rg]:!0},e)}function Es(s,e){return s instanceof Error&&rg in s&&(e==null||!!(s.type&e))}const Xb=["params","query","hash"];function Qb(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const e={};for(const t of Xb)t in s&&(e[t]=s[t]);return JSON.stringify(e,null,2)}function Zb(s){const e={};if(s===""||s==="?")return e;const t=(s[0]==="?"?s.slice(1):s).split("&");for(let n=0;n<t.length;++n){const i=t[n].replace(Zf," "),r=i.indexOf("="),o=yr(r<0?i:i.slice(0,r)),a=r<0?null:yr(i.slice(r+1));if(o in e){let l=e[o];cs(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Ru(s){let e="";for(let t in s){const n=s[t];if(t=Ib(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(cs(n)?n.map(i=>i&&yl(i)):[n&&yl(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function ev(s){const e={};for(const t in s){const n=s[t];n!==void 0&&(e[t]=cs(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const tv=Symbol(""),Mu=Symbol(""),aa=Symbol(""),bc=Symbol(""),_l=Symbol("");function Oi(){let s=[];function e(n){return s.push(n),()=>{const i=s.indexOf(n);i>-1&&s.splice(i,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function Zs(s,e,t,n,i,r=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(bi(Qe.NAVIGATION_ABORTED,{from:t,to:e})):d instanceof Error?l(d):Jb(d)?l(bi(Qe.NAVIGATION_GUARD_REDIRECT,{from:e,to:d})):(o&&n.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=r(()=>s.call(n&&n.instances[i],e,t,c));let h=Promise.resolve(u);s.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Da(s,e,t,n,i=r=>r()){const r=[];for(const o of s)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Xf(l)){const c=(l.__vccOpts||l)[e];c&&r.push(Zs(c,t,n,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=kb(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const d=(h.__vccOpts||h)[e];return d&&Zs(d,t,n,o,a,i)()}))}}return r}function sv(s,e){const t=[],n=[],i=[],r=Math.max(e.matched.length,s.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(s.matched.find(c=>yi(c,a))?n.push(a):t.push(a));const l=s.matched[o];l&&(e.matched.find(c=>yi(c,l))||i.push(l))}return[t,n,i]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let nv=()=>location.protocol+"//"+location.host;function og(s,e){const{pathname:t,search:n,hash:i}=e,r=s.indexOf("#");if(r>-1){let o=i.includes(s.slice(r))?s.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),Ou(a,"")}return Ou(t,s)+n+i}function iv(s,e,t,n){let i=[],r=[],o=null;const a=({state:d})=>{const f=og(s,location),g=t.value,p=e.value;let m=0;if(d){if(t.value=f,e.value=d,o&&o===g){o=null;return}m=p?d.position-p.position:0}else n(f);i.forEach(y=>{y(t.value,g,{delta:m,type:bl.pop,direction:m?m>0?Ma.forward:Ma.back:Ma.unknown})})};function l(){o=t.value}function c(d){i.push(d);const f=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return r.push(f),f}function u(){if(document.visibilityState==="hidden"){const{history:d}=window;if(!d.state)return;d.replaceState(Re({},d.state,{scroll:oa()}),"")}}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:h}}function Du(s,e,t,n=!1,i=!1){return{back:s,current:e,forward:t,replaced:n,position:window.history.length,scroll:i?oa():null}}function rv(s){const{history:e,location:t}=window,n={value:og(s,t)},i={value:e.state};i.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=s.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?s:s.slice(h))+l:nv()+s+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),t[u?"replace":"assign"](d)}}function o(l,c){r(l,Re({},e.state,Du(i.value.back,l,i.value.forward,!0),c,{position:i.value.position}),!0),n.value=l}function a(l,c){const u=Re({},i.value,e.state,{forward:l,scroll:oa()});r(u.current,u,!0),r(l,Re({},Du(n.value,l,null),{position:u.position+1},c),!1),n.value=l}return{location:n,state:i,push:a,replace:o}}function ov(s){s=Ub(s);const e=rv(s),t=iv(s,e.state,e.location,e.replace);function n(r,o=!0){o||t.pauseListeners(),history.go(r)}const i=Re({location:"",base:s,go:n,createHref:zb.bind(null,s)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let An=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var dt=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(dt||{});const av={type:An.Static,value:""},lv=/[a-zA-Z0-9_]/;function cv(s){if(!s)return[[]];if(s==="/")return[[av]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=dt.Static,n=t;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(t===dt.Static?r.push({type:An.Static,value:c}):t===dt.Param||t===dt.ParamRegExp||t===dt.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:An.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<s.length;){if(l=s[a++],l==="\\"&&t!==dt.ParamRegExp){n=t,t=dt.EscapeNext;continue}switch(t){case dt.Static:l==="/"?(c&&h(),o()):l===":"?(h(),t=dt.Param):d();break;case dt.EscapeNext:d(),t=n;break;case dt.Param:l==="("?t=dt.ParamRegExp:lv.test(l)?d():(h(),t=dt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case dt.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=dt.ParamRegExpEnd:u+=l;break;case dt.ParamRegExpEnd:h(),t=dt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===dt.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}const Iu="[^/]+?",uv={sensitive:!1,strict:!1,start:!0,end:!0};var Mt=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(Mt||{});const hv=/[.+*?^${}()[\]/\\]/g;function dv(s,e){const t=Re({},uv,e),n=[];let i=t.start?"^":"";const r=[];for(const c of s){const u=c.length?[]:[Mt.Root];t.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=Mt.Segment+(t.sensitive?Mt.BonusCaseSensitive:0);if(d.type===An.Static)h||(i+="/"),i+=d.value.replace(hv,"\\$&"),f+=Mt.Static;else if(d.type===An.Param){const{value:g,repeatable:p,optional:m,regexp:y}=d;r.push({name:g,repeatable:p,optional:m});const b=y||Iu;if(b!==Iu){f+=Mt.BonusCustomRegExp;try{`${b}`}catch(x){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+x.message)}}let v=p?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;h||(v=m&&c.length<2?`(?:/${v})`:"/"+v),m&&(v+="?"),i+=v,f+=Mt.Dynamic,m&&(f+=Mt.BonusOptional),p&&(f+=Mt.BonusRepeatable),b===".*"&&(f+=Mt.BonusWildcard)}u.push(f)}n.push(u)}if(t.strict&&t.end){const c=n.length-1;n[c][n[c].length-1]+=Mt.BonusStrict}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=r[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of s){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===An.Static)u+=f.value;else if(f.type===An.Param){const{value:g,repeatable:p,optional:m}=f,y=g in c?c[g]:"";if(cs(y)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=cs(y)?y.join("/"):y;if(!b)if(m)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=b}}return u||"/"}return{re:o,score:n,keys:r,parse:a,stringify:l}}function fv(s,e){let t=0;for(;t<s.length&&t<e.length;){const n=e[t]-s[t];if(n)return n;t++}return s.length<e.length?s.length===1&&s[0]===Mt.Static+Mt.Segment?-1:1:s.length>e.length?e.length===1&&e[0]===Mt.Static+Mt.Segment?1:-1:0}function ag(s,e){let t=0;const n=s.score,i=e.score;for(;t<n.length&&t<i.length;){const r=fv(n[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-n.length)===1){if(Nu(n))return 1;if(Nu(i))return-1}return i.length-n.length}function Nu(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const gv={strict:!1,end:!0,sensitive:!1};function pv(s,e,t){const n=dv(cv(s.path),t),i=Re(n,{record:s,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function mv(s,e){const t=[],n=new Map;e=Pu(gv,e);function i(h){return n.get(h)}function r(h,d,f){const g=!f,p=Lu(h);p.aliasOf=f&&f.record;const m=Pu(e,h),y=[p];if("alias"in h){const x=typeof h.alias=="string"?[h.alias]:h.alias;for(const T of x)y.push(Lu(Re({},p,{components:f?f.record.components:p.components,path:T,aliasOf:f?f.record:p})))}let b,v;for(const x of y){const{path:T}=x;if(d&&T[0]!=="/"){const C=d.record.path,A=C[C.length-1]==="/"?"":"/";x.path=d.record.path+(T&&A+T)}if(b=pv(x,d,m),f?f.alias.push(b):(v=v||b,v!==b&&v.alias.push(b),g&&h.name&&!Fu(b)&&o(h.name)),lg(b)&&l(b),p.children){const C=p.children;for(let A=0;A<C.length;A++)r(C[A],b,f&&f.children[A])}f=f||b}return v?()=>{o(v)}:tr}function o(h){if(ig(h)){const d=n.get(h);d&&(n.delete(h),t.splice(t.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=t.indexOf(h);d>-1&&(t.splice(d,1),h.record.name&&n.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return t}function l(h){const d=vv(h,t);t.splice(d,0,h),h.record.name&&!Fu(h)&&n.set(h.record.name,h)}function c(h,d){let f,g={},p,m;if("name"in h&&h.name){if(f=n.get(h.name),!f)throw bi(Qe.MATCHER_NOT_FOUND,{location:h});m=f.record.name,g=Re($u(d.params,f.keys.filter(v=>!v.optional).concat(f.parent?f.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),h.params&&$u(h.params,f.keys.map(v=>v.name))),p=f.stringify(g)}else if(h.path!=null)p=h.path,f=t.find(v=>v.re.test(p)),f&&(g=f.parse(p),m=f.record.name);else{if(f=d.name?n.get(d.name):t.find(v=>v.re.test(d.path)),!f)throw bi(Qe.MATCHER_NOT_FOUND,{location:h,currentLocation:d});m=f.record.name,g=Re({},d.params,h.params),p=f.stringify(g)}const y=[];let b=f;for(;b;)y.unshift(b.record),b=b.parent;return{name:m,path:p,params:g,matched:y,meta:bv(y)}}s.forEach(h=>r(h));function u(){t.length=0,n.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function $u(s,e){const t={};for(const n of e)n in s&&(t[n]=s[n]);return t}function Lu(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:yv(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function yv(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const n in s.components)e[n]=typeof t=="object"?t[n]:t;return e}function Fu(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function bv(s){return s.reduce((e,t)=>Re(e,t.meta),{})}function vv(s,e){let t=0,n=e.length;for(;t!==n;){const r=t+n>>1;ag(s,e[r])<0?n=r:t=r+1}const i=_v(s);return i&&(n=e.lastIndexOf(i,n-1)),n}function _v(s){let e=s;for(;e=e.parent;)if(lg(e)&&ag(s,e)===0)return e}function lg({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Bu(s){const e=rs(aa),t=rs(bc),n=Ft(()=>{const l=Te(s.to);return e.resolve(l)}),i=Ft(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(yi.bind(null,u));if(d>-1)return d;const f=Wu(l[c-2]);return c>1&&Wu(u)===f&&h[h.length-1].path!==f?h.findIndex(yi.bind(null,l[c-2])):d}),r=Ft(()=>i.value>-1&&Sv(t.params,n.value.params)),o=Ft(()=>i.value>-1&&i.value===t.matched.length-1&&ng(t.params,n.value.params));function a(l={}){if(kv(l)){const c=e[Te(s.replace)?"replace":"push"](Te(s.to)).catch(tr);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Ft(()=>n.value.href),isActive:r,isExactActive:o,navigate:a}}function wv(s){return s.length===1?s[0]:s}const xv=ne({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Bu,setup(s,{slots:e}){const t=Zo(Bu(s)),{options:n}=rs(aa),i=Ft(()=>({[ju(s.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[ju(s.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&wv(e.default(t));return s.custom?r:Kf("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}}),vi=xv;function kv(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function Sv(s,e){for(const t in e){const n=e[t],i=s[t];if(typeof n=="string"){if(n!==i)return!1}else if(!cs(i)||i.length!==n.length||n.some((r,o)=>r.valueOf()!==i[o].valueOf()))return!1}return!0}function Wu(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const ju=(s,e,t)=>s??e??t,Ev=ne({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const n=rs(_l),i=Ft(()=>s.route||n.value),r=rs(Mu,0),o=Ft(()=>{let c=Te(r);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Ft(()=>i.value.matched[o.value]);fo(Mu,Ft(()=>o.value+1)),fo(tv,a),fo(_l,i);const l=I();return os(()=>[l.value,a.value,s.name],([c,u,h],[d,f,g])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!yi(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=i.value,u=s.name,h=a.value,d=h&&h.components[u];if(!d)return Vu(t.default,{Component:d,route:c});const f=h.props[u],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=Kf(d,Re({},g,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Vu(t.default,{Component:m,route:c})||m}}});function Vu(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const cg=Ev;function Tv(s){const e=mv(s.routes,s),t=s.parseQuery||Zb,n=s.stringifyQuery||Ru,i=s.history,r=Oi(),o=Oi(),a=Oi(),l=Nm(Gs);let c=Gs;si&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Aa.bind(null,D=>""+D),h=Aa.bind(null,$b),d=Aa.bind(null,yr);function f(D,U){let B,G;return ig(D)?(B=e.getRecordMatcher(D),G=U):G=D,e.addRoute(G,B)}function g(D){const U=e.getRecordMatcher(D);U&&e.removeRoute(U)}function p(){return e.getRoutes().map(D=>D.record)}function m(D){return!!e.getRecordMatcher(D)}function y(D,U){if(U=Re({},U||l.value),typeof D=="string"){const E=Ra(t,D,U.path),R=e.resolve({path:E.path},U),N=i.createHref(E.fullPath);return Re(E,R,{params:d(R.params),hash:yr(E.hash),redirectedFrom:void 0,href:N})}let B;if(D.path!=null)B=Re({},D,{path:Ra(t,D.path,U.path).path});else{const E=Re({},D.params);for(const R in E)E[R]==null&&delete E[R];B=Re({},D,{params:h(E)}),U.params=h(U.params)}const G=e.resolve(B,U),me=D.hash||"";G.params=u(d(G.params));const _=Bb(n,Re({},D,{hash:Db(me),path:G.path})),w=i.createHref(_);return Re({fullPath:_,hash:me,query:n===Ru?ev(D.query):D.query||{}},G,{redirectedFrom:void 0,href:w})}function b(D){return typeof D=="string"?Ra(t,D,l.value.path):Re({},D)}function v(D,U){if(c!==D)return bi(Qe.NAVIGATION_CANCELLED,{from:U,to:D})}function x(D){return A(D)}function T(D){return x(Re(b(D),{replace:!0}))}function C(D,U){const B=D.matched[D.matched.length-1];if(B&&B.redirect){const{redirect:G}=B;let me=typeof G=="function"?G(D,U):G;return typeof me=="string"&&(me=me.includes("?")||me.includes("#")?me=b(me):{path:me},me.params={}),Re({query:D.query,hash:D.hash,params:me.path!=null?{}:D.params},me)}}function A(D,U){const B=c=y(D),G=l.value,me=D.state,_=D.force,w=D.replace===!0,E=C(B,G);if(E)return A(Re(b(E),{state:typeof E=="object"?Re({},me,E.state):me,force:_,replace:w}),U||B);const R=B;R.redirectedFrom=U;let N;return!_&&Wb(n,G,B)&&(N=bi(Qe.NAVIGATION_DUPLICATED,{to:R,from:G}),le(G,G,!0,!1)),(N?Promise.resolve(N):Y(R,G)).catch(M=>Es(M)?Es(M,Qe.NAVIGATION_GUARD_REDIRECT)?M:Xe(M):ee(M,R,G)).then(M=>{if(M){if(Es(M,Qe.NAVIGATION_GUARD_REDIRECT))return A(Re({replace:w},b(M.to),{state:typeof M.to=="object"?Re({},me,M.to.state):me,force:_}),U||R)}else M=q(R,G,!0,w,me);return Z(R,G,M),M})}function O(D,U){const B=v(D,U);return B?Promise.reject(B):Promise.resolve()}function L(D){const U=Le.values().next().value;return U&&typeof U.runWithContext=="function"?U.runWithContext(D):D()}function Y(D,U){let B;const[G,me,_]=sv(D,U);B=Da(G.reverse(),"beforeRouteLeave",D,U);for(const E of G)E.leaveGuards.forEach(R=>{B.push(Zs(R,D,U))});const w=O.bind(null,D,U);return B.push(w),qe(B).then(()=>{B=[];for(const E of r.list())B.push(Zs(E,D,U));return B.push(w),qe(B)}).then(()=>{B=Da(me,"beforeRouteUpdate",D,U);for(const E of me)E.updateGuards.forEach(R=>{B.push(Zs(R,D,U))});return B.push(w),qe(B)}).then(()=>{B=[];for(const E of _)if(E.beforeEnter)if(cs(E.beforeEnter))for(const R of E.beforeEnter)B.push(Zs(R,D,U));else B.push(Zs(E.beforeEnter,D,U));return B.push(w),qe(B)}).then(()=>(D.matched.forEach(E=>E.enterCallbacks={}),B=Da(_,"beforeRouteEnter",D,U,L),B.push(w),qe(B))).then(()=>{B=[];for(const E of o.list())B.push(Zs(E,D,U));return B.push(w),qe(B)}).catch(E=>Es(E,Qe.NAVIGATION_CANCELLED)?E:Promise.reject(E))}function Z(D,U,B){a.list().forEach(G=>L(()=>G(D,U,B)))}function q(D,U,B,G,me){const _=v(D,U);if(_)return _;const w=U===Gs,E=si?history.state:{};B&&(G||w?i.replace(D.fullPath,Re({scroll:w&&E&&E.scroll},me)):i.push(D.fullPath,me)),l.value=D,le(D,U,B,w),Xe()}let we;function Be(){we||(we=i.listen((D,U,B)=>{if(!lt.listening)return;const G=y(D),me=C(G,lt.currentRoute.value);if(me){A(Re(me,{replace:!0,force:!0}),G).catch(tr);return}c=G;const _=l.value;si&&Gb(Au(_.fullPath,B.delta),oa()),Y(G,_).catch(w=>Es(w,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_CANCELLED)?w:Es(w,Qe.NAVIGATION_GUARD_REDIRECT)?(A(Re(b(w.to),{force:!0}),G).then(E=>{Es(E,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&!B.delta&&B.type===bl.pop&&i.go(-1,!1)}).catch(tr),Promise.reject()):(B.delta&&i.go(-B.delta,!1),ee(w,G,_))).then(w=>{w=w||q(G,_,!1),w&&(B.delta&&!Es(w,Qe.NAVIGATION_CANCELLED)?i.go(-B.delta,!1):B.type===bl.pop&&Es(w,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),Z(G,_,w)}).catch(tr)}))}let ce=Oi(),Q=Oi(),J;function ee(D,U,B){Xe(D);const G=Q.list();return G.length?G.forEach(me=>me(D,U,B)):console.error(D),Promise.reject(D)}function ye(){return J&&l.value!==Gs?Promise.resolve():new Promise((D,U)=>{ce.add([D,U])})}function Xe(D){return J||(J=!D,Be(),ce.list().forEach(([U,B])=>D?B(D):U()),ce.reset()),D}function le(D,U,B,G){const{scrollBehavior:me}=s;if(!si||!me)return Promise.resolve();const _=!B&&Kb(Au(D.fullPath,0))||(G||!B)&&history.state&&history.state.scroll||null;return pt().then(()=>me(D,U,_)).then(w=>w&&Yb(w)).catch(w=>ee(w,D,U))}const be=D=>i.go(D);let Ce;const Le=new Set,lt={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:p,resolve:y,options:s,push:x,replace:T,go:be,back:()=>be(-1),forward:()=>be(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:Q.add,isReady:ye,install(D){D.component("RouterLink",vi),D.component("RouterView",cg),D.config.globalProperties.$router=lt,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>Te(l)}),si&&!Ce&&l.value===Gs&&(Ce=!0,x(i.location).catch(G=>{}));const U={};for(const G in Gs)Object.defineProperty(U,G,{get:()=>l.value[G],enumerable:!0});D.provide(aa,lt),D.provide(bc,ff(U)),D.provide(_l,l);const B=D.unmount;Le.add(D),D.unmount=function(){Le.delete(D),Le.size<1&&(c=Gs,we&&we(),we=null,l.value=Gs,Ce=!1,J=!1),B()}}};function qe(D){return D.reduce((U,B)=>U.then(()=>L(B)),Promise.resolve())}return lt}function Wt(){return rs(aa)}function vc(s){return rs(bc)}const Pv={class:"navLabel"},Ov=ne({__name:"NavBarButton",props:{label:{},icon:{},route:{},active:{}},setup(s){return Wt(),(e,t)=>(P(),ke(Te(vi),{to:s.route,class:at("navLink"+(s.active===s.label?" active":""))},{default:nt(()=>[k("i",{class:at(s.icon)},null,2),k("span",Pv,se(s.label),1)]),_:1},8,["to","class"]))}}),ue=(s,e)=>{const t=s.__vccOpts||s;for(const[n,i]of e)t[n]=i;return t},Hr=ue(Ov,[["__scopeId","data-v-64e6c1bc"]]),Cv={class:"nav-bar"},Av=ne({__name:"NavBar",props:{active:{}},setup(s){return(e,t)=>(P(),$("nav",Cv,[W(Hr,{label:"Home",icon:"fas fa-home",route:"/app",active:s.active},null,8,["active"]),W(Hr,{label:"Stats",icon:"fas fa-chart-bar",route:"/app/stats",active:s.active},null,8,["active"]),W(Hr,{label:"Exercises",icon:"fas fa-dumbbell",route:"/app/exercises",active:s.active},null,8,["active"]),W(Hr,{label:"Upload",icon:"fas fa-camera",route:"/app/upload",active:s.active},null,8,["active"])]))}}),Rv=ue(Av,[["__scopeId","data-v-dae4698a"]]);function la(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t}function Mv(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?r(u.value):i(u.value).then(a,l)}c((n=n.apply(s,e||[])).next())})}const Dv=s=>s?(...e)=>s(...e):(...e)=>fetch(...e);class _c extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Iv extends _c{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Uu extends _c{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hu extends _c{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wl;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(wl||(wl={}));class Nv{constructor(e,{headers:t={},customFetch:n,region:i=wl.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Dv(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Mv(this,arguments,void 0,function*(t,n={}){var i;let r,o;try{const{headers:a,method:l,body:c,signal:u,timeout:h}=n;let d={},{region:f}=n;f||(f=this.region);const g=new URL(`${this.url}/${t}`);f&&f!=="any"&&(d["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let p;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=c):typeof c=="string"?(d["Content-Type"]="text/plain",p=c):typeof FormData<"u"&&c instanceof FormData?p=c:(d["Content-Type"]="application/json",p=JSON.stringify(c)):p=c;let m=u;h&&(o=new AbortController,r=setTimeout(()=>o.abort(),h),u?(m=o.signal,u.addEventListener("abort",()=>o.abort())):m=o.signal);const y=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:p,signal:m}).catch(T=>{throw new Iv(T)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new Uu(y);if(!y.ok)throw new Hu(y);let v=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield y.json():v==="application/octet-stream"||v==="application/pdf"?x=yield y.blob():v==="text/event-stream"?x=y:v==="multipart/form-data"?x=yield y.formData():x=yield y.text(),{data:x,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof Hu||a instanceof Uu?a.context:void 0}}finally{r&&clearTimeout(r)}})}}var $v=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Lv=class{constructor(s){var e,t;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(e=s.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=s.signal,this.isMaybeSingle=(t=s.isMaybeSingle)!==null&&t!==void 0?t:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,e){return this.headers=new Headers(this.headers),this.headers.set(s,e),this}then(s,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{let o=null,a=null,l=null,c=r.status,u=r.statusText;if(r.ok){var h,d;if(t.method!=="HEAD"){var f;const y=await r.text();y===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((f=t.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=y:a=JSON.parse(y))}const p=(h=t.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),m=(d=r.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");p&&m&&m.length>1&&(l=parseInt(m[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;const p=await r.text();try{o=JSON.parse(p),Array.isArray(o)&&r.status===404&&(a=[],o=null,c=200,u="OK")}catch{r.status===404&&p===""?(c=204,u="No Content"):o={message:p}}if(o&&t.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&t.shouldThrowOnError)throw new $v(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(r=>{var o;let a="";const l=r==null?void 0:r.cause;if(l){var c,u,h,d;const g=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",p=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";a=`${(h=r==null?void 0:r.name)!==null&&h!==void 0?h:"FetchError"}: ${r==null?void 0:r.message}`,a+=`

Caused by: ${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"Error"}: ${g}`,p&&(a+=` (${p})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var f;a=(f=r==null?void 0:r.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(s,e)}returns(){return this}overrideTypes(){return this}},Fv=class extends Lv{select(s){let e=!1;const t=(s??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:e=!0,nullsFirst:t,foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.order`:"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${o?`${o},`:""}${s}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:e,referencedTable:t=e}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${s}`),this}range(s,e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"offset":`${n}.offset`,r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${s}`),this.url.searchParams.set(r,`${e-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:e=!1,settings:t=!1,buffers:n=!1,wal:i=!1,format:r="text"}={}){var o;const a=[s?"analyze":null,e?"verbose":null,t?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${r}; for="${l}"; options=${a};`),r==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const zu=new RegExp("[,()]");var ni=class extends Fv{eq(s,e){return this.url.searchParams.append(s,`eq.${e}`),this}neq(s,e){return this.url.searchParams.append(s,`neq.${e}`),this}gt(s,e){return this.url.searchParams.append(s,`gt.${e}`),this}gte(s,e){return this.url.searchParams.append(s,`gte.${e}`),this}lt(s,e){return this.url.searchParams.append(s,`lt.${e}`),this}lte(s,e){return this.url.searchParams.append(s,`lte.${e}`),this}like(s,e){return this.url.searchParams.append(s,`like.${e}`),this}likeAllOf(s,e){return this.url.searchParams.append(s,`like(all).{${e.join(",")}}`),this}likeAnyOf(s,e){return this.url.searchParams.append(s,`like(any).{${e.join(",")}}`),this}ilike(s,e){return this.url.searchParams.append(s,`ilike.${e}`),this}ilikeAllOf(s,e){return this.url.searchParams.append(s,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(s,e){return this.url.searchParams.append(s,`ilike(any).{${e.join(",")}}`),this}regexMatch(s,e){return this.url.searchParams.append(s,`match.${e}`),this}regexIMatch(s,e){return this.url.searchParams.append(s,`imatch.${e}`),this}is(s,e){return this.url.searchParams.append(s,`is.${e}`),this}isDistinct(s,e){return this.url.searchParams.append(s,`isdistinct.${e}`),this}in(s,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&zu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`in.(${t})`),this}notIn(s,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&zu.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`not.in.(${t})`),this}contains(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cs.{${e.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(e)}`),this}containedBy(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cd.{${e.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(e)}`),this}rangeGt(s,e){return this.url.searchParams.append(s,`sr.${e}`),this}rangeGte(s,e){return this.url.searchParams.append(s,`nxl.${e}`),this}rangeLt(s,e){return this.url.searchParams.append(s,`sl.${e}`),this}rangeLte(s,e){return this.url.searchParams.append(s,`nxr.${e}`),this}rangeAdjacent(s,e){return this.url.searchParams.append(s,`adj.${e}`),this}overlaps(s,e){return typeof e=="string"?this.url.searchParams.append(s,`ov.${e}`):this.url.searchParams.append(s,`ov.{${e.join(",")}}`),this}textSearch(s,e,{config:t,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const r=t===void 0?"":`(${t})`;return this.url.searchParams.append(s,`${i}fts${r}.${e}`),this}match(s){return Object.entries(s).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(s,e,t){return this.url.searchParams.append(s,`not.${e}.${t}`),this}or(s,{foreignTable:e,referencedTable:t=e}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${s})`),this}filter(s,e,t){return this.url.searchParams.append(s,`${e}.${t}`),this}},Bv=class{constructor(s,{headers:e={},schema:t,fetch:n}){this.url=s,this.headers=new Headers(e),this.schema=t,this.fetch=n}select(s,e){const{head:t=!1,count:n}=e??{},i=t?"HEAD":"GET";let r=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new ni({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:e,defaultToNull:t=!0}={}){var n;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const r=s.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(r.length>0){const o=[...new Set(r)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new ni({method:i,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(s,{onConflict:e,ignoreDuplicates:t=!1,count:n,defaultToNull:i=!0}={}){var r;const o="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const a=s.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ni({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}update(s,{count:e}={}){var t;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new ni({method:n,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:s}={}){var e;const t="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new ni({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Wv=class ug{constructor(e,{headers:t={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Bv(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ug(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:r}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;n||i?(a=n?"HEAD":"GET",Object.entries(t).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(a="POST",c=t);const u=new Headers(this.headers);return r&&u.set("Prefer",`count=${r}`),new ni({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class jv{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Vv="2.89.0",Uv=`realtime-js/${Vv}`,hg="1.0.0",Hv="2.0.0",qu=hg,xl=1e4,zv=1e3,qv=100;var en;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(en||(en={}));var ft;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ft||(ft={}));var ts;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ts||(ts={}));var kl;(function(s){s.websocket="websocket"})(kl||(kl={}));var On;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(On||(On={}));class Yv{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,n){var i,r;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let g=new DataView(f),p=0;g.setUint8(p++,this.KINDS.userBroadcastPush),g.setUint8(p++,l.length),g.setUint8(p++,a.length),g.setUint8(p++,o.length),g.setUint8(p++,c.length),g.setUint8(p++,h.length),g.setUint8(p++,t),Array.from(l,y=>g.setUint8(p++,y.charCodeAt(0))),Array.from(a,y=>g.setUint8(p++,y.charCodeAt(0))),Array.from(o,y=>g.setUint8(p++,y.charCodeAt(0))),Array.from(c,y=>g.setUint8(p++,y.charCodeAt(0))),Array.from(h,y=>g.setUint8(p++,y.charCodeAt(0)));var m=new Uint8Array(f.byteLength+n.byteLength);return m.set(new Uint8Array(f),0),m.set(new Uint8Array(n),f.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,r,o,a,l]=n;return t({join_ref:i,ref:r,topic:o,event:a,payload:l})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodeUserBroadcast(e,t,n){const i=t.getUint8(1),r=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+i));l=l+i;const u=n.decode(e.slice(l,l+r));l=l+r;const h=n.decode(e.slice(l,l+o));l=l+o;const d=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,g={type:this.BROADCAST_EVENT,event:u,payload:f};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}class dg{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(je||(je={}));const Yu=(s,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((r,o)=>(r[o]=Gv(o,s,e,i),r),{}):{}},Gv=(s,e,t,n)=>{const i=e.find(a=>a.name===s),r=i==null?void 0:i.type,o=t[s];return r&&!n.includes(r)?fg(r,o):Sl(o)},fg=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Qv(e,t)}switch(s){case je.bool:return Kv(e);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return Jv(e);case je.json:case je.jsonb:return Xv(e);case je.timestamp:return Zv(e);case je.abstime:case je.date:case je.daterange:case je.int4range:case je.int8range:case je.money:case je.reltime:case je.text:case je.time:case je.timestamptz:case je.timetz:case je.tsrange:case je.tstzrange:return Sl(e);default:return Sl(e)}},Sl=s=>s,Kv=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Jv=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Xv=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Qv=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let r;const o=s.slice(1,t);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>fg(e,a))}return s},Zv=s=>typeof s=="string"?s.replace(" ","T"):s,gg=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ia{constructor(e,t,n={},i=xl){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gu;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Gu||(Gu={}));class sr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sr.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=sr.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=sr.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const r=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(r,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=r[c];if(h){const d=u.map(m=>m.presence_ref),f=h.map(m=>m.presence_ref),g=u.filter(m=>f.indexOf(m.presence_ref)<0),p=h.filter(m=>d.indexOf(m.presence_ref)<0);g.length>0&&(a[c]=g),p.length>0&&(l[c]=p)}else a[c]=u}),this.syncDiff(r,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:r,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}n(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ku;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Ku||(Ku={}));var nr;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(nr||(nr={}));var As;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(As||(As={}));class oi{constructor(e,t={config:{}},n){var i,r;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ia(this,ts.join,this.params,this.timeout),this.rejoinTimer=new dg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ts.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new sr(this),this.broadcastEndpointURL=gg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[nr.PRESENCE]&&this.bindings[nr.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(As.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(As.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(As.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,y=[];for(let b=0;b<m;b++){const v=p[b],{filter:{event:x,schema:T,table:C,filter:A}}=v,O=f&&f[b];if(O&&O.event===x&&oi.isFilterValueEqual(O.schema,T)&&oi.isFilterValueEqual(O.table,C)&&oi.isFilterValueEqual(O.filter,A))y.push(Object.assign(Object.assign({},v),{id:O.id}));else{this.unsubscribe(),this.state=ft.errored,e==null||e(As.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(As.SUBSCRIBED);return}}).receive("error",f=>{this.state=ft.errored,e==null||e(As.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(As.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===ft.joined&&e===nr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var i;if(t==null)return Promise.reject("Payload is required for httpSend()");const r={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(r.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:r,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),c.receive("ok",()=>r("ok")),c.receive("error",()=>r("error")),c.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ft.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ts.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Ia(this,ts.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(r),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ia(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>qv){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,r;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ts;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,p,m;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((m=(p=f.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var g,p,m,y,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,T=(g=f.filter)===null||g===void 0?void 0:g.event;return x&&((p=t.ids)===null||p===void 0?void 0:p.includes(x))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const x=(b=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return x==="*"||x===((v=t==null?void 0:t.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:p,table:m,commit_timestamp:y,type:b,errors:v}=g;d=Object.assign(Object.assign({},{schema:p,table:m,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(g))}f.callback(d,n)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),r={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&oi.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ts.close,{},e)}_onError(e){this._on(ts.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Yu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Yu(e.columns,e.old_record)),t}}const Na=()=>{},zr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},e_=[1e3,2e3,5e3,1e4],t_=1e4,s_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class n_{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xl,this.transport=null,this.heartbeatIntervalMs=zr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Na,this.ref=0,this.reconnectTimer=null,this.vsn=qu,this.logger=Na,this.conn=null,this.sendBuffer=[],this.serializer=new Yv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${kl.websocket}`,this.httpEndpoint=gg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case en.connecting:return On.Connecting;case en.open:return On.Open;case en.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(r=>r.topic===n);if(i)return i;{const r=new oi(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:n,payload:i,ref:r}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zv,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},zr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:r,ref:o}=t,a=o?`(${o})`:"",l=r.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),r),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,r,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===en.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===en.open||this.conn.readyState===en.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ts.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([s_],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const r={access_token:t,version:Uv};t&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(ts.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new dg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,r,o,a,l,c,u,h,d,f;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:xl,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:zr.HEARTBEAT_INTERVAL,this.worker=(r=e==null?void 0:e.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Na,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:qu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(g=>e_[g-1]||t_),this.vsn){case hg:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:((g,p)=>p(JSON.stringify(g))),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:((g,p)=>p(JSON.parse(g)));break;case Hv:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var br=class extends Error{constructor(s,e){var t;super(s),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function i_(s,e,t){const n=new URL(e,s);if(t)for(const[i,r]of Object.entries(t))r!==void 0&&n.searchParams.set(i,r);return n.toString()}async function r_(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function o_(s){const e=s.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:i,body:r,headers:o}){const a=i_(s.baseUrl,n,i),l=await r_(s.auth),c=await e(a,{method:t,headers:{...r?{"Content-Type":"application/json"}:{},...l,...o},body:r?JSON.stringify(r):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),d=h&&u?JSON.parse(u):u;if(!c.ok){const f=h?d:void 0,g=f==null?void 0:f.error;throw new br((g==null?void 0:g.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:f})}return{status:c.status,headers:c.headers,data:d}}}}function qr(s){return s.join("")}var a_=class{constructor(s,e=""){this.client=s,this.prefix=e}async listNamespaces(s){const e=s?{parent:qr(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(s,e){const t={namespace:s.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qr(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qr(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qr(s.namespace)}`}),!0}catch(e){if(e instanceof br&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(s,e){try{return await this.createNamespace(s,e)}catch(t){if(t instanceof br&&t.status===409)return;throw t}}};function Un(s){return s.join("")}var l_=class{constructor(s,e="",t){this.client=s,this.prefix=e,this.accessDelegation=t}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Un(s.namespace)}/tables`})).data.identifiers}async createTable(s,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Un(s.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(s,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Un(s.namespace)}/tables/${s.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(s,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Un(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(s){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Un(s.namespace)}/tables/${s.name}`,headers:e})).data.metadata}async tableExists(s){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Un(s.namespace)}/tables/${s.name}`,headers:e}),!0}catch(t){if(t instanceof br&&t.status===404)return!1;throw t}}async createTableIfNotExists(s,e){try{return await this.createTable(s,e)}catch(t){if(t instanceof br&&t.status===409)return await this.loadTable({namespace:s.namespace,name:e.name});throw t}}},c_=class{constructor(s){var n;let e="v1";s.catalogName&&(e+=`/${s.catalogName}`);const t=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=o_({baseUrl:t,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(n=s.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new a_(this.client,e),this.tableOps=new l_(this.client,e,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,e){return this.namespaceOps.createNamespace(s,e)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,e){return this.tableOps.createTable(s,e)}async updateTable(s,e){return this.tableOps.updateTable(s,e)}async dropTable(s,e){await this.tableOps.dropTable(s,e)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,e){return this.namespaceOps.createNamespaceIfNotExists(s,e)}async createTableIfNotExists(s,e){return this.tableOps.createTableIfNotExists(s,e)}},ca=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Ke(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var u_=class extends ca{constructor(s,e,t){super(s),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},El=class extends ca{constructor(s,e){super(s),this.name="StorageUnknownError",this.originalError=e}};const wc=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),h_=()=>Response,Tl=s=>{if(Array.isArray(s))return s.map(t=>Tl(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[i]=Tl(n)}),e},d_=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},f_=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function vr(s){"@babel/helpers - typeof";return vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(s)}function g_(s,e){if(vr(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(vr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function p_(s){var e=g_(s,"string");return vr(e)=="symbol"?e:e+""}function m_(s,e,t){return(e=p_(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Ju(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function ae(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ju(Object(t),!0).forEach(function(n){m_(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Ju(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const $a=s=>{var e;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(e=s.error)===null||e===void 0?void 0:e.message)||JSON.stringify(s)},y_=async(s,e,t)=>{s instanceof await h_()&&!(t!=null&&t.noResolveJson)?s.json().then(n=>{const i=s.status||500,r=(n==null?void 0:n.statusCode)||i+"";e(new u_($a(n),i,r))}).catch(n=>{e(new El($a(n),n))}):e(new El($a(s),s))},b_=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!n?i:(d_(n)?(i.headers=ae({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),ae(ae({},i),t))};async function Ir(s,e,t,n,i,r){return new Promise((o,a)=>{s(t,b_(e,n,i,r)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>y_(l,a,n))})}async function _r(s,e,t,n){return Ir(s,"GET",e,t,n)}async function es(s,e,t,n,i){return Ir(s,"POST",e,n,i,t)}async function Pl(s,e,t,n,i){return Ir(s,"PUT",e,n,i,t)}async function v_(s,e,t,n){return Ir(s,"HEAD",e,ae(ae({},t),{},{noResolveJson:!0}),n)}async function xc(s,e,t,n,i){return Ir(s,"DELETE",e,n,i,t)}var __=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e}then(s,e){return this.execute().then(s,e)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}}};let pg;pg=Symbol.toStringTag;var w_=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e,this[pg]="BlobDownloadBuilder",this.promise=null}asStream(){return new __(this.downloadFn,this.shouldThrowOnError)}then(s,e){return this.getPromise().then(s,e)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}}};const x_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var k_=class{constructor(s,e={},t,n){this.shouldThrowOnError=!1,this.url=s,this.headers=e,this.bucketId=t,this.fetch=wc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,e,t,n){var i=this;try{let r;const o=ae(ae({},Xu),n);let a=ae(ae({},i.headers),s==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&t instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",i.encodeMetadata(l)),r.append("",t)):typeof FormData<"u"&&t instanceof FormData?(r=t,r.has("cacheControl")||r.append("cacheControl",o.cacheControl),l&&!r.has("metadata")&&r.append("metadata",i.encodeMetadata(l))):(r=t,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&r instanceof ReadableStream||r&&typeof r=="object"&&"pipe"in r&&typeof r.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=ae(ae({},a),n.headers));const c=i._removeEmptyFolders(e),u=i._getFinalPath(c),h=await(s=="PUT"?Pl:es)(i.fetch,`${i.url}/object/${u}`,r,ae({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}}async upload(s,e,t){return this.uploadOrUpdate("POST",s,e,t)}async uploadToSignedUrl(s,e,t,n){var i=this;const r=i._removeEmptyFolders(s),o=i._getFinalPath(r),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=ae({upsert:Xu.upsert},n),u=ae(ae({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.append("cacheControl",c.cacheControl)):(l=t,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:r,fullPath:(await Pl(i.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Ke(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(s,e){var t=this;try{let n=t._getFinalPath(s);const i=ae({},t.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const r=await es(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(t.url+r.url),a=o.searchParams.get("token");if(!a)throw new ca("No token returned by API");return{data:{signedUrl:o.toString(),path:s,token:a},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async update(s,e,t){return this.uploadOrUpdate("PUT",s,e,t)}async move(s,e,t){var n=this;try{return{data:await es(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:s,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}}async copy(s,e,t){var n=this;try{return{data:{path:(await es(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:s,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}}async createSignedUrl(s,e,t){var n=this;try{let i=n._getFinalPath(s),r=await es(n.fetch,`${n.url}/object/sign/${i}`,ae({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:n.headers});const o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return r={signedUrl:encodeURI(`${n.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}}async createSignedUrls(s,e,t){var n=this;try{const i=await es(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:s},{headers:n.headers}),r=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:i.map(o=>ae(ae({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}}download(s,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=n?`?${n}`:"",r=this._getFinalPath(s),o=()=>_r(this.fetch,`${this.url}/${t}/${r}${i}`,{headers:this.headers,noResolveJson:!0});return new w_(o,this.shouldThrowOnError)}async info(s){var e=this;const t=e._getFinalPath(s);try{return{data:Tl(await _r(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async exists(s){var e=this;const t=e._getFinalPath(s);try{return await v_(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ke(n)&&n instanceof El){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(s,e){const t=this._getFinalPath(s),n=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const r=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${t}${a}`)}}}async remove(s){var e=this;try{return{data:await xc(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:s},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}async list(s,e,t){var n=this;try{const i=ae(ae(ae({},x_),e),{},{prefix:s||""});return{data:await es(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},t),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Ke(i))return{data:null,error:i};throw i}}async listV2(s,e){var t=this;try{const n=ae({},s);return{data:await es(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},e),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const e=[];return s.width&&e.push(`width=${s.width}`),s.height&&e.push(`height=${s.height}`),s.resize&&e.push(`resize=${s.resize}`),s.format&&e.push(`format=${s.format}`),s.quality&&e.push(`quality=${s.quality}`),e.join("&")}};const mg="2.89.0",yg={"X-Client-Info":`storage-js/${mg}`};var S_=class{constructor(s,e={},t,n){this.shouldThrowOnError=!1;const i=new URL(s);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=ae(ae({},yg),e),this.fetch=wc(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var e=this;try{const t=e.listBucketOptionsToQueryString(s);return{data:await _r(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}async getBucket(s){var e=this;try{return{data:await _r(e.fetch,`${e.url}/bucket/${s}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}async createBucket(s,e={public:!1}){var t=this;try{return{data:await es(t.fetch,`${t.url}/bucket`,{id:s,name:s,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async updateBucket(s,e){var t=this;try{return{data:await Pl(t.fetch,`${t.url}/bucket/${s}`,{id:s,name:s,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async emptyBucket(s){var e=this;try{return{data:await es(e.fetch,`${e.url}/bucket/${s}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}async deleteBucket(s){var e=this;try{return{data:await xc(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(s){const e={};return s&&("limit"in s&&(e.limit=String(s.limit)),"offset"in s&&(e.offset=String(s.offset)),s.search&&(e.search=s.search),s.sortColumn&&(e.sortColumn=s.sortColumn),s.sortOrder&&(e.sortOrder=s.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},E_=class{constructor(s,e={},t){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ae(ae({},yg),e),this.fetch=wc(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var e=this;try{return{data:await es(e.fetch,`${e.url}/bucket`,{name:s},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}async listBuckets(s){var e=this;try{const t=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&t.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&t.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&t.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&t.set("sortOrder",s.sortOrder),s!=null&&s.search&&t.set("search",s.search);const n=t.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await _r(e.fetch,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}async deleteBucket(s){var e=this;try{return{data:await xc(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}from(s){var e=this;if(!f_(s))throw new ca("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new c_({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(i,r){const o=i[r];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const kc={"X-Client-Info":`storage-js/${mg}`,"Content-Type":"application/json"};var bg=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function zt(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var La=class extends bg{constructor(s,e,t){super(s),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},T_=class extends bg{constructor(s,e){super(s),this.name="StorageVectorsUnknownError",this.originalError=e}};const Sc=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),P_=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Qu=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),O_=async(s,e,t)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(t!=null&&t.noResolveJson)){const n=s.status||500,i=s;if(typeof i.json=="function")i.json().then(r=>{const o=(r==null?void 0:r.statusCode)||(r==null?void 0:r.code)||n+"";e(new La(Qu(r),n,o))}).catch(()=>{const r=n+"";e(new La(i.statusText||`HTTP ${n} error`,n,r))});else{const r=n+"";e(new La(i.statusText||`HTTP ${n} error`,n,r))}}else e(new T_(Qu(s),s))},C_=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return n?(P_(n)?(i.headers=ae({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,ae(ae({},i),t)):i};async function A_(s,e,t,n,i,r){return new Promise((o,a)=>{s(t,C_(e,n,i,r)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>O_(l,a,n))})}async function qt(s,e,t,n,i){return A_(s,"POST",e,n,i,t)}var R_=class{constructor(s,e={},t){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ae(ae({},kc),e),this.fetch=Sc(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var e=this;try{return{data:await qt(e.fetch,`${e.url}/CreateIndex`,s,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async getIndex(s,e){var t=this;try{return{data:await qt(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:s,indexName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}}async listIndexes(s){var e=this;try{return{data:await qt(e.fetch,`${e.url}/ListIndexes`,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async deleteIndex(s,e){var t=this;try{return{data:await qt(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:s,indexName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}}},M_=class{constructor(s,e={},t){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ae(ae({},kc),e),this.fetch=Sc(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var e=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await qt(e.fetch,`${e.url}/PutVectors`,s,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async getVectors(s){var e=this;try{return{data:await qt(e.fetch,`${e.url}/GetVectors`,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async listVectors(s){var e=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await qt(e.fetch,`${e.url}/ListVectors`,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async queryVectors(s){var e=this;try{return{data:await qt(e.fetch,`${e.url}/QueryVectors`,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async deleteVectors(s){var e=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await qt(e.fetch,`${e.url}/DeleteVectors`,s,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}},D_=class{constructor(s,e={},t){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ae(ae({},kc),e),this.fetch=Sc(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var e=this;try{return{data:await qt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async getBucket(s){var e=this;try{return{data:await qt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:s},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async listBuckets(s={}){var e=this;try{return{data:await qt(e.fetch,`${e.url}/ListVectorBuckets`,s,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}async deleteBucket(s){var e=this;try{return{data:await qt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}},I_=class extends D_{constructor(s,e={}){super(s,e.headers||{},e.fetch)}from(s){return new N_(this.url,this.headers,s,this.fetch)}async createBucket(s){var e=()=>super.createBucket,t=this;return e().call(t,s)}async getBucket(s){var e=()=>super.getBucket,t=this;return e().call(t,s)}async listBuckets(s={}){var e=()=>super.listBuckets,t=this;return e().call(t,s)}async deleteBucket(s){var e=()=>super.deleteBucket,t=this;return e().call(t,s)}},N_=class extends R_{constructor(s,e,t,n){super(s,e,n),this.vectorBucketName=t}async createIndex(s){var e=()=>super.createIndex,t=this;return e().call(t,ae(ae({},s),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(s={}){var e=()=>super.listIndexes,t=this;return e().call(t,ae(ae({},s),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(s){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,s)}async deleteIndex(s){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,s)}index(s){return new $_(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},$_=class extends M_{constructor(s,e,t,n,i){super(s,e,i),this.vectorBucketName=t,this.indexName=n}async putVectors(s){var e=()=>super.putVectors,t=this;return e().call(t,ae(ae({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(s){var e=()=>super.getVectors,t=this;return e().call(t,ae(ae({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(s={}){var e=()=>super.listVectors,t=this;return e().call(t,ae(ae({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(s){var e=()=>super.queryVectors,t=this;return e().call(t,ae(ae({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(s){var e=()=>super.deleteVectors,t=this;return e().call(t,ae(ae({},s),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},L_=class extends S_{constructor(s,e={},t,n){super(s,e,t,n)}from(s){return new k_(this.url,this.headers,s,this.fetch)}get vectors(){return new I_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new E_(this.url+"/iceberg",this.headers,this.fetch)}};const vg="2.89.0",ii=30*1e3,Ol=3,Fa=Ol*ii,F_="http://localhost:9999",B_="supabase.auth.token",W_={"X-Client-Info":`gotrue-js/${vg}`},Cl="X-Supabase-Api-Version",_g={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},j_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V_=600*1e3;class wr extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function X(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class U_ extends wr{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function H_(s){return X(s)&&s.name==="AuthApiError"}class Cn extends wr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class zs extends wr{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class Vt extends zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function z_(s){return X(s)&&s.name==="AuthSessionMissingError"}class Hn extends zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yr extends zs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Gr extends zs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function q_(s){return X(s)&&s.name==="AuthImplicitGrantRedirectError"}class Zu extends zs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Y_ extends zs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Al extends zs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ba(s){return X(s)&&s.name==="AuthRetryableFetchError"}class eh extends zs{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Rl extends zs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Do="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),th=` 	
\r=`.split(""),G_=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<th.length;e+=1)s[th[e].charCodeAt(0)]=-2;for(let e=0;e<Do.length;e+=1)s[Do[e].charCodeAt(0)]=e;return s})();function sh(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Do[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Do[n]),e.queuedBits-=6}}function wg(s,e,t){const n=G_[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function nh(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{X_(o,n,t)};for(let o=0;o<s.length;o+=1)wg(s.charCodeAt(o),i,r);return e.join("")}function K_(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function J_(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}K_(n,e)}}function X_(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if((s>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function di(s){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)wg(s.charCodeAt(i),t,n);return new Uint8Array(e)}function Q_(s){const e=[];return J_(s,t=>e.push(t)),new Uint8Array(e)}function Rn(s){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return s.forEach(i=>sh(i,t,n)),sh(null,t,n),e.join("")}function Z_(s){return Math.round(Date.now()/1e3)+s}function ew(){return Symbol("auth-callback")}const _t=()=>typeof window<"u"&&typeof document<"u",yn={tested:!1,writable:!1},xg=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yn.tested)return yn.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),yn.tested=!0,yn.writable=!0}catch{yn.tested=!0,yn.writable=!1}return yn.writable};function tw(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,r)=>{e[r]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const kg=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),sw=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ri=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},bn=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},vt=async(s,e)=>{await s.removeItem(e)};class ua{constructor(){this.promise=new ua.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ua.promiseConstructor=Promise;function Wa(s){const e=s.split(".");if(e.length!==3)throw new Rl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!j_.test(e[n]))throw new Rl("JWT not in base64url format");return{header:JSON.parse(nh(e[0])),payload:JSON.parse(nh(e[1])),signature:di(e[2]),raw:{header:e[0],payload:e[1]}}}async function nw(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function iw(s,e){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await s(r);if(!e(r,null,o)){n(o);return}}catch(o){if(!e(r,o)){i(o);return}}})()})}function rw(s){return("0"+s.toString(16)).substr(-2)}function ow(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let r=0;r<56;r++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,rw).join("")}async function aw(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function lw(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await aw(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zn(s,e,t=!1){const n=ow();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await ri(s,`${e}-code-verifier`,i);const r=await lw(n);return[r,n===r?"plain":"s256"]}const cw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uw(s){const e=s.headers.get(Cl);if(!e||!e.match(cw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hw(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function dw(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qn(s){if(!fw.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ja(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gw(s,e){return new Proxy(s,{get:(t,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,i)}})}function ih(s){return JSON.parse(JSON.stringify(s))}const Sn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),pw=[502,503,504];async function rh(s){var e;if(!sw(s))throw new Al(Sn(s),0);if(pw.includes(s.status))throw new Al(Sn(s),s.status);let t;try{t=await s.json()}catch(r){throw new Cn(Sn(r),r)}let n;const i=uw(s);if(i&&i.getTime()>=_g["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new eh(Sn(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Vt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new eh(Sn(t),s.status,t.weak_password.reasons);throw new U_(Sn(t),s.status||500,n)}const mw=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function oe(s,e,t,n){var i;const r=Object.assign({},n==null?void 0:n.headers);r[Cl]||(r[Cl]=_g["2024-01-01"].name),n!=null&&n.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await yw(s,e,t+a,{headers:r,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function yw(s,e,t,n,i,r){const o=mw(e,n,i,r);let a;try{a=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new Al(Sn(l),0)}if(a.ok||await rh(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await rh(l)}}function Qt(s){var e;let t=null;_w(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Z_(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function oh(s){const e=Qt(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function tn(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function bw(s){return{data:s,error:null}}function vw(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r}=s,o=la(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ah(s){return s}function _w(s){return s.access_token&&s.refresh_token&&s.expires_in}const Va=["global","local","others"];class ww{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=kg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Va[0]){if(Va.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Va.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:tn})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=la(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:vw,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(X(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tn})}catch(t){if(X(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:ah});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(X(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){qn(e);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tn})}catch(t){if(X(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){qn(e);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:tn})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){qn(e);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:tn})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){qn(e.userId);try{const{data:t,error:n}=await oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(X(t))return{data:null,error:t};throw t}}async _deleteFactor(e){qn(e.userId),qn(e.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,r,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:ah});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(g.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(X(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(X(t))return{data:null,error:t};throw t}}}function lh(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}const Yn={debug:!!(globalThis&&xg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xw extends Sg{}async function kw(s,e,t){Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new xw(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Yn.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Sw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Eg(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Ew(s){return parseInt(s,16)}function Tw(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Pw(s){var e;const{chainId:t,domain:n,expirationTime:i,issuedAt:r=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:d}=s;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const f=Eg(s.address),g=u?`${u}://${n}`:n,p=s.statement?`${s.statement}
`:"",m=`${g} wants you to sign in with your Ethereum account:
${f}

${p}`;let y=`URI: ${h}
Version: ${d}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${r.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);b+=`
- ${v}`}y+=b}return`${m}
${y}`}class ct extends Error{constructor({message:e,code:t,cause:n,name:i}){var r;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(r=i??(n instanceof Error?n.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=t}}class Io extends ct{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ow({error:s,options:e}){var t,n,i;const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((t=r.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((n=r.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((i=r.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new ct({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return r.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(Tg(o)){if(r.rp.id!==o)return new ct({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Cw({error:s,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new ct({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const n=window.location.hostname;if(Tg(n)){if(t.rpId!==n)return new ct({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Aw{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Rw=new Aw;function Mw(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:t,excludeCredentials:n}=s,i=la(s,["challenge","user","excludeCredentials"]),r=di(e).buffer,o=Object.assign(Object.assign({},t),{id:di(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:r,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:di(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Dw(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:t}=s,n=la(s,["challenge","allowCredentials"]),i=di(e).buffer,r=Object.assign(Object.assign({},n),{challenge:i});if(t&&t.length>0){r.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];r.allowCredentials[o]=Object.assign(Object.assign({},a),{id:di(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return r}function Iw(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s;return{id:s.id,rawId:s.id,response:{attestationObject:Rn(new Uint8Array(s.response.attestationObject)),clientDataJSON:Rn(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Nw(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s,n=s.getClientExtensionResults(),i=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Rn(new Uint8Array(i.authenticatorData)),clientDataJSON:Rn(new Uint8Array(i.clientDataJSON)),signature:Rn(new Uint8Array(i.signature)),userHandle:i.userHandle?Rn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Tg(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function ch(){var s,e;return!!(_t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $w(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",e)}:{data:null,error:new Io("Empty credential response",e)}}catch(e){return{data:null,error:Ow({error:e,options:s})}}}async function Lw(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Io("Browser returned unexpected credential type",e)}:{data:null,error:new Io("Empty credential response",e)}}catch(e){return{data:null,error:Cw({error:e,options:s})}}}const Fw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Bw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function No(...s){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of s)if(i)for(const r in i){const o=i[r];if(o!==void 0)if(Array.isArray(o))n[r]=o;else if(t(o))n[r]=o;else if(e(o)){const a=n[r];e(a)?n[r]=No(a,o):n[r]=No(o)}else n[r]=o}return n}function Ww(s,e){return No(Fw,s,e||{})}function jw(s,e){return No(Bw,s,e||{})}class Vw{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:i},r){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=i??Rw.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Ww(o.webauthn.credential_options.publicKey,r==null?void 0:r.create),{data:u,error:h}=await $w({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=jw(o.webauthn.credential_options.publicKey,r==null?void 0:r.request),{data:u,error:h}=await Lw(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new Cn("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!t)return{data:null,error:new wr("rpId is required for WebAuthn authentication")};try{if(!ch())return{data:null,error:new Cn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:i},{request:r});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new Cn("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!t)return{data:null,error:new wr("rpId is required for WebAuthn registration")};try{if(!ch())return{data:null,error:new Cn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:i},{create:r});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return X(o)?{data:null,error:o}:{data:null,error:new Cn("Unexpected error in register",o)}}}}Sw();const Uw={url:F_,storageKey:B_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function uh(s,e,t){return await t()}const Gn={};class xr{get jwks(){var e,t;return(t=(e=Gn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Gn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gn[this.storageKey]=Object.assign(Object.assign({},Gn[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},Uw),e);if(this.storageKey=r.storageKey,this.instanceID=(t=xr.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,xr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.instanceID>0&&_t()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new ww({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=kg(r.fetch),this.lock=r.lock||uh,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,r.lock?this.lock=r.lock:this.persistSession&&_t()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=kw:this.lock=uh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Vw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:xg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lh(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=lh(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vg}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(_t()&&(t=tw(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),_t()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),q_(r)){const l=(e=r.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return X(t)?this._returnResult({error:t}):this._returnResult({error:new Cn("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const r=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Qt}),{data:o,error:a}=r;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(e){var t,n,i;try{let r;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await zn(this.storage,this.storageKey)),r=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:Qt})}else if("phone"in e){const{phone:u,password:h,options:d}=e;r=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Qt})}else throw new Yr("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return await vt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(await vt(this.storage,`${this.storageKey}-code-verifier`),X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:o,options:a}=e;t=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:oh})}else if("phone"in e){const{phone:r,password:o,options:a}=e;t=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:oh})}else throw new Yr("You must provide either an email or phone number and a password");const{data:n,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const r=new Hn;return this._returnResult({data:{user:null,session:null},error:r})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(X(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,i,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,i,r,o,a,l,c,u,h,d;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:p,wallet:m,statement:y,options:b}=e;let v;if(_t())if(typeof m=="object")v=m;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")v=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=m}const x=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href),T=await v.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=Eg(T[0]);let A=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!A){const L=await v.request({method:"eth_chainId"});A=Ew(L)}const O={domain:x.host,address:C,statement:y,uri:x.href,version:"1",chainId:A,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=Pw(O),g=await v.request({method:"personal_sign",params:[Tw(f),C]})}try{const{data:p,error:m}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Qt});if(m)throw m;if(!p||!p.session||!p.user){const y=new Hn;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:m})}catch(p){if(X(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,n,i,r,o,a,l,c,u,h,d,f;let g,p;if("message"in e)g=e.message,p=e.signature;else{const{chain:m,wallet:y,statement:b,options:v}=e;let x;if(_t())if(typeof y=="object")x=y;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=y}const T=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),b?{statement:b}:null));let A;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")A=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)A=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)g=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),p=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${T.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=v==null?void 0:v.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(g),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=C}}try{const{data:m,error:y}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Rn(p)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Qt});if(y)throw y;if(!m||!m.session||!m.user){const b=new Hn;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:y})}catch(m){if(X(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await bn(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new Y_;const{data:r,error:o}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Qt});if(await vt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!r||!r.session||!r.user){const a=new Hn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(await vt(this.storage,`${this.storageKey}-code-verifier`),X(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:r,nonce:o}=e,a=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Qt}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Hn;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(t){if(X(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,i,r,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await zn(this.storage,this.storageKey));const{error:h}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Yr("You must provide either an email or phone number.")}catch(a){if(await vt(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,n;try{let i,r;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:Qt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(X(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,n,i,r,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await zn(this.storage,this.storageKey));const c=await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:bw});return!((r=c.data)===null||r===void 0)&&r.url&&_t()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await vt(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Vt;const{error:i}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(X(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:r}=e,{error:o}=await oe(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:r}=e,{data:o,error:a}=await oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Yr("You must provide either an email or phone number and a type")}catch(t){if(X(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await bn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Fa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await bn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=ja()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=gw(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tn}):await this._useSession(async t=>{var n,i,r;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vt}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:tn})})}catch(t){if(X(t))return z_(t)&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new Vt;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await zn(this.storage,this.storageKey));const{data:c,error:u}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:tn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await vt(this.storage,`${this.storageKey}-code-verifier`),X(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vt;const t=Date.now()/1e3;let n=t,i=!0,r=null;const{payload:o}=Wa(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;r={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(t){if(X(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Vt;const{data:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(X(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!_t())throw new Gr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Gr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Zu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zu("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!r||!a||!o||!c)throw new Gr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;l&&(d=parseInt(l));const f=d-u;f*1e3<=ii&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=d-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,d,u);const{data:p,error:m}=await this._getUser(r);if(m)throw m;const y={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(n){if(X(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await bn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return this._returnResult({error:r});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(H_(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=ew(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:r},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await zn(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(await vt(this.storage,`${this.storageKey}-code-verifier`),X(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,l,c,u;const{data:h,error:d}=r;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return _t()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(X(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:r}}=t;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=r==null?void 0:r.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Qt}),{data:d,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new Hn}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:f}))}catch(i){if(await vt(this.storage,`${this.storageKey}-code-verifier`),X(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:o}=t;if(o)throw o;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await iw(async i=>(i>0&&await nw(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qt})),(i,r)=>{const o=200*Math.pow(2,i);return r&&Ba(r)&&Date.now()+o-n<ii})}catch(n){if(this._debug(t,"error",n),X(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),_t()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await bn(this.storage,this.storageKey);if(i&&this.userStorage){let o=await bn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await ri(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:ja()}else if(i&&!i.user&&!i.user){const o=await bn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await vt(this.storage,this.storageKey+"-user"),await ri(this.storage,this.storageKey,i)):i.user=ja()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Fa;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${Fa}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Ba(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Vt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ua;const{data:r,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new Vt;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={data:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),X(r)){const o={data:null,error:r};return Ba(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await vt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await ri(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const r=ih(i);await ri(this.storage,this.storageKey,r)}else{const i=ih(t);await ri(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await vt(this.storage,this.storageKey),await vt(this.storage,this.storageKey+"-code-verifier"),await vt(this.storage,this.storageKey+"-user"),this.userStorage&&await vt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ii);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/ii);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ii}ms, refresh threshold is ${Ol} ticks`),i<=Ol&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Sg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await zn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;return r?this._returnResult({data:null,error:r}):await oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return this._returnResult({data:null,error:r});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Iw(e.webauthn.credential_response):Nw(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return this._returnResult({data:null,error:r});const o=await oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Mw(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Dw(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const r of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(r),r.status==="verified"&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=Wa(n.access_token);let o=null;r.aal&&(o=r.aal);let a=o;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const c=r.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new Vt});const o=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&_t()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new Vt});const o=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&_t()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(e){if(X(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?(await oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Vt})})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+V_>i)return n;const{data:r,error:o}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,n=r.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return this._returnResult({data:null,error:g});n=f.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:l}}=Wa(n);t!=null&&t.allowExpired||hw(r.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:r,header:i,signature:o},error:null}}const u=dw(i.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Q_(`${a}.${l}`)))throw new Rl("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}}xr.nextInstanceID={};const Hw=xr,zw="2.89.0";let Bi="";typeof Deno<"u"?Bi="deno":typeof document<"u"?Bi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bi="react-native":Bi="node";const qw={"X-Client-Info":`supabase-js-${Bi}/${zw}`},Yw={headers:qw},Gw={schema:"public"},Kw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jw={};function kr(s){"@babel/helpers - typeof";return kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(s)}function Xw(s,e){if(kr(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e);if(kr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function Qw(s){var e=Xw(s,"string");return kr(e)=="symbol"?e:e+""}function Zw(s,e,t){return(e=Qw(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function hh(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),t.push.apply(t,n)}return t}function Ze(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hh(Object(t),!0).forEach(function(n){Zw(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):hh(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}const e0=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),t0=()=>Headers,s0=(s,e,t)=>{const n=e0(t),i=t0();return async(r,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:s;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(r,Ze(Ze({},o),{},{headers:c}))}};function n0(s){return s.endsWith("/")?s:s+"/"}function i0(s,e){var t,n;const{db:i,auth:r,realtime:o,global:a}=s,{db:l,auth:c,realtime:u,global:h}=e,d={db:Ze(Ze({},l),i),auth:Ze(Ze({},c),r),realtime:Ze(Ze({},u),o),storage:{},global:Ze(Ze(Ze({},h),a),{},{headers:Ze(Ze({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}function r0(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var o0=class extends Hw{constructor(s){super(s)}},a0=class{constructor(s,e,t){var n,i;this.supabaseUrl=s,this.supabaseKey=e;const r=r0(s);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",r),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",r),this.storageUrl=new URL("storage/v1",r),this.functionsUrl=new URL("functions/v1",r);const o=`sb-${r.hostname.split(".")[0]}-auth-token`,a={db:Gw,realtime:Jw,auth:Ze(Ze({},Kw),{},{storageKey:o}),global:Yw},l=i0(t??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=s0(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Ze({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new Wv(new URL("rest/v1",r).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new L_(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Nv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,e,t)}channel(s,e={config:{}}){return this.realtime.channel(s,e)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,e,t;if(s.accessToken)return await s.accessToken();const{data:n}=await s.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:i,storageKey:r,flowType:o,lock:a,debug:l,throwOnError:c},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o0({url:this.authUrl.href,headers:Ze(Ze({},d),u),storageKey:r,autoRefreshToken:s,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new n_(this.realtimeUrl.href,Ze(Ze({},s),{},{params:Ze(Ze({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,e)=>{this._handleTokenChanged(s,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(s,e,t){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const l0=(s,e,t)=>new a0(s,e,t);function c0(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}c0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const u0="https://gkyqqlkxpfskmtryfmyp.supabase.co",h0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdreXFxbGt4cGZza210cnlmbXlwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEwOTEwNzEsImV4cCI6MjA3NjY2NzA3MX0.RN1Ph6dwPV_0wJuhb0SuXP0Rpd_35a2C7efdzwzbfH8",ie=l0(u0,h0),d0={class:"backBar"},f0=ne({__name:"TopBar",setup(s){I(!1);const e=Wt(),t=vc();function n(){return t.name==="Home"||t.name==="Stats"||t.name==="Exercises"||t.name==="Upload"?!1:window.history.length>1}function i(){e.push({name:"Settings"})}return(r,o)=>(P(),$("div",d0,[n()?(P(),$("button",{key:0,class:"backButton clickable",onClick:o[0]||(o[0]=a=>Te(e).back())},[...o[2]||(o[2]=[k("i",{class:"fa-solid fa-chevron-left"},null,-1)])])):K("",!0),k("h3",null,se(Te(t).name),1),!n()&&Te(t).name!=="Sign In"&&Te(t).name!=="Sign Up"?(P(),$("button",{key:1,class:"iconButton clickable signOutButton",onClick:o[1]||(o[1]=a=>i())},[...o[3]||(o[3]=[k("i",{class:"fa-solid fa-gear"},null,-1)])])):K("",!0)]))}}),g0=ue(f0,[["__scopeId","data-v-e80fffa3"]]),p0={key:1,class:"spacer",style:{height:"70px"}},m0=ne({__name:"App",setup(s){function e(){return t.name==="Home"||t.name==="Stats"||t.name==="Exercises"||t.name==="Upload"?!1:window.history.length>1}I("/home"),Wt();const t=vc();async function n(){t.name==="SignIn"||t.name}return n(),(i,r)=>(P(),$(_e,null,[Te(t).name!=="landing"?(P(),ke(g0,{key:0})):K("",!0),Te(t).name!=="landing"?(P(),$("div",p0)):K("",!0),W(Te(cg)),!e()&&Te(t).name!=="landing"?(P(),ke(Rv,{key:2,active:Te(t).name||""},null,8,["active"])):K("",!0)],64))}}),y0={key:0,class:"bubbleError"},b0=ne({__name:"ErrorBubble",props:["errorMsg"],setup(s){return(e,t)=>s.errorMsg?(P(),$("div",y0,[t[0]||(t[0]=k("i",{class:"fa-solid fa-circle-exclamation"},null,-1)),k("p",null,se(s.errorMsg),1)])):K("",!0)}}),Pg=ue(b0,[["__scopeId","data-v-ec389251"]]),v0={},_0={class:"loading"};function w0(s,e){return P(),$("div",_0,[...e[0]||(e[0]=[k("i",{class:"fa-solid fa-spinner"},null,-1)])])}const fn=ue(v0,[["render",w0],["__scopeId","data-v-72d81299"]]),x0=["disabled"],k0=ne({__name:"BubbleButton",props:{label:{},loading:{type:Boolean},red:{type:Boolean},fullWidth:{type:Boolean}},emits:["click"],setup(s,{emit:e}){const t=s,n=e;return(i,r)=>(P(),$("button",{class:at(["bubbleButton","clickable",{red:t.red},{fullWidth:t.fullWidth}]),disabled:s.loading,onClick:r[0]||(r[0]=o=>n("click"))},[fc(i.$slots,"default",{},void 0),ve(" "+se(s.label||""),1)],10,x0))}}),Tt=ue(k0,[["__scopeId","data-v-0a902d4f"]]),S0={class:"popupOverlay"},E0={key:0,class:"fa-solid fa-triangle-exclamation",style:{color:"var(--errorBorder)","margin-right":"10px"}},T0={class:"buttonContainer"},P0=ne({__name:"OptionPopup",props:{title:{},message:{},confirmText:{},confirmRed:{type:Boolean},cancelText:{},cancelRed:{type:Boolean},error:{type:Boolean}},emits:["confirm","cancel"],setup(s,{emit:e}){return(t,n)=>(P(),$("div",S0,[k("div",{class:at(["popupContainer softBubble marginsWidth",{error:s.error}])},[k("h2",null,[s.error?(P(),$("i",E0)):K("",!0),ve(" "+se(s.title),1)]),k("p",null,[ve(se(s.message)+" ",1),fc(t.$slots,"default",{},void 0)]),k("div",T0,[W(Tt,{label:s.confirmText,red:s.confirmRed||!1||s.error||!1,loading:!1,onClick:n[0]||(n[0]=i=>t.$emit("confirm"))},null,8,["label","red"]),s.cancelText?(P(),ke(Tt,{key:0,label:s.cancelText,red:s.cancelRed||!1,loading:!1,onClick:n[1]||(n[1]=i=>t.$emit("cancel"))},null,8,["label","red"])):K("",!0)])],2)]))}}),qs=ue(P0,[["__scopeId","data-v-9bb5e498"]]),Nr=ne({__name:"ErrorPopup",props:{error:{},notRed:{type:Boolean}},emits:["close"],setup(s){return(e,t)=>s.error.shouldDisplay()?(P(),ke(qs,{key:0,title:s.error.getTitle(),message:s.error.getMessage(),confirmText:"OK",error:!s.notRed,onConfirm:t[0]||(t[0]=n=>s.error.clearError())},null,8,["title","message","error"])):K("",!0)}});class Si{constructor(){S(this,"title");S(this,"message");S(this,"display");this.title="",this.message="",this.display=!1}setError(e,t){this.title=e,this.message=t,this.display=!0}clearError(){this.title="",this.message="",this.display=!1}getTitle(){return this.title}getMessage(){return this.message}shouldDisplay(){return this.display}}const O0={class:"margins"},C0={key:0},A0=ne({__name:"SignInView",props:{message:{}},setup(s){const e=s,t=Wt(),n=I(""),i=I(""),r=I([]),o=f=>{f&&!r.value.includes(f)&&r.value.push(f)};function a(f){f<r.value.length-1?r.value[f+1].focus():d()}const l=I(null),c=I(!1),u=I(!1),h=I(new Si);async function d(){try{c.value=!0,l.value=null,u.value=!1;const{data:f,error:g}=await ie.auth.signInWithPassword({email:n.value,password:i.value});if(g)throw g;u.value=!0,t.push({name:"Home"})}catch(f){l.value=f.message||"Failed to sign in. Please check your credentials."}finally{c.value=!1}}return ht(()=>{if(e.message==="signedout"){h.value.setError("Signed Out","You have been signed out successfully.");return}if(e.message!==void 0&&e.message.startsWith("emailconfirmed")){h.value.setError("Email Confirmed","Your email has been confirmed. You can now sign in.");return}}),(f,g)=>(P(),$(_e,null,[W(Nr,{error:h.value,notRed:""},null,8,["error"]),c.value?(P(),ke(fn,{key:0})):K("",!0),k("div",O0,[g[6]||(g[6]=k("h2",null,"Sign In",-1)),g[7]||(g[7]=k("h3",null,"Email",-1)),mt(k("input",{ref:o,onKeyup:g[0]||(g[0]=er(p=>a(0),["enter"])),"onUpdate:modelValue":g[1]||(g[1]=p=>n.value=p),type:"email",placeholder:"example@example.com"},null,544),[[yt,n.value]]),g[8]||(g[8]=k("h3",null,"Password",-1)),mt(k("input",{ref:o,onKeyup:g[2]||(g[2]=er(p=>a(1),["enter"])),"onUpdate:modelValue":g[3]||(g[3]=p=>i.value=p),type:"password",placeholder:"password..."},null,544),[[yt,i.value]]),W(Tt,{loading:c.value,label:"Sign In",onClick:g[4]||(g[4]=p=>d())},null,8,["loading"]),k("p",null,[W(Te(vi),{to:{name:"Sign Up"}},{default:nt(()=>[...g[5]||(g[5]=[ve("Don't have an account? Sign Up",-1)])]),_:1})]),W(Pg,{errorMsg:l.value},null,8,["errorMsg"]),u.value?(P(),$("div",C0,"You are now signed in.")):K("",!0)])],64))}}),dh=ue(A0,[["__scopeId","data-v-58089229"]]),R0={class:"margins"},M0=ne({__name:"SignUpView",props:{email:{}},setup(s){const e=s,t=Wt(),n=I(""),i=I(""),r=I(""),o=I(!1),a=I(""),l=I([]),c=d=>{d&&!l.value.includes(d)&&l.value.push(d)};function u(d){d<l.value.length-1?l.value[d+1].focus():h()}ht(()=>{e.email&&(i.value=e.email)});async function h(){try{o.value=!0;const{error:d}=await ie.auth.signUp({email:i.value,password:r.value,options:{data:{display_name:n.value,emailRedirectTo:"https://paperweight.olihef.com/email-confirmed"}}});if(d)throw d;t.push({name:"Email Confirmation"})}catch(d){a.value=d.message}finally{o.value=!1}}return(d,f)=>(P(),$(_e,null,[o.value?(P(),ke(fn,{key:0})):K("",!0),k("div",R0,[f[8]||(f[8]=k("h2",null,"Sign Up",-1)),f[9]||(f[9]=k("h3",null,"Email",-1)),mt(k("input",{"onUpdate:modelValue":f[0]||(f[0]=g=>i.value=g),ref:c,onKeyup:f[1]||(f[1]=er(g=>u(0),["enter"])),type:"email",placeholder:"Enter your email."},null,544),[[yt,i.value]]),f[10]||(f[10]=k("h3",null,"Display name",-1)),mt(k("input",{"onUpdate:modelValue":f[2]||(f[2]=g=>n.value=g),ref:c,onKeyup:f[3]||(f[3]=er(g=>u(1),["enter"])),type:"text",placeholder:"Enter your display name."},null,544),[[yt,n.value]]),f[11]||(f[11]=k("h3",null,"Password",-1)),mt(k("input",{"onUpdate:modelValue":f[4]||(f[4]=g=>r.value=g),ref:c,onKeyup:f[5]||(f[5]=er(g=>u(2),["enter"])),type:"password",placeholder:"Enter the password you would like to use."},null,544),[[yt,r.value]]),W(Tt,{loading:o.value,label:"Sign Up",onClick:f[6]||(f[6]=g=>h())},null,8,["loading"]),W(Pg,{errorMsg:a.value},null,8,["errorMsg"]),f[12]||(f[12]=k("br",null,null,-1)),f[13]||(f[13]=k("br",null,null,-1)),W(Te(vi),{to:{name:"Sign In"}},{default:nt(()=>[...f[7]||(f[7]=[ve("Already have an account? Sign in here.",-1)])]),_:1})])],64))}}),D0=ue(M0,[["__scopeId","data-v-27739e17"]]),I0={},N0={class:"cont"};function $0(s,e){return P(),$("div",N0,[...e[0]||(e[0]=[k("i",{class:"fa-solid fa-envelope"},null,-1),k("h1",null,"Please check your email to finalise your account.",-1),k("h3",null,"Follow the link, then login using your email and password.",-1)])])}const L0=ue(I0,[["render",$0],["__scopeId","data-v-ab9688cb"]]),F0={},B0={class:"splash-view"};function W0(s,e){return P(),$("div",B0,[...e[0]||(e[0]=[By('<div class="gradient" data-v-bb41ba4d></div><div class="logo" data-v-bb41ba4d><span class="part left" data-v-bb41ba4d><span class="text" data-v-bb41ba4d>Paper</span></span><span class="w" data-v-bb41ba4d>W</span><span class="part right" data-v-bb41ba4d><span class="text" data-v-bb41ba4d>eight</span></span></div>',2)])])}const Og=ue(F0,[["render",W0],["__scopeId","data-v-bb41ba4d"]]),j0={key:0,class:"item"},Kn=ne({__name:"ThumbnailItem",props:{icon:{},label:{}},setup(s){return(e,t)=>s.label?(P(),$("div",j0,[s.icon?(P(),$("i",{key:0,class:at(s.icon)},null,2)):K("",!0),ve(" "+se(s.label),1)])):K("",!0)}}),V0=ne({__name:"IconButton",props:{icon:{}},emits:["click"],setup(s,{emit:e}){return(t,n)=>(P(),$("button",{onClick:n[0]||(n[0]=i=>t.$emit("click")),class:"icon-button"},[k("i",{class:at(s.icon)},null,2)]))}}),U0=ue(V0,[["__scopeId","data-v-667d6651"]]),H0=ne({__name:"DeleteWorkoutModal",props:{workout:{},visible:{type:Boolean}},emits:["confirm","cancel"],setup(s){return(e,t)=>s.visible?(P(),ke(qs,{key:0,title:`Delete Workout: ${s.workout.getTitle()}`,message:"Are you sure you want to delete this workout? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmRed:!0,onConfirm:t[0]||(t[0]=n=>e.$emit("confirm")),onCancel:t[1]||(t[1]=n=>e.$emit("cancel"))},null,8,["title"])):K("",!0)}}),z0={class:"thumbnail"},q0={class:"greyed"},Y0={class:"items"},G0={id:"deleteContainer"},K0=ne({__name:"WorkoutThumbnail",props:["workout"],emits:["reload"],setup(s,{emit:e}){Wt();const t=s,n=e,i=I(!1),r=I(!1);async function o(){i.value=!0,await t.workout.deleteWorkout(),setTimeout(()=>{n("reload"),i.value=!1},500)}return(a,l)=>{const c=ay("RouterLink");return P(),$(_e,null,[i.value?(P(),ke(fn,{key:0})):K("",!0),W(H0,{visible:r.value,workout:s.workout,onConfirm:l[0]||(l[0]=u=>{o(),r.value=!1}),onCancel:l[1]||(l[1]=u=>r.value=!1)},null,8,["visible","workout"]),k("div",z0,[W(c,{class:"link",to:{name:"View Workout",params:{workout_id:s.workout.getId()}}},{default:nt(()=>[k("h3",null,[ve(se(s.workout.getTitle())+" ",1),k("span",q0,se(s.workout.getDateString()),1)])]),_:1},8,["to"]),k("div",Y0,[W(Kn,{icon:"fa-solid fa-dumbbell",label:s.workout.getVolumeString()},null,8,["label"]),W(Kn,{icon:"fa-solid fa-clock",label:s.workout.getDurationString()},null,8,["label"]),W(Kn,{icon:"fa-solid fa-list",label:s.workout.countSetsString()},null,8,["label"]),W(Kn,{icon:"fa-solid fa-fire",label:s.workout.getEnergyString()},null,8,["label"]),W(Kn,{icon:"fa-solid fa-heart",label:s.workout.getHeartRateString()},null,8,["label"]),W(Kn,{icon:"fa-solid fa-medal",label:s.workout.getPBCountString()},null,8,["label"])]),k("div",G0,[W(U0,{icon:"fa-solid fa-trash",onClick:l[2]||(l[2]=u=>r.value=!0)})])])],64)}}}),Cg=ue(K0,[["__scopeId","data-v-376d040d"]]),J0={},X0={class:"container"};function Q0(s,e){return P(),$("div",X0,[...e[0]||(e[0]=[k("i",{class:"fas fa-dumbbell fa-8x"},null,-1),k("h2",null,"No Workouts Found",-1),k("h3",null,"Start by uploading your first workout in the upload page.",-1)])])}const Z0=ue(J0,[["render",Q0],["__scopeId","data-v-56405e8b"]]);let Wi=class ji{constructor(e,t){S(this,"reps",0);S(this,"weight",0);S(this,"notes","");S(this,"id",null);S(this,"exercise");S(this,"workout_id",null);S(this,"isWeightPB",!1);S(this,"isVolumePB",!1);this.exercise=t,this.reps=e.reps||0,this.weight=e.weight||0,this.notes=e.notes||"",this.id=e.id||null,this.workout_id=e.workout_id||null}static async create(e,t){var n;if(e.id){const{data:i,error:r}=await ie.from("sets").select("*").eq("id",e.id).single();return r?(e.id=null,new ji(e,t)):new ji(i,t)}return e.workout_id?new ji(e,t):(e.workout_id=t&&((n=t.getWorkout())==null?void 0:n.getId())||null,new ji(e,t))}async initialDBCheck(){this.id!==null&&await this.getFromDB(),this.createNewId()}async getFromDB(){if(this.id===null)return null;const{data:e,error:t}=await ie.from("sets").select("*").eq("id",this.id).single();if(t)throw new Error(`Failed to fetch set from DB: ${t.message}`);return this.reps=e.reps,this.weight=e.weight,this.notes=e.notes,e}async deleteFromDB(){if(this.id===null)return;const{error:e}=await ie.from("sets").delete().eq("id",this.id);if(e)throw new Error(`Failed to delete set from DB: ${e.message}`)}async waitForExercise(){for(;this.exercise===null;)await new Promise(e=>setTimeout(e,50))}async getExercise(){if(await this.waitForExercise(),this.exercise===null)throw new Error("Exercise is not set for this Set.");return this.exercise}async createNewId(){if(await this.waitForExercise(),this.exercise===null)throw new Error("Cannot create set without associated exercise.");const e=await this.exercise.getWorkoutId(),t=await this.exercise.createNewIdIfNeeded(),{data:n,error:i}=await ie.from("sets").insert({exercise_id:t,workout_id:e,reps:this.reps,weight:this.weight,notes:this.notes}).select("id").single();if(i)throw new Error(`Failed to create new set ID: ${i.message}`);return this.id=n.id,this.id}async updateDB(){if(this.id===null){await this.createNewId();return}const{error:e}=await ie.from("sets").update({reps:this.reps,weight:this.weight,notes:this.notes,exercise_id:this.exercise?await this.exercise.getId():""}).eq("id",this.id);if(e)throw console.log("yo"),new Error(`Failed to update set in DB: ${e.message}`);await this.getExercise()}deserialize(){return{id:this.id}}getReps(){return this.reps}getWeight(){return this.weight}getNotes(){return this.notes}setReps(e){this.reps=e}setWeight(e){this.weight=e}setNotes(e){this.notes=e}setWeightPB(){this.isWeightPB=!0}setVolumePB(){this.isVolumePB=!0}isItWeightPB(){return this.isWeightPB}isItVolumePB(){return this.isVolumePB}getPBString(){return this.isItWeightPB()&&this.isItVolumePB()?"w&v":this.isItWeightPB()?"weight":this.isItVolumePB()?"volume":""}setExercise(e){var i;const t=((i=e.getWorkout())==null?void 0:i.getId())||null,n=this.exercise!==e||this.workout_id!==t;this.exercise=e,this.workout_id=t,n&&this.updateDB()}setExerciseWithoutUpdate(e){var n;const t=((n=e.getWorkout())==null?void 0:n.getId())||null;this.exercise=e,this.workout_id=t}getId(){return this.id}getWorkoutId(){return this.workout_id}getVolume(){return this.reps*this.weight}};class fi{constructor(e,t,n=[]){S(this,"name");S(this,"sets");S(this,"notes");S(this,"workout");S(this,"id");this.name=e.exercise,this.workout=t,this.notes=e.notes,this.id=e.id;for(const i of n)i.setExercise(this);this.sets=n,this.getId()}static async create(e,t){const n=[];for(const i of e.sets){const r=await Wi.create(i,null);n.push(r)}return new fi(e,t,n)}static createFromFullExercise(e){const t=e.sets.map(i=>new Wi(i,null)),n=new fi(e,null,t);for(const i of t)i.setExerciseWithoutUpdate(n);return n}async getId(){if(this.id)return this.id;const{data:e,error:t}=await ie.from("exercises").select().eq("name",this.name.toLowerCase());if(t)throw new Error(`Failed to fetch exercise ID: ${t.message}`);return e===null||e.length===0?await this.createNewIdIfNeeded():(this.id=e[0].id,this.name=e[0].name,this.id)}async createNewIdIfNeeded(){var n;const{data:e,error:t}=await ie.from("exercises").select().eq("name",this.name.toLowerCase());if(t)throw new Error(`Failed to fetch exercise ID: ${t.message}`);return e===null||e.length===0?await this.createNewId():(this.id=e[0].id,this.name=e[0].name,(n=this.workout)==null||n.changeMade(),this.id)}async createNewId(){const{data:{user:e}}=await ie.auth.getUser(),{data:t,error:n}=await ie.from("exercises").insert([{name:this.name.toLowerCase()}]).select("id").single();if(n)throw console.error(n),new Error(`Failed to create new exercise ID: ${n.message}`);return this.id=t.id,this.id}deserialize(){return{exercise:this.name,sets:this.sets.map(e=>e.deserialize()),notes:this.notes,id:this.id}}async addNewSet(){if(console.log("sets length: "+this.sets.length),console.log("153"),this.sets.length===0){console.log("155");const n=null,i=new Wi({reps:0,weight:0,unit:"kg",notes:"",id:n},this);this.sets.push(i),await i.createNewId(),this.workout&&this.workout.changeMade();return}console.log("163");const e=this.sets[this.sets.length-1],t=new Wi({reps:e.getReps(),weight:e.getWeight(),unit:"kg",notes:e.getNotes(),id:null},this);this.sets.push(t),await t.createNewId(),console.log("174"),console.log("sets length after add: "+this.sets.length),this.workout&&(console.log("177"),this.workout.changeMade())}removeSet(e){if(e<0||e>=this.sets.length)throw new Error("Index out of bounds");const t=this.sets[e];this.sets.splice(e,1),t.deleteFromDB(),this.workout&&this.workout.changeMade(),ie.from("sets").delete().eq("id",t.getId())}removeAllSets(){for(let e=0;e<this.sets.length;e++)this.removeSet(0)}removeFromWorkout(){if(!this.workout)return;const e=this.workout.getExercises().indexOf(this);if(e===-1)throw new Error("Exercise not found in workout");this.workout.removeExercise(e)}updateSet(e,t){if(e<0||e>=this.sets.length)throw new Error("Index out of bounds");const n=this.sets[e];n.setReps(t.reps||0),n.setWeight(t.weight||0),n.setNotes(t.notes||""),this.workout&&this.workout.changeMade()}async setName(e){this.name=e,await this.createNewIdIfNeeded();for(const t of this.sets)t.setExercise(this);this.workout&&this.workout.changeMade()}setWorkout(e){this.workout=e;for(const t of this.sets)t.setExerciseWithoutUpdate(this),t.updateDB()}setWorkoutWithoutUpdate(e){this.workout=e;for(const t of this.sets)t.setExerciseWithoutUpdate(this)}setNotes(e){this.notes=e,this.workout&&this.workout.changeMade()}reorderUp(){if(!this.workout)return;const e=this.workout.getExercises(),t=e.indexOf(this);t<=0||([e[t-1],e[t]]=[e[t],e[t-1]],this.workout.setExercises(e))}reorderDown(){if(!this.workout)return;const e=this.workout.getExercises(),t=e.indexOf(this);t===-1||t>=e.length-1||([e[t+1],e[t]]=[e[t],e[t+1]],this.workout.setExercises(e))}getVolume(){let e=0;for(const t of this.sets){let n=t.getReps()*t.getWeight();e+=n}return e}getSets(){return this.sets}countSets(){return this.sets.length}getName(){return this.name}getNotes(){return this.notes}async waitForWorkout(){for(;!this.workout;)await new Promise(e=>setTimeout(e,50))}async getWorkoutId(){return await this.waitForWorkout(),this.workout?this.workout.getId():""}getWorkout(){return this.workout}countPBSets(){let e=0;for(const t of this.sets)t.isItWeightPB()&&e++;return e}}class xe{static addPeriod(e,t,n){const i=new Date(e);switch(t){case"day":i.setDate(i.getDate()+n);break;case"week":i.setDate(i.getDate()+n*7);break;case"month":i.setMonth(i.getMonth()+n);break;case"year":i.setFullYear(i.getFullYear()+n);break}return i}static getStartOfTerm(e,t){switch(t){case"month":const n=new Date;return n.setMonth(n.getMonth()-e),xe.getStartOfMonth(n);case"year":const i=new Date;return i.setFullYear(i.getFullYear()-e),xe.getStartOfYear(i);case"week":const r=new Date;return r.setDate(r.getDate()-e*7),xe.getStartOfWeek(r);default:return null}}static getEndOfTerm(e,t){switch(t){case"month":const n=new Date;return n.setMonth(n.getMonth()-e),xe.getEndOfMonth(n);case"year":const i=new Date;return i.setFullYear(i.getFullYear()-e),xe.getEndOfYear(i);case"week":const r=new Date;return r.setDate(r.getDate()-e*7),xe.getEndOfWeek(r);default:return null}}static getStartOfWeek(e){e=new Date(e);var t=e.getDay(),n=e.getDate()-t+(t==0?-6:1);return e.setDate(n),e.setHours(0,0,0,0),e}static getEndOfWeek(e){const t=xe.getStartOfWeek(e),n=new Date(t);return n.setDate(t.getDate()+6),n.setHours(23,59,59,999),n}static getStartOfPreviousWeek(e){const t=xe.getStartOfWeek(e),n=new Date(t);return n.setDate(t.getDate()-7),n}static getStartOfMonth(e){const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}static getEndOfMonth(e){const t=e.getFullYear(),n=e.getMonth();return new Date(t,n+1,0,23,59,59,999)}static getStartOfPreviousMonth(e){const t=xe.getStartOfMonth(e),n=new Date(t);return n.setMonth(t.getMonth()-1),n}static getStartOfYear(e){const t=new Date(e);return t.setMonth(0),t.setDate(1),t.setHours(0,0,0,0),t}static getEndOfYear(e){const t=e.getFullYear();return new Date(t,11,31,23,59,59,999)}static getStartOfPreviousYear(e){const t=xe.getStartOfYear(e),n=new Date(t);return n.setFullYear(t.getFullYear()-1),n}static getStart(e,t){switch(t){case"week":return xe.getStartOfWeek(e);case"month":return xe.getStartOfMonth(e);case"year":return xe.getStartOfYear(e);default:return e}}static getEnd(e,t){switch(t){case"week":return xe.getEndOfWeek(e);case"month":return xe.getEndOfMonth(e);case"year":return xe.getEndOfYear(e);default:return e}}static getStartOfPrevious(e,t){switch(t){case"week":return xe.getStartOfPreviousWeek(e);case"month":return xe.getStartOfPreviousMonth(e);case"year":return xe.getStartOfPreviousYear(e);default:return e}}static getDurationString(e){if(e<=0)return null;const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60),r=[];return t>0&&r.push(`${t}h`),n>0&&r.push(`${n}m`),(i>0||r.length===0)&&r.push(`${i}s`),r.join(" ")}static getPeriodString(e,t){const n=new Date,i=xe.addPeriod(xe.getStart(n,e),e,-t),r=xe.addPeriod(xe.getEnd(n,e),e,-t);switch(e){case"month":return`
                    ${i.toLocaleString("default",{month:"long"})} 
                    ${i.getFullYear()}
                `;case"year":return`${i.getFullYear()}`;case"week":return`
                    ${i.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}  
                    ${r.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}
                `;default:return""}}}class ss{static stringifyItem(e,t){switch(t){case"time":return xe.getDurationString(e)||"0 s";case"workouts":return e.toString()+(e===1?" workout":" workouts");case"energy":return ss.commaNumber(e)+" kj";case"volume":return ss.commaNumber(e)+" kg";default:return ss.commaNumber(e)}}static fullNameForType(e){switch(e){case"time":return"Workout time";case"workouts":return"Number of workouts";case"energy":return"Energy burned";case"volume":return"Volume";default:return e}}static intCommaNumber(e){let t="";for(let n=0;n<e.toString().length;n++){t+=e.toString()[n];const i=e.toString().length-n-1;i%3===0&&i!==0&&(t+=",")}return t}static commaNumber(e){const t=e.toString().split(".");return t[0]=ss.intCommaNumber(parseInt(t[0],10)),t.join(".")}}class Is{constructor(e,t){S(this,"workout_id");S(this,"title");S(this,"start_time");S(this,"end_time");S(this,"created_at");S(this,"exercises");S(this,"notes");S(this,"energy");S(this,"heartrate_stream",null);S(this,"heart_rate");S(this,"unsavedChanges",0);S(this,"saving",!1);S(this,"pbCount",0);S(this,"pbsCounting",!0);S(this,"saveTimeout",null);S(this,"SAVE_DELAY",500);this.title=e.title,this.workout_id=e.workout_id,this.start_time=e.start_time?new Date(e.start_time):new Date,this.end_time=e.end_time?new Date(e.end_time):new Date,this.created_at=e.created_at?new Date(e.created_at):new Date,this.notes=e.notes,typeof e.energy!="number"&&e.energy!==null&&(e.energy.amount!==null&&e.energy.amount!==void 0?e.energy=e.energy.amount:e.energy=null),this.energy=e.energy,this.heart_rate=e.heart_rate,this.heartrate_stream=e.heartrate_stream||null,this.exercises=t,this.pbCount=e.count_pbs||0}static async fetchById(e){const{data:t,error:n}=await ie.rpc("get_full_workout",{p_workout_id:e});if(n)return{workout:null,error:n};if(!t||t.length===0)return{workout:null,error:{message:"No workout with that id for that user"}};const i=t,r=[];for(const a of i.exercises_full){const l=fi.createFromFullExercise(a);r.push(l)}const o=new Is(i,r);for(const a of r)a.setWorkoutWithoutUpdate(o);return{workout:o,error:null}}static async createEmpty(){const e=new Date,{data:t,error:n}=await ie.from("workouts").insert({title:"New Workout",start_time:e.toISOString(),end_time:e.toISOString(),created_at:e.toISOString()}).select("workout_id").single();return{data:t,error:n}}static async create(e){const t=[];for(const a of e.exercises_full){const l=await fi.create(a,null);t.push(l)}if(e.startTime){const a=Is.dateFromJSONDate(e.startTime);e.start_time=a.toISOString()}if(e.endTime){const a=Is.dateFromJSONDate(e.endTime);e.end_time=a.toISOString()}e.start_time||(e.start_time=new Date().toISOString()),e.end_time||(e.end_time=e.start_time);const n=new Is(e,t);for(const a of t)a.setWorkout(n);if(e.workout_id)return n;const i=n.deserialize();delete i.workout_id;const{data:r,error:o}=await ie.from("workouts").insert(n.deserialize()).select("workout_id").single();if(o)throw new Error(`Failed to insert new workout into DB: ${o.message}`);n.workout_id=r.workout_id;for(const a of n.exercises)a.setWorkout(n);return n}async deleteWorkout(){const{error:e}=await ie.from("workouts").delete().eq("workout_id",this.workout_id);for(const t of this.exercises)t.removeAllSets();e&&console.error("Failed to delete workout:",e)}changeMade(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.saveChanges(),this.saveTimeout=null},this.SAVE_DELAY)}passWorkoutIdToExercises(){for(const e of this.exercises)e.setWorkout(this)}async saveChanges(){if(console.log("Saving workout changes..."),this.saving)return;console.log("Proceeding to save workout changes..."),this.saving=!0;const e=this.unsavedChanges,{error:t}=await ie.from("workouts").update(this.deserialize()).eq("workout_id",this.workout_id);if(console.log("Workout changes saved to database."),t&&console.error("Failed to save workout changes:",t),this.unsavedChanges-=e,this.unsavedChanges==0){this.saving=!1;return}console.log("Additional changes detected, saving again..."),this.saveChanges()}removeExercise(e){if(e<0||e>=this.exercises.length)throw new Error("Index out of bounds");this.exercises[e].removeAllSets(),this.exercises.splice(e,1),this.changeMade()}addEmptyExercise(){const e={exercise:"New Exercise",sets:[],notes:"",id:null},t=new fi(e,this);this.exercises.push(t),this.changeMade()}setExercises(e){this.exercises=e,this.changeMade()}setHeartRate(e){this.heart_rate=e,this.changeMade()}setEnergy(e){this.energy=e,this.changeMade()}setTitle(e){this.title=e,this.changeMade()}setStartDate(e){this.start_time=e,this.changeMade()}setEndDate(e){this.end_time=e,this.changeMade()}deserialize(){console.log("Deserializing workout:",this.workout_id);const e=[],t=[],n=new Array,i=new Array;this.passWorkoutIdToExercises(),console.log("Workout passed workout ID to exercises.");for(const r of this.exercises){const o=r.deserialize();e.push(o),t.push(r.getName());for(const l of o.sets){const c=l.id;c&&i.push(c)}const a=o.id;a!==null&&n.push(a)}return{title:this.title,workout_id:this.workout_id,start_time:this.start_time.toISOString(),end_time:this.end_time.toISOString(),created_at:this.created_at.toISOString(),exercises_full:e,exercises:t,notes:this.notes,energy:this.energy,heart_rate:this.heart_rate,heartrate_stream:this.heartrate_stream,volume:this.getVolume(),set_count:this.countSets(),exercise_ids:Array.from(n),set_ids:Array.from(i),count_pbs:this.countPBSets()}}savingInProgress(){return this.saving}getNotes(){return this.notes}getHeartrateStream(){return this.heartrate_stream}getEnergy(){return this.energy}getEnergyString(){const e=this.getEnergy();return e===null?null:`${ss.commaNumber(e)} kj`}getHeartRate(){return this.heart_rate}getHeartRateString(){return this.heart_rate===null?null:`${this.heart_rate} bpm`}getExercises(){return this.exercises}getVolume(){let e=0;for(const t of this.exercises)e+=t.getVolume();return e}getVolumeString(){const e=this.getVolume();return e===0?null:`${ss.commaNumber(e)} kg`}countSets(){let e=0;for(const t of this.exercises)e+=t.countSets();return e}countSetsString(){const e=this.countSets();return e===0?null:`${e} sets`}getId(){return this.workout_id}getTitle(){return this.title}getDuration(){return(this.end_time.getTime()-this.start_time.getTime())/1e3}getDurationString(){const e=this.getDuration();if(e<=0)return"0s";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60),r=[];return t>0&&r.push(`${t}h`),n>0&&r.push(`${n}m`),(i>0||r.length===0)&&r.push(`${i}s`),r.join(" ")}getDateString(){return this.start_time.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+", "+this.start_time.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}getStartTime(){return this.start_time}getStartTimeShortDateString(){return this.start_time.toLocaleDateString(void 0,{month:"short",day:"numeric"})}getEndTime(){return this.end_time}countExercises(){return this.exercises.length}getItem(e){switch(e){case"workouts":return 1;case"time":return this.getDuration();case"energy":return this.getEnergy();case"volume":return this.getVolume();default:throw new Error(`Unknown item: ${e}`)}}static dateFromJSONDate(e){const t=new Date;let n=t.getFullYear();e.year!==null&&e.year!==void 0&&typeof e.year=="number"&&e.year>=1900&&e.year<=2100&&(n=Math.floor(e.year));let i=t.getMonth();e.month!==null&&e.month!==void 0&&typeof e.month=="number"&&e.month>=1&&e.month<=12&&(i=Math.floor(e.month)-1);let r=t.getHours();e.hour!==null&&e.hour!==void 0&&typeof e.hour=="number"&&e.hour>=0&&e.hour<=23&&(r=Math.floor(e.hour));let o=t.getMinutes();e.minute!==null&&e.minute!==void 0&&typeof e.minute=="number"&&e.minute>=0&&e.minute<=59&&(o=Math.floor(e.minute));let a=t.getDate();if(e.day!==null&&e.day!==void 0&&typeof e.day=="number"&&e.day>=1){const u=new Date(n,i+1,0).getDate();e.day<=u?a=Math.floor(e.day):a=Math.min(a,u)}const l=new Date(n,i,a,r,o,0,0);return isNaN(l.getTime())?(console.warn("Failed to create valid date from JSONDate:",e,"Using current time instead"),new Date):l}async getExerciseIds(){const e=[];for(const t of this.exercises){const n=await t.getId();n!==null&&e.push(n)}return e}countPBSets(){let e=0;for(const t of this.exercises)e+=t.countPBSets();return this.pbCount=e,e}getPBCount(){return this.pbCount}}class Ag{constructor(e){S(this,"title");S(this,"workout_id");S(this,"start_time");S(this,"end_time");S(this,"energy");S(this,"heart_rate");S(this,"volume");S(this,"set_count");S(this,"count_pbs");this.title=e.title,this.workout_id=e.workout_id,this.start_time=e.start_time,this.end_time=e.end_time,this.energy=e.energy,this.heart_rate=e.heart_rate,this.volume=e.volume,this.set_count=e.set_count,this.count_pbs=e.count_pbs}getDuration(){const e=new Date(this.start_time).getTime();return(new Date(this.end_time).getTime()-e)/1e3}getDurationString(){const e=this.getDuration(),t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60),r=[];return t>0&&r.push(`${t}h`),n>0&&r.push(`${n}m`),(i>0||r.length===0)&&r.push(`${i}s`),r.join(" ")}getTitle(){return this.title}getDateString(){return new Date(this.start_time).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}getWorkoutId(){return this.workout_id}getStartTime(){return new Date(this.start_time)}getEndTime(){return new Date(this.end_time)}getEnergy(){return this.energy}getEnergyString(){return this.energy!==null?`${this.energy} kj`:null}getHeartRate(){return this.heart_rate}getHeartRateString(){return this.heart_rate!==null?`${this.heart_rate} bpm`:null}getVolume(){return this.volume||0}getVolumeString(){return this.volume!==null?`${this.volume} kg`:null}getId(){return this.workout_id}getPBCount(){return this.count_pbs||0}getPBCountString(){return this.count_pbs===void 0||this.count_pbs===0||this.count_pbs===null?null:this.count_pbs.toString()}getItem(e){switch(e){case"workouts":return 1;case"time":return this.getDuration();case"energy":return this.getEnergy();case"volume":return this.getVolume();default:throw new Error(`Unknown item: ${e}`)}}countSets(){return this.set_count}countSetsString(){return this.set_count!==null?`${this.set_count} sets`:null}async deleteWorkout(){const{error:e}=await ie.from("workouts").delete().eq("workout_id",this.workout_id);e&&console.error(`Error deleting workout ID ${this.workout_id}:`,e)}}async function Rg(){const{data:s,error:e}=await ie.from("workouts").select("title, workout_id, start_time, end_time, energy, heart_rate, volume, set_count, count_pbs");if(e)return console.error("Error fetching workouts info:",e),[];const t=[];for(const n of s||[])t.push(new Ag(n));return t.sort((n,i)=>i.getStartTime().getTime()-n.getStartTime().getTime()),t}async function Mg(s){const{data:e,error:t}=await ie.rpc("get_workouts_by_exercise_id",{exercise_id_param:s});if(t)return console.error(`Error fetching workouts for exercise ID ${s}:`,t),[];const n=[];for(const i of e||[])n.push(new Ag(i));return n.sort((i,r)=>r.getStartTime().getTime()-i.getStartTime().getTime()),n}const ex={class:"viewArea"},tx={class:"thumbnailContainer margins"},sx=ne({__name:"HomeView",setup(s){const e=I([]);Wt();const t=I(!0);ht(async()=>{await n()});async function n(){e.value=await Rg(),t.value=!1}return(i,r)=>(P(),$(_e,null,[t.value?(P(),ke(Og,{key:0})):K("",!0),k("div",ex,[k("div",tx,[W(Tt,{onClick:r[0]||(r[0]=o=>Te(Is).createEmpty())},{default:nt(()=>[...r[2]||(r[2]=[k("i",{class:"fa-solid fa-plus"},null,-1),ve(" New Empty Workout ",-1)])]),_:1}),(P(!0),$(_e,null,Hs(e.value,o=>(P(),ke(Cg,{key:o.getId(),workout:o,onReload:r[1]||(r[1]=a=>n())},null,8,["workout"]))),128))]),!t.value&&e.value.length===0?(P(),ke(Z0,{key:0})):K("",!0)])],64))}}),nx=ue(sx,[["__scopeId","data-v-e48e9a45"]]),ix={key:0,id:"urlsCount"},rx=ne({__name:"UploadComponent",props:{pageCount:{}},emits:["uploadWorkoutData","retakePhoto"],setup(s){return(e,t)=>s.pageCount>0?(P(),$("div",ix,[ve(" pages "+se(s.pageCount)+" ",1),W(Tt,{label:"Upload",loading:!1,onClick:t[0]||(t[0]=n=>e.$emit("uploadWorkoutData"))}),W(Tt,{label:"Retake",loading:!1,onClick:t[1]||(t[1]=n=>e.$emit("retakePhoto"))})])):K("",!0)}}),ox=ue(rx,[["__scopeId","data-v-23272a4e"]]),ax={class:"viewArea"},lx=ne({__name:"UploadView",setup(s){const e=I(0),t=Wt(),n=I(null),i=I(null),r=I([]),o=I(0),a=I(null),l=I(new Si);ht(async()=>{const f={video:{facingMode:"environment"}};n.value&&navigator.mediaDevices.getUserMedia(f).then(g=>{a.value=g,n?n.value.srcObject=g:(l.value.setError("Error creating video feed","Video element not found"),console.error("Video element not found"))}).catch(g=>{l.value.setError("Error accessing camera",g.message),console.error("Error accessing camera: ",g)})}),Tf(()=>{a.value&&a.value.getTracks().forEach(f=>f.stop())});const c=async()=>{if(!n.value||!i.value){console.error("Video or canvas element not found"),l.value.setError("Error capturing image","Video or canvas element not found");return}const{data:{user:f},error:g}=await ie.auth.getUser();if(g||!f){console.error("User not authenticated"),l.value.setError("User not authenticated",(g==null?void 0:g.message)||"No user found");return}i.value.width=n.value.videoWidth,i.value.height=n.value.videoHeight;const p=i.value.getContext("2d");if(!p){l.value.setError("Error capturing image","Failed to get canvas context"),console.error("Failed to get canvas context");return}p.drawImage(n.value,0,0),i.value.toBlob(async m=>{if(!m){l.value.setError("Error capturing image","Failed to capture image blob"),console.error("Failed to capture image");return}const y=new File([m],`photo-${Date.now()}-${f.id}.jpg`,{type:"image/jpeg"}),{data:b,error:v}=await ie.storage.from("workoutImage").upload(`photos/${f.id}/${y.name}`,y,{contentType:"image/jpeg",upsert:!1});if(v){l.value.setError("Error uploading image",v.message),console.error("Error uploading image: ",v);return}r.value.push(`https://gkyqqlkxpfskmtryfmyp.supabase.co/storage/v1/object/public/workoutImage/${b.path}`),o.value++},"image/jpeg",.8)};async function u(){const f=await d(r.value);if(!f){l.value.setError("Error generating workout data","No workout data generated. Please try again by clicking the upload button again."),console.error("No workout data generated");return}const{data:g,error:p}=await h(f);if(p){l.value.setError("Error uploading workout data","Please try again by clicking the upload button again."),console.error("Error uploading workout data: ",p);return}t.push({name:"Home"})}async function h(f){e.value++;const g=await Is.create(f);return e.value--,g?{data:g,error:null}:(l.value.setError("Error creating workout object","Please try again by clicking the upload button again."),{data:null,error:"Error creating workout object"})}async function d(f){e.value++;const{data:g,error:p}=await ie.functions.invoke("generate-workout-data",{body:{name:"Functions",imgURLs:f}});return p?(console.error("Error invoking function: ",p),l.value.setError("Error uploading workout data","Please try again by clicking the upload button again."),e.value--,""):(e.value--,g)}return(f,g)=>(P(),$(_e,null,[e.value>0?(P(),ke(fn,{key:0})):K("",!0),W(Nr,{error:l.value},null,8,["error"]),k("div",ax,[k("video",{ref_key:"video",ref:n,class:"cameraFeed",muted:"",playsinline:"","webkit-playsinline":"true","x-website-airplay":"deny",preload:"auto","aria-label":"",autoplay:""},null,512),k("button",{class:"captureButton",onClick:g[0]||(g[0]=p=>c())}),W(ox,{pageCount:o.value,onUploadWorkoutData:g[1]||(g[1]=p=>u()),onRetakePhoto:g[2]||(g[2]=p=>{r.value.pop(),o.value--})},null,8,["pageCount"]),k("canvas",{ref_key:"canvas",ref:i,class:"hidden"},null,512)])],64))}}),cx=ue(lx,[["__scopeId","data-v-0b409b6d"]]),ux={key:0,class:"overview-item"},hx={class:"overview-title"},dx={class:"overview-value"},fx=ne({__name:"OverviewItem",props:{label:{},value:{},icon:{}},setup(s){return(e,t)=>s.value!==null?(P(),$("div",ux,[k("p",hx,se(s.label),1),k("h1",dx,[k("i",{class:at(s.icon+" overview-icon")},null,2),ve(se(s.value),1)])])):K("",!0)}}),Jn=ue(fx,[["__scopeId","data-v-fd43305a"]]),gx={class:"softBubble overview"},px=ne({__name:"WorkoutOverview",props:{workout:{}},setup(s){const e=s,t=Ft(()=>{const n=e.workout.getPBCount();return n===0?null:n.toString()});return(n,i)=>(P(),$("div",gx,[W(Jn,{icon:"fa-solid fa-clock",label:"duration",value:s.workout.getDurationString()},null,8,["value"]),W(Jn,{icon:"fa-solid fa-dumbbell",label:"volume",value:s.workout.getVolumeString()},null,8,["value"]),W(Jn,{icon:"fa-solid fa-list",label:"sets",value:s.workout.countSets()},null,8,["value"]),W(Jn,{icon:"fa-solid fa-fire",label:"energy",value:s.workout.getEnergyString()},null,8,["value"]),W(Jn,{icon:"fa-solid fa-heart",label:"avg. heart rate",value:s.workout.getHeartRateString()},null,8,["value"]),W(Jn,{icon:"fa-solid fa-medal",label:"personal bests",value:t.value},null,8,["value"])]))}}),mx=ue(px,[["__scopeId","data-v-7cc5bbca"]]),yx={class:"inputs"},bx={class:"flexCol"},vx=ne({__name:"SetEditModal",props:{set:{},exercise:{},index:{}},emits:["cancel"],setup(s,{emit:e}){const t=I(0),n=I(0),i=I(""),r=s,o=e;function a(){r.set.setWeight(Number(t.value)),r.set.setReps(Number(n.value)),r.set.setNotes(i.value),r.set.updateDB(),o("cancel")}function l(){t.value=r.set.getWeight()||0,n.value=r.set.getReps()||0,i.value=r.set.getNotes()||""}return ht(()=>{l()}),dc(()=>{l()}),(c,u)=>(P(),ke(qs,{title:"Edit Set",confirmText:"Confirm",cancelText:"Cancel",onConfirm:u[4]||(u[4]=h=>a()),onCancel:u[5]||(u[5]=h=>o("cancel"))},{default:nt(()=>[k("div",yx,[mt(k("input",{id:"weightInput",type:"number","onUpdate:modelValue":u[0]||(u[0]=h=>t.value=h),min:"0"},null,512),[[yt,t.value]]),u[6]||(u[6]=ve(" kg ",-1)),u[7]||(u[7]=k("i",{class:"fa-solid fa-xmark"},null,-1)),mt(k("input",{id:"weightInput",type:"number","onUpdate:modelValue":u[1]||(u[1]=h=>n.value=h),min:"0"},null,512),[[yt,n.value]]),u[8]||(u[8]=ve(" reps ",-1))]),k("div",bx,[mt(k("textarea",{id:"setNotesInput","onUpdate:modelValue":u[2]||(u[2]=h=>i.value=h),rows:"4",placeholder:"Set notes..."},null,512),[[yt,i.value]]),W(Tt,{red:"",loading:!1,onClick:u[3]||(u[3]=()=>{r.exercise.removeSet(r.index),o("cancel")})},{default:nt(()=>[...u[9]||(u[9]=[k("i",{class:"fa-solid fa-trash"},null,-1),ve(" Delete Set ",-1)])]),_:1})])]),_:1}))}}),_x=ue(vx,[["__scopeId","data-v-6ecea0ae"]]),wx={class:"setlabel"},xx={class:"setdetails"},kx={key:0},Sx={key:1,class:"fa-solid fa-note-sticky noteIcon"},Ex={key:0,class:"pbs"},Tx={class:"pbLabel"},Px={key:1},Ox=ne({__name:"SetContainer",props:{set:{},previousSet:{},index:{},exercise:{},weightPbSets:{},volumePbSets:{}},setup(s){const e=s,t=I(""),n=I("");ht(async()=>{n.value=await e.set.getId(),e.previousSet&&(t.value=await e.previousSet.getId())});function i(){if(!e.previousSet)return e.weightPbSets.includes(n.value);const c=e.previousSet.getWeight(),u=e.set.getWeight();return c>u?!1:c!==u?e.weightPbSets.includes(n.value):e.weightPbSets.includes(n.value)&&!e.weightPbSets.includes(t.value)}function r(){if(!e.previousSet)return e.volumePbSets.includes(n.value);const c=(e.previousSet.getWeight()??0)*e.previousSet.getReps(),u=(e.set.getWeight()??0)*e.set.getReps();return c>u?!1:c!==u?e.volumePbSets.includes(n.value):e.volumePbSets.includes(n.value)&&!e.volumePbSets.includes(t.value)}function o(){const c=i();return c&&e.set.setWeightPB(),c}function a(){const c=r();return c&&e.set.setVolumePB(),c}const l=I(!1);return(c,u)=>(P(),$(_e,null,[l.value?(P(),ke(_x,{key:0,set:s.set,exercise:s.exercise,index:s.index,onCancel:u[0]||(u[0]=h=>l.value=!1)},null,8,["set","exercise","index"])):K("",!0),k("tr",{onClick:u[1]||(u[1]=h=>l.value=!0),class:"setItem"},[k("td",wx,se(s.index+1),1),k("td",xx,[s.set.getWeight()!==null?(P(),$("span",kx,[ve(se(s.set.getWeight())+" kg ",1),u[2]||(u[2]=k("i",{class:"fa-solid fa-xmark"},null,-1))])):K("",!0),ve(" "+se(s.set.getReps())+" reps ",1),s.set.getNotes()!==""&&s.set.getNotes()!==null?(P(),$("i",Sx)):K("",!0)]),o()||a()?(P(),$("td",Ex,[u[3]||(u[3]=k("i",{class:"fa-solid fa-medal"},null,-1)),k("span",Tx,se(s.set.getPBString()),1)])):(P(),$("td",Px))])],64))}}),Cx=ue(Ox,[["__scopeId","data-v-7943c1e2"]]),Ax=ne({__name:"DeleteExerciseModal",props:{exercise:{},visible:{type:Boolean}},emits:["confirm","cancel"],setup(s){return(e,t)=>s.visible?(P(),ke(qs,{key:0,title:`Remove Exercise: ${s.exercise.getName()}`,message:"Are you sure you want to remove this exercise from the workout? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmRed:!0,onConfirm:t[0]||(t[0]=n=>e.$emit("confirm")),onCancel:t[1]||(t[1]=n=>e.$emit("cancel"))},null,8,["title"])):K("",!0)}}),Rx={class:"inputs"},Mx=ne({__name:"ExerciseEditModal",props:{exercise:{}},emits:["cancel"],setup(s,{emit:e}){const t=I(""),n=I(""),i=I(!1),r=s,o=e;function a(){r.exercise.setName(t.value),r.exercise.setNotes(n.value),o("cancel")}function l(){i.value=!1,r.exercise.removeFromWorkout(),o("cancel")}return ht(()=>{t.value=r.exercise.getName(),n.value=r.exercise.getNotes()||""}),dc(()=>{t.value=r.exercise.getName(),n.value=r.exercise.getNotes()||""}),(c,u)=>(P(),$(_e,null,[W(qs,{title:"Edit Exercise",confirmText:"Confirm",cancelText:"Cancel",onConfirm:u[3]||(u[3]=h=>a()),onCancel:u[4]||(u[4]=h=>c.$emit("cancel"))},{default:nt(()=>[k("div",Rx,[mt(k("input",{id:"exerciseNameInput",type:"text","onUpdate:modelValue":u[0]||(u[0]=h=>t.value=h)},null,512),[[yt,t.value]]),mt(k("textarea",{id:"exerciseNotesInput","onUpdate:modelValue":u[1]||(u[1]=h=>n.value=h),rows:"4",placeholder:"Notes..."},null,512),[[yt,n.value]])]),W(Tt,{red:"",fullWidth:"",loading:!1,onClick:u[2]||(u[2]=h=>i.value=!0)},{default:nt(()=>[...u[7]||(u[7]=[k("i",{class:"fa-solid fa-trash"},null,-1),ve(" Remove Exercise ",-1)])]),_:1})]),_:1}),W(Ax,{exercise:r.exercise,visible:i.value,onConfirm:u[5]||(u[5]=h=>l()),onCancel:u[6]||(u[6]=h=>i.value=!1)},null,8,["exercise","visible"])],64))}}),Dx=ue(Mx,[["__scopeId","data-v-66211c76"]]),Ix={class:"exerciseTitle"},Nx={key:0,class:"reorderHandles clickable"},$x=ne({__name:"ExerciseTopBar",props:{exercise:{},index:{}},emits:["edit"],setup(s,{emit:e}){const t=e;return(n,i)=>(P(),$("h2",Ix,[k("span",{onClick:i[0]||(i[0]=r=>t("edit")),class:"clickable"},[ve(se(s.exercise.getName())+" ",1),i[2]||(i[2]=k("i",{class:"fa-solid fa-pen-to-square"},null,-1))]),s.index!==0?(P(),$("div",Nx,[k("i",{onClick:i[1]||(i[1]=r=>s.exercise.reorderUp()),class:"fa-solid fa-chevron-up reorder"})])):K("",!0)]))}}),Lx=ue($x,[["__scopeId","data-v-f75f1324"]]),Fx={class:"exerciseContainer softBubble"},Bx={class:"setsContainer"},Wx={key:0},jx={key:1},Vx={colspan:"3",class:"center"},Ux={class:"setDetails"},Hx=ne({__name:"ExerciseContainer",props:{exercise:{},showSets:{type:Boolean},index:{},weightPbSets:{},volumePbSets:{}},setup(s){const e=I(!1);return(t,n)=>(P(),$(_e,null,[e.value?(P(),ke(Dx,{key:0,exercise:s.exercise,onCancel:n[0]||(n[0]=i=>e.value=!1)},null,8,["exercise"])):K("",!0),k("div",Fx,[W(Lx,{exercise:s.exercise,index:s.index,onEdit:n[1]||(n[1]=i=>e.value=!0)},null,8,["exercise","index"]),k("table",Bx,[s.showSets?(P(),$("thead",Wx,[...n[4]||(n[4]=[k("tr",null,[k("th",{class:"greyed",colspan:"1"},"set"),k("th",{class:"greyed",colspan:"1"},"weight & reps")],-1)])])):K("",!0),s.showSets?(P(),$("tbody",jx,[(P(!0),$(_e,null,Hs(s.exercise.getSets(),(i,r)=>(P(),ke(Cx,{key:r,index:r,set:i,previousSet:r>0?s.exercise.getSets()[r-1]:null,exercise:s.exercise,weightPbSets:s.weightPbSets,volumePbSets:s.volumePbSets},null,8,["index","set","previousSet","exercise","weightPbSets","volumePbSets"]))),128)),k("tr",null,[k("td",Vx,[k("button",{onClick:n[2]||(n[2]=i=>s.exercise.addNewSet()),class:"borderlessButton center"},[...n[5]||(n[5]=[k("i",{class:"fa-solid fa-plus"},null,-1),ve("Add set",-1)])])])])])):K("",!0),k("tfoot",null,[k("tr",null,[n[7]||(n[7]=k("td",null,null,-1)),k("td",Ux,[n[6]||(n[6]=k("b",null,"volume:",-1)),ve(" "+se(s.exercise.getVolume())+" kg ",1)]),k("td",null,[s.index!==s.exercise.getWorkout().countExercises()-1?(P(),$("i",{key:0,onClick:n[3]||(n[3]=i=>s.exercise.reorderDown()),class:"fa-solid fa-chevron-down reorder"})):K("",!0)])])])])])],64))}}),zx=ne({__name:"SavingDisplay",props:{workout:{}},setup(s){return(e,t)=>(P(),$("div",{class:at(["savingDisplay",{display:s.workout.savingInProgress()}])},[...t[0]||(t[0]=[k("i",{class:"fa-solid fa-floppy-disk"},null,-1)])],2))}}),qx=ue(zx,[["__scopeId","data-v-2e9e3957"]]),Yx={class:"inputs"},Gx=ne({__name:"WorkoutDetailsEditModal",props:{workout:{}},emits:["cancel"],setup(s,{emit:e}){const t=s,n=e,i=I(t.workout.getTitle()),r=I(t.workout.getHeartRate()||""),o=I(t.workout.getEnergy()||""),a=I(t.workout.getStartTime()),l=I(t.workout.getEndTime());function c(){t.workout.setTitle(i.value),t.workout.setHeartRate(Number(r.value)||null),t.workout.setEnergy(Number(o.value)||null),t.workout.setStartDate(a.value),t.workout.setEndDate(l.value),n("cancel")}const u=Ft({get(){return a.value.getFullYear()+"-"+String(a.value.getMonth()+1).padStart(2,"0")+"-"+String(a.value.getDate()).padStart(2,"0")+"T"+String(a.value.getHours()).padStart(2,"0")+":"+String(a.value.getMinutes()).padStart(2,"0")},set(d){a.value=new Date(d)}}),h=Ft({get(){return l.value.getFullYear()+"-"+String(l.value.getMonth()+1).padStart(2,"0")+"-"+String(l.value.getDate()).padStart(2,"0")+"T"+String(l.value.getHours()).padStart(2,"0")+":"+String(l.value.getMinutes()).padStart(2,"0")},set(d){l.value=new Date(d)}});return(d,f)=>(P(),ke(qs,{title:"Edit Workout Details",confirmText:"Save",cancelText:"Cancel",onConfirm:f[5]||(f[5]=g=>c()),onCancel:f[6]||(f[6]=g=>n("cancel"))},{default:nt(()=>[k("div",Yx,[f[7]||(f[7]=k("label",{for:"titleInput"},"Title:",-1)),mt(k("input",{id:"titleInput",type:"text","onUpdate:modelValue":f[0]||(f[0]=g=>i.value=g)},null,512),[[yt,i.value]]),f[8]||(f[8]=k("label",{for:"startDate"},"Start Date and Time:",-1)),mt(k("input",{id:"startDate",type:"datetime-local","onUpdate:modelValue":f[1]||(f[1]=g=>u.value=g)},null,512),[[yt,u.value]]),f[9]||(f[9]=k("label",{for:"endDate"},"End Date and Time:",-1)),mt(k("input",{id:"startDate",type:"datetime-local","onUpdate:modelValue":f[2]||(f[2]=g=>h.value=g)},null,512),[[yt,h.value]]),f[10]||(f[10]=k("label",{for:"heartRateInput"},"Average Heart Rate (bpm):",-1)),mt(k("input",{id:"heartRateInput",type:"number","onUpdate:modelValue":f[3]||(f[3]=g=>r.value=g),min:"0"},null,512),[[yt,r.value,void 0,{number:!0}]]),f[11]||(f[11]=k("label",{for:"energyInput"},"Energy Burned (kj):",-1)),mt(k("input",{id:"energyInput",type:"number","onUpdate:modelValue":f[4]||(f[4]=g=>o.value=g),min:"0"},null,512),[[yt,o.value,void 0,{number:!0}]])])]),_:1}))}}),Kx=ue(Gx,[["__scopeId","data-v-d96ddd76"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function $r(s){return s+.5|0}const sn=(s,e,t)=>Math.max(Math.min(s,t),e);function Vi(s){return sn($r(s*2.55),0,255)}function cn(s){return sn($r(s*255),0,255)}function Rs(s){return sn($r(s/2.55)/100,0,1)}function fh(s){return sn($r(s*100),0,100)}const Gt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ml=[..."0123456789ABCDEF"],Jx=s=>Ml[s&15],Xx=s=>Ml[(s&240)>>4]+Ml[s&15],Kr=s=>(s&240)>>4===(s&15),Qx=s=>Kr(s.r)&&Kr(s.g)&&Kr(s.b)&&Kr(s.a);function Zx(s){var e=s.length,t;return s[0]==="#"&&(e===4||e===5?t={r:255&Gt[s[1]]*17,g:255&Gt[s[2]]*17,b:255&Gt[s[3]]*17,a:e===5?Gt[s[4]]*17:255}:(e===7||e===9)&&(t={r:Gt[s[1]]<<4|Gt[s[2]],g:Gt[s[3]]<<4|Gt[s[4]],b:Gt[s[5]]<<4|Gt[s[6]],a:e===9?Gt[s[7]]<<4|Gt[s[8]]:255})),t}const ek=(s,e)=>s<255?e(s):"";function tk(s){var e=Qx(s)?Jx:Xx;return s?"#"+e(s.r)+e(s.g)+e(s.b)+ek(s.a,e):void 0}const sk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Dg(s,e,t){const n=e*Math.min(t,1-t),i=(r,o=(r+s/30)%12)=>t-n*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function nk(s,e,t){const n=(i,r=(i+s/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function ik(s,e,t){const n=Dg(s,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)n[i]*=1-e-t,n[i]+=e;return n}function rk(s,e,t,n,i){return s===i?(e-t)/n+(e<t?6:0):e===i?(t-s)/n+2:(s-e)/n+4}function Ec(s){const t=s.r/255,n=s.g/255,i=s.b/255,r=Math.max(t,n,i),o=Math.min(t,n,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=rk(t,n,i,u,r),l=l*60+.5),[l|0,c||0,a]}function Tc(s,e,t,n){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,t,n)).map(cn)}function Pc(s,e,t){return Tc(Dg,s,e,t)}function ok(s,e,t){return Tc(ik,s,e,t)}function ak(s,e,t){return Tc(nk,s,e,t)}function Ig(s){return(s%360+360)%360}function lk(s){const e=sk.exec(s);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?Vi(+e[5]):cn(+e[5]));const i=Ig(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=ok(i,r,o):e[1]==="hsv"?n=ak(i,r,o):n=Pc(i,r,o),{r:n[0],g:n[1],b:n[2],a:t}}function ck(s,e){var t=Ec(s);t[0]=Ig(t[0]+e),t=Pc(t),s.r=t[0],s.g=t[1],s.b=t[2]}function uk(s){if(!s)return;const e=Ec(s),t=e[0],n=fh(e[1]),i=fh(e[2]);return s.a<255?`hsla(${t}, ${n}%, ${i}%, ${Rs(s.a)})`:`hsl(${t}, ${n}%, ${i}%)`}const gh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ph={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hk(){const s={},e=Object.keys(ph),t=Object.keys(gh);let n,i,r,o,a;for(n=0;n<e.length;n++){for(o=a=e[n],i=0;i<t.length;i++)r=t[i],a=a.replace(r,gh[r]);r=parseInt(ph[o],16),s[a]=[r>>16&255,r>>8&255,r&255]}return s}let Jr;function dk(s){Jr||(Jr=hk(),Jr.transparent=[0,0,0,0]);const e=Jr[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const fk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function gk(s){const e=fk.exec(s);let t=255,n,i,r;if(e){if(e[7]!==n){const o=+e[7];t=e[8]?Vi(o):sn(o*255,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?Vi(n):sn(n,0,255)),i=255&(e[4]?Vi(i):sn(i,0,255)),r=255&(e[6]?Vi(r):sn(r,0,255)),{r:n,g:i,b:r,a:t}}}function pk(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Rs(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Ua=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Xn=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function mk(s,e,t){const n=Xn(Rs(s.r)),i=Xn(Rs(s.g)),r=Xn(Rs(s.b));return{r:cn(Ua(n+t*(Xn(Rs(e.r))-n))),g:cn(Ua(i+t*(Xn(Rs(e.g))-i))),b:cn(Ua(r+t*(Xn(Rs(e.b))-r))),a:s.a+t*(e.a-s.a)}}function Xr(s,e,t){if(s){let n=Ec(s);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=Pc(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function Ng(s,e){return s&&Object.assign(e||{},s)}function mh(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=cn(s[3]))):(e=Ng(s,{r:0,g:0,b:0,a:1}),e.a=cn(e.a)),e}function yk(s){return s.charAt(0)==="r"?gk(s):lk(s)}class Sr{constructor(e){if(e instanceof Sr)return e;const t=typeof e;let n;t==="object"?n=mh(e):t==="string"&&(n=Zx(e)||dk(e)||yk(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ng(this._rgb);return e&&(e.a=Rs(e.a)),e}set rgb(e){this._rgb=mh(e)}rgbString(){return this._valid?pk(this._rgb):void 0}hexString(){return this._valid?tk(this._rgb):void 0}hslString(){return this._valid?uk(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=n.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*i.r+.5,n.g=255&c*n.g+r*i.g+.5,n.b=255&c*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=mk(this._rgb,e._rgb,t)),this}clone(){return new Sr(this.rgb)}alpha(e){return this._rgb.a=cn(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=$r(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xr(this._rgb,2,e),this}darken(e){return Xr(this._rgb,2,-e),this}saturate(e){return Xr(this._rgb,1,e),this}desaturate(e){return Xr(this._rgb,1,-e),this}rotate(e){return ck(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ts(){}const bk=(()=>{let s=0;return()=>s++})();function Se(s){return s==null}function Ye(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ee(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function et(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function Ht(s,e){return et(s)?s:e}function de(s,e){return typeof s>"u"?e:s}const vk=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/e,$g=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function Ue(s,e,t){if(s&&typeof s.call=="function")return s.apply(t,e)}function $e(s,e,t,n){let i,r,o;if(Ye(s))for(r=s.length,i=0;i<r;i++)e.call(t,s[i],i);else if(Ee(s))for(o=Object.keys(s),r=o.length,i=0;i<r;i++)e.call(t,s[o[i]],o[i])}function $o(s,e){let t,n,i,r;if(!s||!e||s.length!==e.length)return!1;for(t=0,n=s.length;t<n;++t)if(i=s[t],r=e[t],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Lo(s){if(Ye(s))return s.map(Lo);if(Ee(s)){const e=Object.create(null),t=Object.keys(s),n=t.length;let i=0;for(;i<n;++i)e[t[i]]=Lo(s[t[i]]);return e}return s}function Lg(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function _k(s,e,t,n){if(!Lg(s))return;const i=e[s],r=t[s];Ee(i)&&Ee(r)?Er(i,r,n):e[s]=Lo(r)}function Er(s,e,t){const n=Ye(e)?e:[e],i=n.length;if(!Ee(s))return s;t=t||{};const r=t.merger||_k;let o;for(let a=0;a<i;++a){if(o=n[a],!Ee(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],s,o,t)}return s}function ir(s,e){return Er(s,e,{merger:wk})}function wk(s,e,t){if(!Lg(s))return;const n=e[s],i=t[s];Ee(n)&&Ee(i)?ir(n,i):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=Lo(i))}const yh={"":s=>s,x:s=>s.x,y:s=>s.y};function xk(s){const e=s.split("."),t=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function kk(s){const e=xk(s);return t=>{for(const n of e){if(n==="")break;t=t&&t[n]}return t}}function un(s,e){return(yh[e]||(yh[e]=kk(e)))(s)}function Oc(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Tr=s=>typeof s<"u",hn=s=>typeof s=="function",bh=(s,e)=>{if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0};function Sk(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const Oe=Math.PI,He=2*Oe,Ek=He+Oe,Fo=Number.POSITIVE_INFINITY,Tk=Oe/180,it=Oe/2,vn=Oe/4,vh=Oe*2/3,nn=Math.log10,ws=Math.sign;function rr(s,e,t){return Math.abs(s-e)<t}function _h(s){const e=Math.round(s);s=rr(s,e,s/1e3)?e:s;const t=Math.pow(10,Math.floor(nn(s))),n=s/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function Pk(s){const e=[],t=Math.sqrt(s);let n;for(n=1;n<t;n++)s%n===0&&(e.push(n),e.push(s/n));return t===(t|0)&&e.push(t),e.sort((i,r)=>i-r).pop(),e}function Ok(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function _i(s){return!Ok(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function Ck(s,e){const t=Math.round(s);return t-e<=s&&t+e>=s}function Fg(s,e,t){let n,i,r;for(n=0,i=s.length;n<i;n++)r=s[n][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function ns(s){return s*(Oe/180)}function Cc(s){return s*(180/Oe)}function wh(s){if(!et(s))return;let e=1,t=0;for(;Math.round(s*e)/e!==s;)e*=10,t++;return t}function Bg(s,e){const t=e.x-s.x,n=e.y-s.y,i=Math.sqrt(t*t+n*n);let r=Math.atan2(n,t);return r<-.5*Oe&&(r+=He),{angle:r,distance:i}}function Dl(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function Ak(s,e){return(s-e+Ek)%He-Oe}function kt(s){return(s%He+He)%He}function Pr(s,e,t,n){const i=kt(s),r=kt(e),o=kt(t),a=kt(r-i),l=kt(o-i),c=kt(i-r),u=kt(i-o);return i===r||i===o||n&&r===o||a>l&&c<u}function bt(s,e,t){return Math.max(e,Math.min(t,s))}function Rk(s){return bt(s,-32768,32767)}function Ns(s,e,t,n=1e-6){return s>=Math.min(e,t)-n&&s<=Math.max(e,t)+n}function Ac(s,e,t){t=t||(o=>s[o]<e);let n=s.length-1,i=0,r;for(;n-i>1;)r=i+n>>1,t(r)?i=r:n=r;return{lo:i,hi:n}}const $s=(s,e,t,n)=>Ac(s,t,n?i=>{const r=s[i][e];return r<t||r===t&&s[i+1][e]===t}:i=>s[i][e]<t),Mk=(s,e,t)=>Ac(s,t,n=>s[n][e]>=t);function Dk(s,e,t){let n=0,i=s.length;for(;n<i&&s[n]<e;)n++;for(;i>n&&s[i-1]>t;)i--;return n>0||i<s.length?s.slice(n,i):s}const Wg=["push","pop","shift","splice","unshift"];function Ik(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Wg.forEach(t=>{const n="_onData"+Oc(t),i=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return s._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function xh(s,e){const t=s._chartjs;if(!t)return;const n=t.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(Wg.forEach(r=>{delete s[r]}),delete s._chartjs)}function jg(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const Vg=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function Ug(s,e){let t=[],n=!1;return function(...i){t=i,n||(n=!0,Vg.call(window,()=>{n=!1,s.apply(e,t)}))}}function Nk(s,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(s,e,n)):s.apply(this,n),e}}const Rc=s=>s==="start"?"left":s==="end"?"right":"center",xt=(s,e,t)=>s==="start"?e:s==="end"?t:(e+t)/2,$k=(s,e,t,n)=>s===(n?"left":"right")?t:s==="center"?(e+t)/2:e;function Hg(s,e,t){const n=e.length;let i=0,r=n;if(s._sorted){const{iScale:o,vScale:a,_parsed:l}=s,c=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:g}=o.getUserBounds();if(f){if(i=Math.min($s(l,u,h).lo,t?n:$s(e,u,o.getPixelForValue(h)).lo),c){const p=l.slice(0,i+1).reverse().findIndex(m=>!Se(m[a.axis]));i-=Math.max(0,p)}i=bt(i,0,n-1)}if(g){let p=Math.max($s(l,o.axis,d,!0).hi+1,t?0:$s(e,u,o.getPixelForValue(d),!0).hi+1);if(c){const m=l.slice(p-1).findIndex(y=>!Se(y[a.axis]));p+=Math.max(0,m)}r=bt(p,i,n)-i}else r=n-i}return{start:i,count:r}}function zg(s){const{xScale:e,yScale:t,_scaleRanges:n}=s,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return s._scaleRanges=i,!0;const r=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,i),r}const Qr=s=>s===0||s===1,kh=(s,e,t)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*He/t)),Sh=(s,e,t)=>Math.pow(2,-10*s)*Math.sin((s-e)*He/t)+1,or={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*it)+1,easeOutSine:s=>Math.sin(s*it),easeInOutSine:s=>-.5*(Math.cos(Oe*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Qr(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Qr(s)?s:kh(s,.075,.3),easeOutElastic:s=>Qr(s)?s:Sh(s,.075,.3),easeInOutElastic(s){return Qr(s)?s:s<.5?.5*kh(s*2,.1125,.45):.5+.5*Sh(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-or.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?or.easeInBounce(s*2)*.5:or.easeOutBounce(s*2-1)*.5+.5};function Mc(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Eh(s){return Mc(s)?s:new Sr(s)}function Ha(s){return Mc(s)?s:new Sr(s).saturate(.5).darken(.1).hexString()}const Lk=["x","y","borderWidth","radius","tension"],Fk=["color","borderColor","backgroundColor"];function Bk(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:Fk},numbers:{type:"number",properties:Lk}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Wk(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Th=new Map;function jk(s,e){e=e||{};const t=s+JSON.stringify(e);let n=Th.get(t);return n||(n=new Intl.NumberFormat(s,e),Th.set(t,n)),n}function Lr(s,e,t){return jk(e,t).format(s)}const qg={values(s){return Ye(s)?s:""+s},numeric(s,e,t){if(s===0)return"0";const n=this.chart.options.locale;let i,r=s;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=Vk(s,t)}const o=nn(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Lr(s,n,l)},logarithmic(s,e,t){if(s===0)return"0";const n=t[e].significand||s/Math.pow(10,Math.floor(nn(s)));return[1,2,3,5,10,15].includes(n)||e>.8*t.length?qg.numeric.call(this,s,e,t):""}};function Vk(s,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&s!==Math.floor(s)&&(t=s-Math.floor(s)),t}var ha={formatters:qg};function Uk(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ha.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ln=Object.create(null),Il=Object.create(null);function ar(s,e){if(!e)return s;const t=e.split(".");for(let n=0,i=t.length;n<i;++n){const r=t[n];s=s[r]||(s[r]=Object.create(null))}return s}function za(s,e,t){return typeof e=="string"?Er(ar(s,e),t):Er(ar(s,""),e)}class Hk{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Ha(i.backgroundColor),this.hoverBorderColor=(n,i)=>Ha(i.borderColor),this.hoverColor=(n,i)=>Ha(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return za(this,e,t)}get(e){return ar(this,e)}describe(e,t){return za(Il,e,t)}override(e,t){return za(Ln,e,t)}route(e,t,n,i){const r=ar(this,e),o=ar(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ee(l)?Object.assign({},c,l):de(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Ge=new Hk({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Bk,Wk,Uk]);function zk(s){return!s||Se(s.size)||Se(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Bo(s,e,t,n,i){let r=e[i];return r||(r=e[i]=s.measureText(i).width,t.push(i)),r>n&&(n=r),n}function qk(s,e,t,n){n=n||{};let i=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},r=n.garbageCollect=[],n.font=e),s.save(),s.font=e;let o=0;const a=t.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=t[l],h!=null&&!Ye(h))o=Bo(s,i,r,o,h);else if(Ye(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Ye(d)&&(o=Bo(s,i,r,o,d));s.restore();const f=r.length/2;if(f>t.length){for(l=0;l<f;l++)delete i[r[l]];r.splice(0,f)}return o}function _n(s,e,t){const n=s.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*n)/n+i}function Ph(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function Nl(s,e,t,n){Yg(s,e,t,n,null)}function Yg(s,e,t,n,i){let r,o,a,l,c,u,h,d;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*Tk;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){s.save(),s.translate(t,n),s.rotate(m),s.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),s.restore();return}if(!(isNaN(p)||p<=0)){switch(s.beginPath(),f){default:i?s.ellipse(t,n,i/2,p,0,0,He):s.arc(t,n,p,0,He),s.closePath();break;case"triangle":u=i?i/2:p,s.moveTo(t+Math.sin(m)*u,n-Math.cos(m)*p),m+=vh,s.lineTo(t+Math.sin(m)*u,n-Math.cos(m)*p),m+=vh,s.lineTo(t+Math.sin(m)*u,n-Math.cos(m)*p),s.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+vn)*l,h=Math.cos(m+vn)*(i?i/2-c:l),a=Math.sin(m+vn)*l,d=Math.sin(m+vn)*(i?i/2-c:l),s.arc(t-h,n-a,c,m-Oe,m-it),s.arc(t+d,n-o,c,m-it,m),s.arc(t+h,n+a,c,m,m+it),s.arc(t-d,n+o,c,m+it,m+Oe),s.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=i?i/2:l,s.rect(t-u,n-l,2*u,2*l);break}m+=vn;case"rectRot":h=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(i?i/2:p),s.moveTo(t-h,n-a),s.lineTo(t+d,n-o),s.lineTo(t+h,n+a),s.lineTo(t-d,n+o),s.closePath();break;case"crossRot":m+=vn;case"cross":h=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(i?i/2:p),s.moveTo(t-h,n-a),s.lineTo(t+h,n+a),s.moveTo(t+d,n-o),s.lineTo(t-d,n+o);break;case"star":h=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(i?i/2:p),s.moveTo(t-h,n-a),s.lineTo(t+h,n+a),s.moveTo(t+d,n-o),s.lineTo(t-d,n+o),m+=vn,h=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(i?i/2:p),s.moveTo(t-h,n-a),s.lineTo(t+h,n+a),s.moveTo(t+d,n-o),s.lineTo(t-d,n+o);break;case"line":o=i?i/2:Math.cos(m)*p,a=Math.sin(m)*p,s.moveTo(t-o,n-a),s.lineTo(t+o,n+a);break;case"dash":s.moveTo(t,n),s.lineTo(t+Math.cos(m)*(i?i/2:p),n+Math.sin(m)*p);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function Ls(s,e,t){return t=t||.5,!e||s&&s.x>e.left-t&&s.x<e.right+t&&s.y>e.top-t&&s.y<e.bottom+t}function da(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function fa(s){s.restore()}function Yk(s,e,t,n,i){if(!e)return s.lineTo(t.x,t.y);if(i==="middle"){const r=(e.x+t.x)/2;s.lineTo(r,e.y),s.lineTo(r,t.y)}else i==="after"!=!!n?s.lineTo(e.x,t.y):s.lineTo(t.x,e.y);s.lineTo(t.x,t.y)}function Gk(s,e,t,n){if(!e)return s.lineTo(t.x,t.y);s.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function Kk(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),Se(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function Jk(s,e,t,n,i){if(i.strikethrough||i.underline){const r=s.measureText(n),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=i.decorationWidth||2,s.moveTo(o,u),s.lineTo(a,u),s.stroke()}}function Xk(s,e){const t=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=t}function Fn(s,e,t,n,i,r={}){const o=Ye(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(s.save(),s.font=i.string,Kk(s,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Xk(s,r.backdrop),a&&(r.strokeColor&&(s.strokeStyle=r.strokeColor),Se(r.strokeWidth)||(s.lineWidth=r.strokeWidth),s.strokeText(c,t,n,r.maxWidth)),s.fillText(c,t,n,r.maxWidth),Jk(s,t,n,c,r),n+=Number(i.lineHeight);s.restore()}function Or(s,e){const{x:t,y:n,w:i,h:r,radius:o}=e;s.arc(t+o.topLeft,n+o.topLeft,o.topLeft,1.5*Oe,Oe,!0),s.lineTo(t,n+r-o.bottomLeft),s.arc(t+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,Oe,it,!0),s.lineTo(t+i-o.bottomRight,n+r),s.arc(t+i-o.bottomRight,n+r-o.bottomRight,o.bottomRight,it,0,!0),s.lineTo(t+i,n+o.topRight),s.arc(t+i-o.topRight,n+o.topRight,o.topRight,0,-it,!0),s.lineTo(t+o.topLeft,n)}const Qk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Zk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function eS(s,e){const t=(""+s).match(Qk);if(!t||t[1]==="normal")return e*1.2;switch(s=+t[2],t[3]){case"px":return s;case"%":s/=100;break}return e*s}const tS=s=>+s||0;function Dc(s,e){const t={},n=Ee(e),i=n?Object.keys(e):e,r=Ee(s)?n?o=>de(s[o],s[e[o]]):o=>s[o]:()=>s;for(const o of i)t[o]=tS(r(o));return t}function Gg(s){return Dc(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Nn(s){return Dc(s,["topLeft","topRight","bottomLeft","bottomRight"])}function At(s){const e=Gg(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function gt(s,e){s=s||{},e=e||Ge.font;let t=de(s.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=de(s.style,e.style);n&&!(""+n).match(Zk)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:de(s.family,e.family),lineHeight:eS(de(s.lineHeight,e.lineHeight),t),size:t,style:n,weight:de(s.weight,e.weight),string:""};return i.string=zk(i),i}function Ui(s,e,t,n){let i,r,o;for(i=0,r=s.length;i<r;++i)if(o=s[i],o!==void 0&&o!==void 0)return o}function sS(s,e,t){const{min:n,max:i}=s,r=$g(e,(i-n)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(i,r)}}function gn(s,e){return Object.assign(Object.create(s),e)}function Ic(s,e=[""],t,n,i=()=>s[0]){const r=t||s;typeof n>"u"&&(n=Qg("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:r,_fallback:n,_getTarget:i,override:a=>Ic([a,...s],e,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete s[0][l],!0},get(a,l){return Jg(a,l,()=>uS(l,e,s,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(a,l){return Ch(a).includes(l)},ownKeys(a){return Ch(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function wi(s,e,t,n){const i={_cacheable:!1,_proxy:s,_context:e,_subProxy:t,_stack:new Set,_descriptors:Kg(s,n),setContext:r=>wi(s,r,t,n),override:r=>wi(s.override(r),e,t,n)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete s[o],!0},get(r,o,a){return Jg(r,o,()=>iS(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(r,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(r,o,a){return s[o]=a,delete r[o],!0}})}function Kg(s,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=s;return{allKeys:i,scriptable:t,indexable:n,isScriptable:hn(t)?t:()=>t,isIndexable:hn(n)?n:()=>n}}const nS=(s,e)=>s?s+Oc(e):e,Nc=(s,e)=>Ee(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Jg(s,e,t){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const n=t();return s[e]=n,n}function iS(s,e,t){const{_proxy:n,_context:i,_subProxy:r,_descriptors:o}=s;let a=n[e];return hn(a)&&o.isScriptable(e)&&(a=rS(e,a,s,t)),Ye(a)&&a.length&&(a=oS(e,a,s,o.isIndexable)),Nc(e,a)&&(a=wi(a,i,r&&r[e],o)),a}function rS(s,e,t,n){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=t;if(a.has(s))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+s);a.add(s);let l=e(r,o||n);return a.delete(s),Nc(s,l)&&(l=$c(i._scopes,i,s,l)),l}function oS(s,e,t,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&n(s))return e[r.index%e.length];if(Ee(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=$c(c,i,s,u);e.push(wi(h,r,o&&o[s],a))}}return e}function Xg(s,e,t){return hn(s)?s(e,t):s}const aS=(s,e)=>s===!0?e:typeof s=="string"?un(e,s):void 0;function lS(s,e,t,n,i){for(const r of e){const o=aS(t,r);if(o){s.add(o);const a=Xg(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==n)return a}else if(o===!1&&typeof n<"u"&&t!==n)return null}return!1}function $c(s,e,t,n){const i=e._rootScopes,r=Xg(e._fallback,t,n),o=[...s,...i],a=new Set;a.add(n);let l=Oh(a,o,t,r||t,n);return l===null||typeof r<"u"&&r!==t&&(l=Oh(a,o,r,l,n),l===null)?!1:Ic(Array.from(a),[""],i,r,()=>cS(e,t,n))}function Oh(s,e,t,n,i){for(;t;)t=lS(s,e,t,n,i);return t}function cS(s,e,t){const n=s._getTarget();e in n||(n[e]={});const i=n[e];return Ye(i)&&Ee(t)?t:i||{}}function uS(s,e,t,n){let i;for(const r of e)if(i=Qg(nS(r,s),t),typeof i<"u")return Nc(s,i)?$c(t,n,s,i):i}function Qg(s,e){for(const t of e){if(!t)continue;const n=t[s];if(typeof n<"u")return n}}function Ch(s){let e=s._keys;return e||(e=s._keys=hS(s._scopes)),e}function hS(s){const e=new Set;for(const t of s)for(const n of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function Zg(s,e,t,n){const{iScale:i}=s,{key:r="r"}=this._parsing,o=new Array(n);let a,l,c,u;for(a=0,l=n;a<l;++a)c=a+t,u=e[c],o[a]={r:i.parse(un(u,r),c)};return o}const dS=Number.EPSILON||1e-14,xi=(s,e)=>e<s.length&&!s[e].skip&&s[e],ep=s=>s==="x"?"y":"x";function fS(s,e,t,n){const i=s.skip?e:s,r=e,o=t.skip?e:t,a=Dl(r,i),l=Dl(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=n*c,d=n*u;return{previous:{x:r.x-h*(o.x-i.x),y:r.y-h*(o.y-i.y)},next:{x:r.x+d*(o.x-i.x),y:r.y+d*(o.y-i.y)}}}function gS(s,e,t){const n=s.length;let i,r,o,a,l,c=xi(s,0);for(let u=0;u<n-1;++u)if(l=c,c=xi(s,u+1),!(!l||!c)){if(rr(e[u],0,dS)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],r=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=r*o*e[u])}}function pS(s,e,t="x"){const n=ep(t),i=s.length;let r,o,a,l=xi(s,0);for(let c=0;c<i;++c){if(o=a,a=l,l=xi(s,c+1),!a)continue;const u=a[t],h=a[n];o&&(r=(u-o[t])/3,a[`cp1${t}`]=u-r,a[`cp1${n}`]=h-r*e[c]),l&&(r=(l[t]-u)/3,a[`cp2${t}`]=u+r,a[`cp2${n}`]=h+r*e[c])}}function mS(s,e="x"){const t=ep(e),n=s.length,i=Array(n).fill(0),r=Array(n);let o,a,l,c=xi(s,0);for(o=0;o<n;++o)if(a=l,l=c,c=xi(s,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[t]-l[t])/u:0}r[o]=a?c?ws(i[o-1])!==ws(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}gS(s,i,r),pS(s,r,e)}function Zr(s,e,t){return Math.max(Math.min(s,t),e)}function yS(s,e){let t,n,i,r,o,a=Ls(s[0],e);for(t=0,n=s.length;t<n;++t)o=r,r=a,a=t<n-1&&Ls(s[t+1],e),r&&(i=s[t],o&&(i.cp1x=Zr(i.cp1x,e.left,e.right),i.cp1y=Zr(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Zr(i.cp2x,e.left,e.right),i.cp2y=Zr(i.cp2y,e.top,e.bottom)))}function bS(s,e,t,n,i){let r,o,a,l;if(e.spanGaps&&(s=s.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")mS(s,i);else{let c=n?s[s.length-1]:s[0];for(r=0,o=s.length;r<o;++r)a=s[r],l=fS(c,a,s[Math.min(r+1,o-(n?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&yS(s,t)}function Lc(){return typeof window<"u"&&typeof document<"u"}function Fc(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wo(s,e,t){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=s,n}const ga=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function vS(s,e){return ga(s).getPropertyValue(e)}const _S=["top","right","bottom","left"];function $n(s,e,t){const n={};t=t?"-"+t:"";for(let i=0;i<4;i++){const r=_S[i];n[r]=parseFloat(s[e+"-"+r+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const wS=(s,e,t)=>(s>0||e>0)&&(!t||!t.shadowRoot);function xS(s,e){const t=s.touches,n=t&&t.length?t[0]:s,{offsetX:i,offsetY:r}=n;let o=!1,a,l;if(wS(i,r,s.target))a=i,l=r;else{const c=e.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function En(s,e){if("native"in s)return s;const{canvas:t,currentDevicePixelRatio:n}=e,i=ga(t),r=i.boxSizing==="border-box",o=$n(i,"padding"),a=$n(i,"border","width"),{x:l,y:c,box:u}=xS(s,t),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return r&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*t.width/n),y:Math.round((c-d)/g*t.height/n)}}function kS(s,e,t){let n,i;if(e===void 0||t===void 0){const r=s&&Fc(s);if(!r)e=s.clientWidth,t=s.clientHeight;else{const o=r.getBoundingClientRect(),a=ga(r),l=$n(a,"border","width"),c=$n(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,n=Wo(a.maxWidth,r,"clientWidth"),i=Wo(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:n||Fo,maxHeight:i||Fo}}const rn=s=>Math.round(s*10)/10;function SS(s,e,t,n){const i=ga(s),r=$n(i,"margin"),o=Wo(i.maxWidth,s,"clientWidth")||Fo,a=Wo(i.maxHeight,s,"clientHeight")||Fo,l=kS(s,e,t);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const d=$n(i,"border","width"),f=$n(i,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,n?c/n:u-r.height),c=rn(Math.min(c,o,l.maxWidth)),u=rn(Math.min(u,a,l.maxHeight)),c&&!u&&(u=rn(c/2)),(e!==void 0||t!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=rn(Math.floor(u*n))),{width:c,height:u}}function Ah(s,e,t){const n=e||1,i=rn(s.height*n),r=rn(s.width*n);s.height=rn(s.height),s.width=rn(s.width);const o=s.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||o.height!==i||o.width!==r?(s.currentDevicePixelRatio=n,o.height=i,o.width=r,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const ES=(function(){let s=!1;try{const e={get passive(){return s=!0,!1}};Lc()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s})();function Rh(s,e){const t=vS(s,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Tn(s,e,t,n){return{x:s.x+t*(e.x-s.x),y:s.y+t*(e.y-s.y)}}function TS(s,e,t,n){return{x:s.x+t*(e.x-s.x),y:n==="middle"?t<.5?s.y:e.y:n==="after"?t<1?s.y:e.y:t>0?e.y:s.y}}function PS(s,e,t,n){const i={x:s.cp2x,y:s.cp2y},r={x:e.cp1x,y:e.cp1y},o=Tn(s,i,t),a=Tn(i,r,t),l=Tn(r,e,t),c=Tn(o,a,t),u=Tn(a,l,t);return Tn(c,u,t)}const OS=function(s,e){return{x(t){return s+s+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},CS=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function gi(s,e,t){return s?OS(e,t):CS()}function tp(s,e){let t,n;(e==="ltr"||e==="rtl")&&(t=s.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),s.prevTextDirection=n)}function sp(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}function np(s){return s==="angle"?{between:Pr,compare:Ak,normalize:kt}:{between:Ns,compare:(e,t)=>e-t,normalize:e=>e}}function Mh({start:s,end:e,count:t,loop:n,style:i}){return{start:s%t,end:e%t,loop:n&&(e-s+1)%t===0,style:i}}function AS(s,e,t){const{property:n,start:i,end:r}=t,{between:o,normalize:a}=np(n),l=e.length;let{start:c,end:u,loop:h}=s,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][n]),i,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:s.style}}function ip(s,e,t){if(!t)return[s];const{property:n,start:i,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=np(n),{start:u,end:h,loop:d,style:f}=AS(s,e,t),g=[];let p=!1,m=null,y,b,v;const x=()=>l(i,v,y)&&a(i,v)!==0,T=()=>a(r,y)===0||l(r,v,y),C=()=>p||x(),A=()=>!p||T();for(let O=u,L=u;O<=h;++O)b=e[O%o],!b.skip&&(y=c(b[n]),y!==v&&(p=l(y,i,r),m===null&&C()&&(m=a(y,i)===0?O:L),m!==null&&A()&&(g.push(Mh({start:m,end:O,loop:d,count:o,style:f})),m=null),L=O,v=y));return m!==null&&g.push(Mh({start:m,end:h,loop:d,count:o,style:f})),g}function rp(s,e){const t=[],n=s.segments;for(let i=0;i<n.length;i++){const r=ip(n[i],s.points,e);r.length&&t.push(...r)}return t}function RS(s,e,t,n){let i=0,r=e-1;if(t&&!n)for(;i<e&&!s[i].skip;)i++;for(;i<e&&s[i].skip;)i++;for(i%=e,t&&(r+=i);r>i&&s[r%e].skip;)r--;return r%=e,{start:i,end:r}}function MS(s,e,t,n){const i=s.length,r=[];let o=e,a=s[e],l;for(l=e+1;l<=t;++l){const c=s[l%i];c.skip||c.stop?a.skip||(n=!1,r.push({start:e%i,end:(l-1)%i,loop:n}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%i,end:o%i,loop:n}),r}function DS(s,e){const t=s.points,n=s.options.spanGaps,i=t.length;if(!i)return[];const r=!!s._loop,{start:o,end:a}=RS(t,i,r,n);if(n===!0)return Dh(s,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+i:a,c=!!s._fullLoop&&o===0&&a===i-1;return Dh(s,MS(t,o,l,c),t,e)}function Dh(s,e,t,n){return!n||!n.setContext||!t?e:IS(s,e,t,n)}function IS(s,e,t,n){const i=s._chart.getContext(),r=Ih(s.options),{_datasetIndex:o,options:{spanGaps:a}}=s,l=t.length,c=[];let u=r,h=e[0].start,d=h;function f(g,p,m,y){const b=a?-1:1;if(g!==p){for(g+=l;t[g%l].skip;)g-=b;for(;t[p%l].skip;)p+=b;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:y}),u=y,h=p%l)}}for(const g of e){h=a?h:g.start;let p=t[h%l],m;for(d=h+1;d<=g.end;d++){const y=t[d%l];m=Ih(n.setContext(gn(i,{type:"segment",p0:p,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),NS(m,u)&&f(h,d-1,g.loop,u),p=y,u=m}h<d-1&&f(h,d-1,g.loop,u)}return c}function Ih(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function NS(s,e){if(!e)return!1;const t=[],n=function(i,r){return Mc(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(s,n)!==JSON.stringify(e,n)}function eo(s,e,t){return s.options.clip?s[t]:e[t]}function $S(s,e){const{xScale:t,yScale:n}=s;return t&&n?{left:eo(t,e,"left"),right:eo(t,e,"right"),top:eo(n,e,"top"),bottom:eo(n,e,"bottom")}:e}function op(s,e){const t=e._clip;if(t.disabled)return!1;const n=$S(e,s.chartArea);return{left:t.left===!1?0:n.left-(t.left===!0?0:t.left),right:t.right===!1?s.width:n.right+(t.right===!0?0:t.right),top:t.top===!1?0:n.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?s.height:n.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class LS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Vg.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ps=new LS;const Nh="transparent",FS={boolean(s,e,t){return t>.5?e:s},color(s,e,t){const n=Eh(s||Nh),i=n.valid&&Eh(e||Nh);return i&&i.valid?i.mix(n,t).hexString():e},number(s,e,t){return s+(e-s)*t}};class BS{constructor(e,t,n,i){const r=t[n];i=Ui([e.to,i,r,e.from]);const o=Ui([e.from,r,i]);this._active=!0,this._fn=e.fn||FS[e.type||typeof o],this._easing=or[e.easing]||or.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ui([e.to,t,i,e.from]),this._from=Ui([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<n),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=r;return}l=t/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class ap{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ee(e))return;const t=Object.keys(Ge.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Ee(r))return;const o={};for(const a of t)o[a]=r[a];(Ye(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,o)})})}_animateOptions(e,t){const n=t.options,i=jS(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&WS(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,t));continue}const u=t[c];let h=r[c];const d=n.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new BS(d,e,c,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return Ps.add(this._chart,n),!0}}function WS(s,e){const t=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const r=s[n[i]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function jS(s,e){if(!e)return;let t=s.options;if(!t){s.options=e;return}return t.$shared&&(s.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function $h(s,e){const t=s&&s.options||{},n=t.reverse,i=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:n?r:i,end:n?i:r}}function VS(s,e,t){if(t===!1)return!1;const n=$h(s,t),i=$h(e,t);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function US(s){let e,t,n,i;return Ee(s)?(e=s.top,t=s.right,n=s.bottom,i=s.left):e=t=n=i=s,{top:e,right:t,bottom:n,left:i,disabled:s===!1}}function lp(s,e){const t=[],n=s._getSortedDatasetMetas(e);let i,r;for(i=0,r=n.length;i<r;++i)t.push(n[i].index);return t}function Lh(s,e,t,n={}){const i=s.keys,r=n.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===t){if(u=!0,n.all)continue;break}c=s.values[l],et(c)&&(r||e===0||ws(e)===ws(c))&&(e+=c)}return!u&&!n.all?0:e}function HS(s,e){const{iScale:t,vScale:n}=e,i=t.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(s),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:s[u]};return a}function qa(s,e){const t=s&&s.options.stacked;return t||t===void 0&&e.stack!==void 0}function zS(s,e,t){return`${s.id}.${e.id}.${t.stack||t.type}`}function qS(s){const{min:e,max:t,minDefined:n,maxDefined:i}=s.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function YS(s,e,t){const n=s[e]||(s[e]={});return n[t]||(n[t]={})}function Fh(s,e,t,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const r=s[i.index];if(t&&r>0||!t&&r<0)return i.index}return null}function Bh(s,e){const{chart:t,_cachedMeta:n}=s,i=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,u=zS(r,o,n),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:p,[c]:m}=g,y=g._stacks||(g._stacks={});d=y[c]=YS(i,u,p),d[a]=m,d._top=Fh(d,o,!0,n.type),d._bottom=Fh(d,o,!1,n.type);const b=d._visualValues||(d._visualValues={});b[a]=m}}function Ya(s,e){const t=s.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function GS(s,e){return gn(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function KS(s,e,t){return gn(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ci(s,e){const t=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){e=e||s._parsed;for(const i of e){const r=i._stacks;if(!r||r[n]===void 0||r[n][t]===void 0)return;delete r[n][t],r[n]._visualValues!==void 0&&r[n]._visualValues[t]!==void 0&&delete r[n]._visualValues[t]}}}const Ga=s=>s==="reset"||s==="none",Wh=(s,e)=>e?s:Object.assign({},s),JS=(s,e,t)=>s&&!e.hidden&&e._stacked&&{keys:lp(t,!0),values:null};class as{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qa(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ci(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,r=t.xAxisID=de(n.xAxisID,Ya(e,"x")),o=t.yAxisID=de(n.yAxisID,Ya(e,"y")),a=t.rAxisID=de(n.rAxisID,Ya(e,"r")),l=t.indexAxis,c=t.iAxisID=i(l,r,o,a),u=t.vAxisID=i(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&xh(this._data,this),e._stacked&&Ci(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Ee(t)){const i=this._cachedMeta;this._data=HS(t,i)}else if(n!==t){if(n){xh(n,this);const i=this._cachedMeta;Ci(i),i._parsed=[]}t&&Object.isExtensible(t)&&Ik(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=qa(t.vScale,t),t.stack!==n.stack&&(i=!0,Ci(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(Bh(this,t._parsed),t._stacked=qa(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let l=e===0&&t===i.length?!0:n._sorted,c=e>0&&n._parsed[e-1],u,h,d;if(this._parsing===!1)n._parsed=i,n._sorted=!0,d=i;else{Ye(i[e])?d=this.parseArrayData(n,i,e,t):Ee(i[e])?d=this.parseObjectData(n,i,e,t):d=this.parsePrimitiveData(n,i,e,t);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<t;++u)n._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);n._sorted=l}o&&Bh(this,d)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(i);let d,f,g;for(d=0,f=i;d<f;++d)g=d+n,h[d]={[a]:u||r.parse(c[g],g),[l]:o.parse(t[g],g)};return h}parseArrayData(e,t,n,i){const{xScale:r,yScale:o}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+n,h=t[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,t,n,i){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,d,f;for(u=0,h=i;u<h;++u)d=u+n,f=t[d],c[u]={x:r.parse(un(f,a),d),y:o.parse(un(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:lp(i,!0),values:t._stacks[e.axis]._visualValues};return Lh(a,o,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let o=r===null?NaN:r;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,o=Lh(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,o=i.length,a=this._getOtherScale(e),l=JS(t,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=qS(a);let d,f;function g(){f=i[d];const p=f[a.axis];return!et(f[e.axis])||u>p||h<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=t.length;i<r;++i)o=t[i][e.axis],et(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=US(de(this.options.clip,VS(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=KS(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=GS(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const i=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&Tr(n);if(a)return Wh(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Ge.elements[e]),g=()=>this.getContext(n,i,t),p=c.resolveNamedOptions(d,f,g,h);return p.$shared&&(p.$shared=l,r[o]=Object.freeze(Wh(p,l))),p}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,n,t))}const c=new ap(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ga(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:o}}updateElement(e,t,n,i){Ga(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!Ga(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=n.length,r=t.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t,n=!0){const i=this._cachedMeta,r=i.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&Ci(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}S(as,"defaults",{}),S(as,"datasetElementType",null),S(as,"dataElementType",null);function XS(s,e){if(!s._cache.$bar){const t=s.getMatchingVisibleMetas(e);let n=[];for(let i=0,r=t.length;i<r;i++)n=n.concat(t[i].controller.getAllParsedValues(s));s._cache.$bar=jg(n.sort((i,r)=>i-r))}return s._cache.$bar}function QS(s){const e=s.iScale,t=XS(e,s.type);let n=e._length,i,r,o,a;const l=()=>{o===32767||o===-32768||(Tr(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(i=0,r=t.length;i<r;++i)o=e.getPixelForValue(t[i]),l();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),l();return n}function ZS(s,e,t,n){const i=t.barThickness;let r,o;return Se(i)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=i*n,o=1),{chunk:r/n,ratio:o,start:e.pixels[s]-r/2}}function eE(s,e,t,n){const i=e.pixels,r=i[s];let o=s>0?i[s-1]:null,a=s<i.length-1?i[s+1]:null;const l=t.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:t.barPercentage,start:c}}function tE(s,e,t,n){const i=t.parse(s[0],n),r=t.parse(s[1],n),o=Math.min(i,r),a=Math.max(i,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:r,min:o,max:a}}function cp(s,e,t,n){return Ye(s)?tE(s,e,t,n):e[t.axis]=t.parse(s,n),e}function jh(s,e,t,n){const i=s.iScale,r=s.vScale,o=i.getLabels(),a=i===r,l=[];let c,u,h,d;for(c=t,u=t+n;c<u;++c)d=e[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(cp(d,h,r,c));return l}function Ka(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function sE(s,e,t){return s!==0?ws(s):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function nE(s){let e,t,n,i,r;return s.horizontal?(e=s.base>s.x,t="left",n="right"):(e=s.base<s.y,t="bottom",n="top"),e?(i="end",r="start"):(i="start",r="end"),{start:t,end:n,reverse:e,top:i,bottom:r}}function iE(s,e,t,n){let i=e.borderSkipped;const r={};if(!i){s.borderSkipped=r;return}if(i===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=nE(s);i==="middle"&&t&&(s.enableBorderRadius=!0,(t._top||0)===n?i=c:(t._bottom||0)===n?i=u:(r[Vh(u,o,a,l)]=!0,i=c)),r[Vh(i,o,a,l)]=!0,s.borderSkipped=r}function Vh(s,e,t,n){return n?(s=rE(s,e,t),s=Uh(s,t,e)):s=Uh(s,e,t),s}function rE(s,e,t){return s===e?t:s===t?e:s}function Uh(s,e,t){return s==="start"?e:s==="end"?t:s}function oE(s,{inflateAmount:e},t){s.inflateAmount=e==="auto"?t===1?.33:0:e}class yo extends as{parsePrimitiveData(e,t,n,i){return jh(e,t,n,i)}parseArrayData(e,t,n,i){return jh(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,g,p;for(d=n,f=n+i;d<f;++d)p=t[d],g={},g[r.axis]=r.parse(un(p,c),d),h.push(cp(un(p,u),g,o,d));return h}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),o=r._custom,a=Ka(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,i);for(let f=t;f<t+n;f++){const g=this.getParsed(f),p=r||Se(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),y=(g._stacks||{})[a.axis],b={horizontal:c,base:p.base,enableBorderRadius:!y||Ka(g._custom)||o===y._top||o===y._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(b.options=h||this.resolveDataElementOptions(f,e[f].active?"active":i));const v=b.options||e[f].options;iE(b,v,y,o),oE(b,v,u.ratio),this.updateElement(e[f],f,b,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[n.axis],c=u=>{const h=u._parsed.find(f=>f[n.axis]===l),d=h&&h[u.vScale.axis];if(Se(d)||isNaN(d))return!0};for(const u of i)if(!(t!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[de(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=t!==void 0?i.indexOf(t):-1;return r===-1?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,o;for(r=0,o=t.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||QS(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=Ka(c);let h=l[t.axis],d=0,f=n?this.applyStack(t,l,n):h,g,p;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&ws(h)!==ws(c.barEnd)&&(d=0),d+=h);const m=!Se(r)&&!u?r:d;let y=t.getPixelForValue(m);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(d+f):g=y,p=g-y,Math.abs(p)<o){p=sE(p,t,a)*o,h===a&&(y-=p/2);const b=t.getPixelForDecimal(0),v=t.getPixelForDecimal(1),x=Math.min(b,v),T=Math.max(b,v);y=Math.max(Math.min(y,T),x),g=y+p,n&&!u&&(l._stacks[t.axis]._visualValues[i]=t.getValueForPixel(g)-t.getValueForPixel(y))}if(y===t.getPixelForValue(a)){const b=ws(p)*t.getLineWidthForValue(a)/2;y+=b,p-=b}return{size:p,base:y,head:g,center:g+p/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,o=de(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(t.grouped){const u=r?this._getStackCount(e):t.stackCount,h=i.barThickness==="flex"?eE(e,t,i,u*c):ZS(e,t,i,u*c),d=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(de(d,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+f;a=h.start+h.chunk*g+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)this.getParsed(r)[t.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}S(yo,"id","bar"),S(yo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),S(yo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class bo extends as{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let o=0;o<r.length;o++){const a=t[n+o];r[o]._custom=de(a[2],this.resolveDataElementOptions(o+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let o=0;o<r.length;o++){const a=t[n+o];r[o]._custom=de(a&&a.r&&+a.r,this.resolveDataElementOptions(o+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:n[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,i),u=o.axis,h=a.axis;for(let d=t;d<t+n;d++){const f=e[d],g=!r&&this.getParsed(d),p={},m=p[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),y=p[h]=r?a.getBasePixel():a.getPixelForValue(g[h]);p.skip=isNaN(m)||isNaN(y),c&&(p.options=l||this.resolveDataElementOptions(d,f.active?"active":i),r&&(p.options.radius=0)),this.updateElement(f,d,p,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return t!=="active"&&(i.radius=0),i.radius+=de(n&&n._custom,r),i}}S(bo,"id","bubble"),S(bo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),S(bo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function aE(s,e,t){let n=1,i=1,r=0,o=0;if(e<He){const a=s,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(v,x,T)=>Pr(v,a,l,!0)?1:Math.max(x,x*t,T,T*t),g=(v,x,T)=>Pr(v,a,l,!0)?-1:Math.min(x,x*t,T,T*t),p=f(0,c,h),m=f(it,u,d),y=g(Oe,c,h),b=g(Oe+it,u,d);n=(p-y)/2,i=(m-b)/2,r=-(p+y)/2,o=-(m+b)/2}return{ratioX:n,ratioY:i,offsetX:r,offsetY:o}}class Mn extends as{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let r=l=>+n[l];if(Ee(n[e])){const{key:l="value"}=this._parsing;r=c=>+un(n[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return ns(this.options.rotation-90)}_getCircumference(){return ns(this.options.circumference)}_getRotationExtents(){let e=He,t=-He;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(vk(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:p}=aE(h,u,l),m=(n.width-o)/d,y=(n.height-o)/f,b=Math.max(Math.min(m,y)/2,0),v=$g(this.options.radius,b),x=Math.max(v*l,0),T=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=p*v,i.total=this.calculateTotal(),this.outerRadius=v-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/He)}updateElements(e,t,n,i){const r=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=r&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,i);let y=this._getRotation(),b;for(b=0;b<t;++b)y+=this._circumference(b,r);for(b=t;b<t+n;++b){const v=this._circumference(b,r),x=e[b],T={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:g,innerRadius:f};m&&(T.options=p||this.resolveDataElementOptions(b,x.active?"active":i)),y+=v,this.updateElement(x,b,T,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n=0,i;for(i=0;i<t.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?He*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Lr(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,o,a,l;if(!e){for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const r=this.resolveDataElementOptions(n);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(de(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}S(Mn,"id","doughnut"),S(Mn,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),S(Mn,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),S(Mn,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:i,pointStyle:n,borderRadius:o&&(a||h.borderRadius),index:c}}):[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class vo extends as{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=Hg(t,i,o);this._drawStart=a,this._drawCount=l,zg(t)&&(a=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,t,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i),d=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=_i(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||i==="none",b=t+n,v=e.length;let x=t>0&&this.getParsed(t-1);for(let T=0;T<v;++T){const C=e[T],A=y?C:{};if(T<t||T>=b){A.skip=!0;continue}const O=this.getParsed(T),L=Se(O[f]),Y=A[d]=o.getPixelForValue(O[d],T),Z=A[f]=r||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[f],T);A.skip=isNaN(Y)||isNaN(Z)||L,A.stop=T>0&&Math.abs(O[d]-x[d])>m,p&&(A.parsed=O,A.raw=c.data[T]),h&&(A.options=u||this.resolveDataElementOptions(T,C.active?"active":i)),y||this.updateElement(C,T,A,i),x=O}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}S(vo,"id","line"),S(vo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),S(vo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class lr extends as{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Lr(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return Zg.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),o=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,i){const r=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*Oe;let f=d,g;const p=360/this.countVisibleElements();for(g=0;g<t;++g)f+=this._computeAngle(g,i,p);for(g=t;g<t+n;g++){const m=e[g];let y=f,b=f+this._computeAngle(g,i,p),v=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=b,r&&(l.animateScale&&(v=0),l.animateRotate&&(y=b=d));const x={x:u,y:h,innerRadius:0,outerRadius:v,startAngle:y,endAngle:b,options:this.resolveDataElementOptions(g,m.active?"active":i)};this.updateElement(m,g,x,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?ns(this.resolveDataElementOptions(e,t).angle||n):0}}S(lr,"id","polarArea"),S(lr,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),S(lr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $l extends Mn{}S($l,"id","pie"),S($l,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class _o extends as{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return Zg.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(n,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=t;a<t+n;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,d=o?r.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,i)}}}S(_o,"id","radar"),S(_o,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),S(_o,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class wo extends as{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:o}=Hg(t,n,i);if(this._drawStart=r,this._drawCount=o,zg(t)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,i),h=this.getSharedOptions(u),d=this.includeOptions(i,h),f=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,y=_i(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||i==="none";let v=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const T=e[x],C=this.getParsed(x),A=b?T:{},O=Se(C[g]),L=A[f]=o.getPixelForValue(C[f],x),Y=A[g]=r||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[g],x);A.skip=isNaN(L)||isNaN(Y)||O,A.stop=x>0&&Math.abs(C[f]-v[f])>y,m&&(A.parsed=C,A.raw=c.data[x]),d&&(A.options=h||this.resolveDataElementOptions(x,T.active?"active":i)),b||this.updateElement(T,x,A,i),v=C}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,o)/2}}S(wo,"id","scatter"),S(wo,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),S(wo,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var lE=Object.freeze({__proto__:null,BarController:yo,BubbleController:bo,DoughnutController:Mn,LineController:vo,PieController:$l,PolarAreaController:lr,RadarController:_o,ScatterController:wo});function wn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Bc{constructor(e){S(this,"options");this.options=e||{}}static override(e){Object.assign(Bc.prototype,e)}init(){}formats(){return wn()}parse(){return wn()}format(){return wn()}add(){return wn()}diff(){return wn()}startOf(){return wn()}endOf(){return wn()}}var up={_date:Bc};function cE(s,e,t,n){const{controller:i,data:r,_sorted:o}=s,a=i._cachedMeta.iScale,l=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?Mk:$s;if(n){if(i._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const d=c(r,e,t-h),f=c(r,e,t+h);return{lo:d.lo,hi:f.hi}}}}else{const u=c(r,e,t);if(l){const{vScale:h}=i._cachedMeta,{_parsed:d}=s,f=d.slice(0,u.lo+1).reverse().findIndex(p=>!Se(p[h.axis]));u.lo-=Math.max(0,f);const g=d.slice(u.hi).findIndex(p=>!Se(p[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:r.length-1}}function pa(s,e,t,n,i){const r=s.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=cE(r[a],e,o,i);for(let f=h;f<=d;++f){const g=u[f];g.skip||n(g,c,f)}}}function uE(s){const e=s.indexOf("x")!==-1,t=s.indexOf("y")!==-1;return function(n,i){const r=e?Math.abs(n.x-i.x):0,o=t?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ja(s,e,t,n,i){const r=[];return!i&&!s.isPointInArea(e)||pa(s,t,e,function(a,l,c){!i&&!Ls(a,s.chartArea,0)||a.inRange(e.x,e.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function hE(s,e,t,n){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:h}=Bg(o,{x:e.x,y:e.y});Pr(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return pa(s,t,e,r),i}function dE(s,e,t,n,i,r){let o=[];const a=uE(t);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,i);if(n&&!f)return;const g=u.getCenterPoint(i);if(!(!!r||s.isPointInArea(g))&&!f)return;const m=a(e,g);m<l?(o=[{element:u,datasetIndex:h,index:d}],l=m):m===l&&o.push({element:u,datasetIndex:h,index:d})}return pa(s,t,e,c),o}function Xa(s,e,t,n,i,r){return!r&&!s.isPointInArea(e)?[]:t==="r"&&!n?hE(s,e,t,i):dE(s,e,t,n,i,r)}function Hh(s,e,t,n,i){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return pa(s,t,e,(l,c,u)=>{l[o]&&l[o](e[t],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),n&&!a?[]:r}var fE={modes:{index(s,e,t,n){const i=En(e,s),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Ja(s,i,r,n,o):Xa(s,i,r,!1,n,o),l=[];return a.length?(s.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(s,e,t,n){const i=En(e,s),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?Ja(s,i,r,n,o):Xa(s,i,r,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,c=s.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(s,e,t,n){const i=En(e,s),r=t.axis||"xy",o=t.includeInvisible||!1;return Ja(s,i,r,n,o)},nearest(s,e,t,n){const i=En(e,s),r=t.axis||"xy",o=t.includeInvisible||!1;return Xa(s,i,r,t.intersect,n,o)},x(s,e,t,n){const i=En(e,s);return Hh(s,i,"x",t.intersect,n)},y(s,e,t,n){const i=En(e,s);return Hh(s,i,"y",t.intersect,n)}}};const hp=["left","top","right","bottom"];function Ai(s,e){return s.filter(t=>t.pos===e)}function zh(s,e){return s.filter(t=>hp.indexOf(t.pos)===-1&&t.box.axis===e)}function Ri(s,e){return s.sort((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function gE(s){const e=[];let t,n,i,r,o,a;for(t=0,n=(s||[]).length;t<n;++t)i=s[t],{position:r,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return e}function pE(s){const e={};for(const t of s){const{stack:n,pos:i,stackWeight:r}=t;if(!n||!hp.includes(i))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function mE(s,e){const t=pE(s),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let r,o,a;for(r=0,o=s.length;r<o;++r){a=s[r];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&e.availableWidth,a.height=i):(a.width=n,a.height=u?u*i:l&&e.availableHeight)}return t}function yE(s){const e=gE(s),t=Ri(e.filter(c=>c.box.fullSize),!0),n=Ri(Ai(e,"left"),!0),i=Ri(Ai(e,"right")),r=Ri(Ai(e,"top"),!0),o=Ri(Ai(e,"bottom")),a=zh(e,"x"),l=zh(e,"y");return{fullSize:t,leftAndTop:n.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Ai(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function qh(s,e,t,n){return Math.max(s[t],e[t])+Math.max(s[n],e[n])}function dp(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function bE(s,e,t,n){const{pos:i,box:r}=t,o=s.maxPadding;if(!Ee(i)){t.size&&(s[i]-=t.size);const h=n[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?r.height:r.width),t.size=h.size/h.count,s[i]+=t.size}r.getPadding&&dp(o,r.getPadding());const a=Math.max(0,e.outerWidth-qh(o,s,"left","right")),l=Math.max(0,e.outerHeight-qh(o,s,"top","bottom")),c=a!==s.w,u=l!==s.h;return s.w=a,s.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function vE(s){const e=s.maxPadding;function t(n){const i=Math.max(e[n]-s[n],0);return s[n]+=i,i}s.y+=t("top"),s.x+=t("left"),t("right"),t("bottom")}function _E(s,e){const t=e.maxPadding;function n(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return n(s?["left","right"]:["top","bottom"])}function Hi(s,e,t,n){const i=[];let r,o,a,l,c,u;for(r=0,o=s.length,c=0;r<o;++r){a=s[r],l=a.box,l.update(a.width||e.w,a.height||e.h,_E(a.horizontal,e));const{same:h,other:d}=bE(e,t,a,n);c|=h&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&Hi(i,e,t,n)||u}function to(s,e,t,n,i){s.top=t,s.left=e,s.right=e+n,s.bottom=t+i,s.width=n,s.height=i}function Yh(s,e,t,n){const i=t.padding;let{x:r,y:o}=e;for(const a of s){const l=a.box,c=n[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Tr(c.start)&&(o=c.start),l.fullSize?to(l,i.left,o,t.outerWidth-i.right-i.left,d):to(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Tr(c.start)&&(r=c.start),l.fullSize?to(l,r,i.top,d,t.outerHeight-i.bottom-i.top):to(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var Pt={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},s.boxes.push(e)},removeBox(s,e){const t=s.boxes?s.boxes.indexOf(e):-1;t!==-1&&s.boxes.splice(t,1)},configure(s,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(s,e,t,n){if(!s)return;const i=At(s.options.layout.padding),r=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=yE(s.boxes),l=a.vertical,c=a.horizontal;$e(s.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);dp(d,At(n));const f=Object.assign({maxPadding:d,w:r,h:o,x:i.left,y:i.top},i),g=mE(l.concat(c),h);Hi(a.fullSize,f,h,g),Hi(l,f,h,g),Hi(c,f,h,g)&&Hi(l,f,h,g),vE(f),Yh(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,Yh(a.rightAndBottom,f,h,g),s.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},$e(a.chartArea,p=>{const m=p.box;Object.assign(m,s.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class fp{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class wE extends fp{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xo="$chartjs",xE={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Gh=s=>s===null||s==="";function kE(s,e){const t=s.style,n=s.getAttribute("height"),i=s.getAttribute("width");if(s[xo]={initial:{height:n,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Gh(i)){const r=Rh(s,"width");r!==void 0&&(s.width=r)}if(Gh(n))if(s.style.height==="")s.height=s.width/(e||2);else{const r=Rh(s,"height");r!==void 0&&(s.height=r)}return s}const gp=ES?{passive:!0}:!1;function SE(s,e,t){s&&s.addEventListener(e,t,gp)}function EE(s,e,t){s&&s.canvas&&s.canvas.removeEventListener(e,t,gp)}function TE(s,e){const t=xE[s.type]||s.type,{x:n,y:i}=En(s,e);return{type:t,chart:e,native:s,x:n!==void 0?n:null,y:i!==void 0?i:null}}function jo(s,e){for(const t of s)if(t===e||t.contains(e))return!0}function PE(s,e,t){const n=s.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||jo(a.addedNodes,n),o=o&&!jo(a.removedNodes,n);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function OE(s,e,t){const n=s.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||jo(a.removedNodes,n),o=o&&!jo(a.addedNodes,n);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Cr=new Map;let Kh=0;function pp(){const s=window.devicePixelRatio;s!==Kh&&(Kh=s,Cr.forEach((e,t)=>{t.currentDevicePixelRatio!==s&&e()}))}function CE(s,e){Cr.size||window.addEventListener("resize",pp),Cr.set(s,e)}function AE(s){Cr.delete(s),Cr.size||window.removeEventListener("resize",pp)}function RE(s,e,t){const n=s.canvas,i=n&&Fc(n);if(!i)return;const r=Ug((a,l)=>{const c=i.clientWidth;t(a,l),c<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),CE(s,r),o}function Qa(s,e,t){t&&t.disconnect(),e==="resize"&&AE(s)}function ME(s,e,t){const n=s.canvas,i=Ug(r=>{s.ctx!==null&&t(TE(r,s))},s);return SE(n,e,i),i}class DE extends fp{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(kE(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[xo])return!1;const n=t[xo].initial;["height","width"].forEach(r=>{const o=n[r];Se(o)?t.removeAttribute(r):t.setAttribute(r,o)});const i=n.style||{};return Object.keys(i).forEach(r=>{t.style[r]=i[r]}),t.width=t.width,delete t[xo],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:PE,detach:OE,resize:RE}[t]||ME;i[t]=o(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Qa,detach:Qa,resize:Qa}[t]||EE)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return SS(e,t,n,i)}isAttached(e){const t=e&&Fc(e);return!!(t&&t.isConnected)}}function IE(s){return!Lc()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?wE:DE}var uo;let Ys=(uo=class{constructor(){S(this,"x");S(this,"y");S(this,"active",!1);S(this,"options");S(this,"$animations")}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return _i(this.x)&&_i(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(r=>{i[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),i}},S(uo,"defaults",{}),S(uo,"defaultRoutes"),uo);function NE(s,e){const t=s.options.ticks,n=$E(s),i=Math.min(t.maxTicksLimit||n,n),r=t.major.enabled?FE(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return BE(e,c,r,o/i),c;const u=LE(r,e,i);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(so(e,c,u,Se(f)?0:a-f,a),h=0,d=o-1;h<d;h++)so(e,c,u,r[h],r[h+1]);return so(e,c,u,l,Se(f)?e.length:l+f),c}return so(e,c,u),c}function $E(s){const e=s.options.offset,t=s._tickSize(),n=s._length/t+(e?0:1),i=s._maxLength/t;return Math.floor(Math.min(n,i))}function LE(s,e,t){const n=WE(s),i=e.length/t;if(!n)return Math.max(i,1);const r=Pk(n);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function FE(s){const e=[];let t,n;for(t=0,n=s.length;t<n;t++)s[t].major&&e.push(t);return e}function BE(s,e,t,n){let i=0,r=t[0],o;for(n=Math.ceil(n),o=0;o<s.length;o++)o===r&&(e.push(s[o]),i++,r=t[i*n])}function so(s,e,t,n,i){const r=de(n,0),o=Math.min(de(i,s.length),s.length);let a=0,l,c,u;for(t=Math.ceil(t),i&&(l=i-n,t=l/Math.floor(l/t)),u=r;u<0;)a++,u=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(s[c]),a++,u=Math.round(r+a*t))}function WE(s){const e=s.length;let t,n;if(e<2)return!1;for(n=s[0],t=1;t<e;++t)if(s[t]-s[t-1]!==n)return!1;return n}const jE=s=>s==="left"?"right":s==="right"?"left":s,Jh=(s,e,t)=>e==="top"||e==="left"?s[e]+t:s[e]-t,Xh=(s,e)=>Math.min(e||s,s);function Qh(s,e){const t=[],n=s.length/e,i=s.length;let r=0;for(;r<i;r+=n)t.push(s[Math.floor(r)]);return t}function VE(s,e,t){const n=s.ticks.length,i=Math.min(e,n-1),r=s._startPixel,o=s._endPixel,a=1e-6;let l=s.getPixelForTick(i),c;if(!(t&&(n===1?c=Math.max(l-r,o-l):e===0?c=(s.getPixelForTick(1)-l)/2:c=(l-s.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<r-a||l>o+a)))return l}function UE(s,e){$e(s,t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}})}function Mi(s){return s.drawTicks?s.tickLength:0}function Zh(s,e){if(!s.display)return 0;const t=gt(s.font,e),n=At(s.padding);return(Ye(s.text)?s.text.length:1)*t.lineHeight+n.height}function HE(s,e){return gn(s,{scale:e,type:"scale"})}function zE(s,e,t){return gn(s,{tick:t,index:e,type:"tick"})}function qE(s,e,t){let n=Rc(s);return(t&&e!=="right"||!t&&e==="right")&&(n=jE(n)),n}function YE(s,e,t,n){const{top:i,left:r,bottom:o,right:a,chart:l}=s,{chartArea:c,scales:u}=l;let h=0,d,f,g;const p=o-i,m=a-r;if(s.isHorizontal()){if(f=xt(n,r,a),Ee(t)){const y=Object.keys(t)[0],b=t[y];g=u[y].getPixelForValue(b)+p-e}else t==="center"?g=(c.bottom+c.top)/2+p-e:g=Jh(s,t,e);d=a-r}else{if(Ee(t)){const y=Object.keys(t)[0],b=t[y];f=u[y].getPixelForValue(b)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=Jh(s,t,e);g=xt(n,o,i),h=t==="left"?-it:it}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class Bn extends Ys{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Ht(e,Number.POSITIVE_INFINITY),t=Ht(t,Number.NEGATIVE_INFINITY),n=Ht(n,Number.POSITIVE_INFINITY),i=Ht(i,Number.NEGATIVE_INFINITY),{min:Ht(e,n),max:Ht(t,i),minDefined:et(e),maxDefined:et(t)}}getMinMax(e){let{min:t,max:n,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:t,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),r||(n=Math.max(n,o.max));return t=r&&t>n?n:t,n=i&&t>n?t:n,{min:Ht(t,Ht(n,t)),max:Ht(n,Ht(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ue(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=sS(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Qh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=NE(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ue(this.options.afterUpdate,[this])}beforeSetDimensions(){Ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ue(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ue(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Ue(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Xh(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=bt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:f/(n-1),h+6>a&&(a=f/(n-(e.offset?.5:1)),l=this.maxHeight-Mi(e.grid)-t.padding-Zh(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=Cc(Math.min(Math.asin(bt((u.highest.height+6)/a,-1,1)),Math.asin(bt(l/c,-1,1))-Math.asin(bt(d/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ue(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ue(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Zh(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Mi(r)+l):(e.height=this.maxHeight,e.width=Mi(r)+l),n.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=n.padding*2,g=ns(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const y=n.mirror?0:m*h.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=n.mirror?0:p*h.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=i*e.width,f=n*t.height):(d=n*e.height,f=i*t.width):r==="start"?f=t.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ue(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)Se(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Qh(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/Xh(t,n));let c=0,u=0,h,d,f,g,p,m,y,b,v,x,T;for(h=0;h<t;h+=l){if(g=e[h].label,p=this._resolveTickFontOptions(h),i.font=m=p.string,y=r[m]=r[m]||{data:{},gc:[]},b=p.lineHeight,v=x=0,!Se(g)&&!Ye(g))v=Bo(i,y.data,y.gc,v,g),x=b;else if(Ye(g))for(d=0,f=g.length;d<f;++d)T=g[d],!Se(T)&&!Ye(T)&&(v=Bo(i,y.data,y.gc,v,T),x+=b);o.push(v),a.push(x),c=Math.max(v,c),u=Math.max(x,u)}UE(r,t);const C=o.indexOf(c),A=a.indexOf(u),O=L=>({width:o[L]||0,height:a[L]||0});return{first:O(0),last:O(t-1),widest:O(C),highest:O(A),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Rk(this._alignToPixels?_n(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=zE(this.getContext(),e,n))}return this.$context||(this.$context=HE(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ns(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*i?a/n:l/i:l*i<a*n?l/n:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Mi(r),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,y=function(Q){return _n(n,Q,p)};let b,v,x,T,C,A,O,L,Y,Z,q,we;if(o==="top")b=y(this.bottom),A=this.bottom-d,L=b-m,Z=y(e.top)+m,we=e.bottom;else if(o==="bottom")b=y(this.top),Z=e.top,we=y(e.bottom)-m,A=b+m,L=this.top+d;else if(o==="left")b=y(this.right),C=this.right-d,O=b-m,Y=y(e.left)+m,q=e.right;else if(o==="right")b=y(this.left),Y=e.left,q=y(e.right)-m,C=b+m,O=this.left+d;else if(t==="x"){if(o==="center")b=y((e.top+e.bottom)/2+.5);else if(Ee(o)){const Q=Object.keys(o)[0],J=o[Q];b=y(this.chart.scales[Q].getPixelForValue(J))}Z=e.top,we=e.bottom,A=b+m,L=A+d}else if(t==="y"){if(o==="center")b=y((e.left+e.right)/2);else if(Ee(o)){const Q=Object.keys(o)[0],J=o[Q];b=y(this.chart.scales[Q].getPixelForValue(J))}C=b-m,O=C-d,Y=e.left,q=e.right}const Be=de(i.ticks.maxTicksLimit,h),ce=Math.max(1,Math.ceil(h/Be));for(v=0;v<h;v+=ce){const Q=this.getContext(v),J=r.setContext(Q),ee=a.setContext(Q),ye=J.lineWidth,Xe=J.color,le=ee.dash||[],be=ee.dashOffset,Ce=J.tickWidth,Le=J.tickColor,lt=J.tickBorderDash||[],qe=J.tickBorderDashOffset;x=VE(this,v,l),x!==void 0&&(T=_n(n,x,ye),c?C=O=Y=q=T:A=L=Z=we=T,f.push({tx1:C,ty1:A,tx2:O,ty2:L,x1:Y,y1:Z,x2:q,y2:we,width:ye,color:Xe,borderDash:le,borderDashOffset:be,tickWidth:Ce,tickColor:Le,tickBorderDash:lt,tickBorderDashOffset:qe}))}return this._ticksLength=h,this._borderValue=b,f}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=Mi(n.grid),f=d+u,g=h?-u:f,p=-ns(this.labelRotation),m=[];let y,b,v,x,T,C,A,O,L,Y,Z,q,we="middle";if(i==="top")C=this.bottom-g,A=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+g,A=this._getXAxisLabelAlignment();else if(i==="left"){const ce=this._getYAxisLabelAlignment(d);A=ce.textAlign,T=ce.x}else if(i==="right"){const ce=this._getYAxisLabelAlignment(d);A=ce.textAlign,T=ce.x}else if(t==="x"){if(i==="center")C=(e.top+e.bottom)/2+f;else if(Ee(i)){const ce=Object.keys(i)[0],Q=i[ce];C=this.chart.scales[ce].getPixelForValue(Q)+f}A=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")T=(e.left+e.right)/2-f;else if(Ee(i)){const ce=Object.keys(i)[0],Q=i[ce];T=this.chart.scales[ce].getPixelForValue(Q)}A=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?we="top":l==="end"&&(we="bottom"));const Be=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){v=a[y],x=v.label;const ce=r.setContext(this.getContext(y));O=this.getPixelForTick(y)+r.labelOffset,L=this._resolveTickFontOptions(y),Y=L.lineHeight,Z=Ye(x)?x.length:1;const Q=Z/2,J=ce.color,ee=ce.textStrokeColor,ye=ce.textStrokeWidth;let Xe=A;o?(T=O,A==="inner"&&(y===b-1?Xe=this.options.reverse?"left":"right":y===0?Xe=this.options.reverse?"right":"left":Xe="center"),i==="top"?c==="near"||p!==0?q=-Z*Y+Y/2:c==="center"?q=-Be.highest.height/2-Q*Y+Y:q=-Be.highest.height+Y/2:c==="near"||p!==0?q=Y/2:c==="center"?q=Be.highest.height/2-Q*Y:q=Be.highest.height-Z*Y,h&&(q*=-1),p!==0&&!ce.showLabelBackdrop&&(T+=Y/2*Math.sin(p))):(C=O,q=(1-Z)*Y/2);let le;if(ce.showLabelBackdrop){const be=At(ce.backdropPadding),Ce=Be.heights[y],Le=Be.widths[y];let lt=q-be.top,qe=0-be.left;switch(we){case"middle":lt-=Ce/2;break;case"bottom":lt-=Ce;break}switch(A){case"center":qe-=Le/2;break;case"right":qe-=Le;break;case"inner":y===b-1?qe-=Le:y>0&&(qe-=Le/2);break}le={left:qe,top:lt,width:Le+be.width,height:Ce+be.height,color:ce.backdropColor}}m.push({label:x,font:L,textOffset:q,options:{rotation:p,color:J,strokeColor:ee,strokeWidth:ye,textAlign:Xe,textBaseline:we,translation:[T,C],backdrop:le}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ns(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return t==="left"?i?(u=this.right+r,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?i?(u=this.left+r,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(t.display)for(r=0,o=i.length;r<o;++r){const l=i[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=_n(e,this.left,o)-o/2,u=_n(e,this.right,a)+a/2,h=d=l):(h=_n(e,this.top,o)-o/2,d=_n(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,h),t.lineTo(u,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&da(n,i);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Fn(n,c,0,u,l,a)}i&&fa(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=gt(n.font),o=At(n.padding),a=n.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||Ee(t)?(l+=o.bottom,Ye(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=YE(this,l,t,a);Fn(e,n.text,0,0,r,{color:n.color,maxWidth:h,rotation:d,textAlign:qE(a,t,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=de(e.grid&&e.grid.z,-1),i=de(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Bn.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[n]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return gt(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class no{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;JE(t)&&(n=this.register(t));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,GE(e,o,n),this.override&&Ge.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Ge[i]&&(delete Ge[i][n],this.override&&delete Ln[n])}}function GE(s,e,t){const n=Er(Object.create(null),[t?Ge.get(t):{},Ge.get(e),s.defaults]);Ge.set(e,n),s.defaultRoutes&&KE(e,s.defaultRoutes),s.descriptors&&Ge.describe(e,s.descriptors)}function KE(s,e){Object.keys(e).forEach(t=>{const n=t.split("."),i=n.pop(),r=[s].concat(n).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Ge.route(r,i,l,a)})}function JE(s){return"id"in s&&"defaults"in s}class XE{constructor(){this.controllers=new no(as,"datasets",!0),this.elements=new no(Ys,"elements"),this.plugins=new no(Object,"plugins"),this.scales=new no(Bn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(i=>{const r=n||this._getRegistryForType(i);n||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):$e(i,o=>{const a=n||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,n){const i=Oc(e);Ue(n["before"+i],[],n),t[e](n),Ue(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var ms=new XE;class QE{constructor(){this._init=void 0}notify(e,t,n,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,t,n);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,n,i){i=i||{};for(const r of e){const o=r.plugin,a=o[n],l=[t,i,r.options];if(Ue(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=de(n.options&&n.options.plugins,{}),r=ZE(n);return i===!1&&!t?[]:tT(e,r,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function ZE(s){const e={},t=[],n=Object.keys(ms.plugins.items);for(let r=0;r<n.length;r++)t.push(ms.getPlugin(n[r]));const i=s.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function eT(s,e){return!e&&s===!1?null:s===!0?{}:s}function tT(s,{plugins:e,localIds:t},n,i){const r=[],o=s.getContext();for(const a of e){const l=a.id,c=eT(n[l],i);c!==null&&r.push({plugin:a,options:sT(s.config,{plugin:a,local:t[l]},c,o)})}return r}function sT(s,{plugin:e,local:t},n,i){const r=s.pluginScopeKeys(e),o=s.getOptionScopes(n,r);return t&&e.defaults&&o.push(e.defaults),s.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ll(s,e){const t=Ge.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function nT(s,e){let t=s;return s==="_index_"?t=e:s==="_value_"&&(t=e==="x"?"y":"x"),t}function iT(s,e){return s===e?"_index_":"_value_"}function ed(s){if(s==="x"||s==="y"||s==="r")return s}function rT(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Fl(s,...e){if(ed(s))return s;for(const t of e){const n=t.axis||rT(t.position)||s.length>1&&ed(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function td(s,e,t){if(t[e+"AxisID"]===s)return{axis:e}}function oT(s,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(t.length)return td(s,"x",t[0])||td(s,"y",t[0])}return{}}function aT(s,e){const t=Ln[s.type]||{scales:{}},n=e.scales||{},i=Ll(s.type,e),r=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!Ee(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Fl(o,a,oT(o,s),Ge.scales[a.type]),c=iT(l,i),u=t.scales||{};r[o]=ir(Object.create(null),[{axis:l},a,u[l],u[c]])}),s.data.datasets.forEach(o=>{const a=o.type||s.type,l=o.indexAxis||Ll(a,e),u=(Ln[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=nT(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),ir(r[f],[{axis:d},n[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];ir(a,[Ge.scales[a.type],Ge.scale])}),r}function mp(s){const e=s.options||(s.options={});e.plugins=de(e.plugins,{}),e.scales=aT(s,e)}function yp(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function lT(s){return s=s||{},s.data=yp(s.data),mp(s),s}const sd=new Map,bp=new Set;function io(s,e){let t=sd.get(s);return t||(t=e(),sd.set(s,t),bp.add(t)),t}const Di=(s,e,t)=>{const n=un(e,t);n!==void 0&&s.add(n)};class cT{constructor(e){this._config=lT(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=yp(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),mp(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return io(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return io(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return io(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return io(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return(!i||t)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,o=this._cachedScopes(e,n),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>Di(l,e,h))),u.forEach(h=>Di(l,i,h)),u.forEach(h=>Di(l,Ln[r]||{},h)),u.forEach(h=>Di(l,Ge,h)),u.forEach(h=>Di(l,Il,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),bp.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ln[t]||{},Ge.datasets[t]||{},{type:t},Ge,Il]}resolveNamedOptions(e,t,n,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=nd(this._resolverCache,e,i);let l=o;if(hT(o,t)){r.$shared=!1,n=hn(n)?n():n;const c=this.createResolver(e,n,a);l=wi(o,n,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,n=[""],i){const{resolver:r}=nd(this._resolverCache,e,n);return Ee(t)?wi(r,t,void 0,i):r}}function nd(s,e,t){let n=s.get(e);n||(n=new Map,s.set(e,n));const i=t.join();let r=n.get(i);return r||(r={resolver:Ic(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,r)),r}const uT=s=>Ee(s)&&Object.getOwnPropertyNames(s).some(e=>hn(s[e]));function hT(s,e){const{isScriptable:t,isIndexable:n}=Kg(s);for(const i of e){const r=t(i),o=n(i),a=(o||r)&&s[i];if(r&&(hn(a)||uT(a))||o&&Ye(a))return!0}return!1}var dT="4.5.1";const fT=["top","bottom","left","right","chartArea"];function id(s,e){return s==="top"||s==="bottom"||fT.indexOf(s)===-1&&e==="x"}function rd(s,e){return function(t,n){return t[s]===n[s]?t[e]-n[e]:t[s]-n[s]}}function od(s){const e=s.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Ue(t&&t.onComplete,[s],e)}function gT(s){const e=s.chart,t=e.options.animation;Ue(t&&t.onProgress,[s],e)}function vp(s){return Lc()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const ko={},ad=s=>{const e=vp(s);return Object.values(ko).filter(t=>t.canvas===e).pop()};function pT(s,e,t){const n=Object.keys(s);for(const i of n){const r=+i;if(r>=e){const o=s[i];delete s[i],(t>0||r>e)&&(s[r+t]=o)}}}function mT(s,e,t,n){return!t||s.type==="mouseout"?null:n?e:s}class Kt{static register(...e){ms.add(...e),ld()}static unregister(...e){ms.remove(...e),ld()}constructor(e,t){const n=this.config=new cT(t),i=vp(e),r=ad(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||IE(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=bk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new QE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Nk(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],ko[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ps.listen(this,"complete",od),Ps.listen(this,"progress",gT),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return Se(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ms}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ah(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ph(this.canvas,this.ctx),this}stop(){return Ps.stop(this),this}resize(e,t){Ps.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ah(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ue(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};$e(t,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=Fl(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),$e(r,o=>{const a=o.options,l=a.id,c=Fl(l,a),u=de(a.type,o.dtype);(a.position===void 0||id(a.position,c)!==id(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{const d=ms.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,e)}),$e(i,(o,a)=>{o||delete n[a]}),$e(n,o=>{Pt.configure(this,o,o.options),Pt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((i,r)=>i.index-r.index),n>t){for(let i=t;i<n;++i)this._destroyDatasetMeta(i);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(rd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,i)=>{t.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const r=t[n];let o=this.getDatasetMeta(n);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||Ll(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=ms.getController(a),{datasetElementType:c,dataElementType:u}=Ge.datasets[a];Object.assign(l,{dataElementType:ms.getElement(u),datasetElementType:c&&ms.getElement(c)}),o.controller=new l(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){$e(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||$e(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(rd("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){$e(this.scales,e=>{Pt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!bh(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){const o=n==="_removeElements"?-r:r;pT(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!bh(i,n(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pt.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],$e(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,hn(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ps.has(this)?this.attached&&!Ps.running(this)&&Ps.start(this):(this.draw(),od({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const o=t[i];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=op(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&da(t,i),e.controller.draw(),i&&fa(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ls(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=fE.modes[t];return typeof r=="function"?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(r=>r&&r._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=gn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);Tr(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ps.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ph(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ko[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};$e(this.options.events,r=>n(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){$e(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},$e(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!$o(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(t,e),a=n?e:r(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,o=t,a=this._getActiveElements(e,i,n,o),l=Sk(e),c=mT(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Ue(r.onHover,[e,a,this],this),l&&Ue(r.onClick,[e,a,this],this));const u=!$o(a,i);return(u||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=c,u}_getActiveElements(e,t,n,i){if(e.type==="mouseout")return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}S(Kt,"defaults",Ge),S(Kt,"instances",ko),S(Kt,"overrides",Ln),S(Kt,"registry",ms),S(Kt,"version",dT),S(Kt,"getChart",ad);function ld(){return $e(Kt.instances,s=>s._plugins.invalidate())}function yT(s,e,t){const{startAngle:n,x:i,y:r,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,kt(n-t));if(s.beginPath(),s.arc(i,r,o-c/2,n+h/2,t-h/2),a>0){const d=Math.min(c/a,kt(n-t));s.arc(i,r,a+c/2,t-d/2,n+d/2,!0)}else{const d=Math.min(c/2,o*kt(n-t));if(u==="round")s.arc(i,r,d,t-Oe/2,n+Oe/2,!0);else if(u==="bevel"){const f=2*d*d,g=-f*Math.cos(t+Oe/2)+i,p=-f*Math.sin(t+Oe/2)+r,m=f*Math.cos(n+Oe/2)+i,y=f*Math.sin(n+Oe/2)+r;s.lineTo(g,p),s.lineTo(m,y)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function bT(s,e,t){const{startAngle:n,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;s.beginPath(),s.arc(r,o,a,n-c,t+c),l>i?(c=i/l,s.arc(r,o,l,t+c,n-c,!0)):s.arc(r,o,i,t+it,n-it),s.closePath(),s.clip()}function vT(s){return Dc(s,["outerStart","outerEnd","innerStart","innerEnd"])}function _T(s,e,t,n){const i=vT(s.options.borderRadius),r=(t-e)/2,o=Math.min(r,n*e/2),a=l=>{const c=(t-Math.min(r,l))*n/2;return bt(l,0,Math.min(r,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:bt(i.innerStart,0,o),innerEnd:bt(i.innerEnd,0,o)}}function Qn(s,e,t,n){return{x:t+s*Math.cos(e),y:n+s*Math.sin(e)}}function Vo(s,e,t,n,i,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+n+t-c,0),d=u>0?u+n+t+c:0;let f=0;const g=i-l;if(n){const ce=u>0?u-n:0,Q=h>0?h-n:0,J=(ce+Q)/2,ee=J!==0?g*J/(J+n):g;f=(g-ee)/2}const p=Math.max(.001,g*h-t/Oe)/h,m=(g-p)/2,y=l+m+f,b=i-m-f,{outerStart:v,outerEnd:x,innerStart:T,innerEnd:C}=_T(e,d,h,b-y),A=h-v,O=h-x,L=y+v/A,Y=b-x/O,Z=d+T,q=d+C,we=y+T/Z,Be=b-C/q;if(s.beginPath(),r){const ce=(L+Y)/2;if(s.arc(o,a,h,L,ce),s.arc(o,a,h,ce,Y),x>0){const ye=Qn(O,Y,o,a);s.arc(ye.x,ye.y,x,Y,b+it)}const Q=Qn(q,b,o,a);if(s.lineTo(Q.x,Q.y),C>0){const ye=Qn(q,Be,o,a);s.arc(ye.x,ye.y,C,b+it,Be+Math.PI)}const J=(b-C/d+(y+T/d))/2;if(s.arc(o,a,d,b-C/d,J,!0),s.arc(o,a,d,J,y+T/d,!0),T>0){const ye=Qn(Z,we,o,a);s.arc(ye.x,ye.y,T,we+Math.PI,y-it)}const ee=Qn(A,y,o,a);if(s.lineTo(ee.x,ee.y),v>0){const ye=Qn(A,L,o,a);s.arc(ye.x,ye.y,v,y-it,L)}}else{s.moveTo(o,a);const ce=Math.cos(L)*h+o,Q=Math.sin(L)*h+a;s.lineTo(ce,Q);const J=Math.cos(Y)*h+o,ee=Math.sin(Y)*h+a;s.lineTo(J,ee)}s.closePath()}function wT(s,e,t,n,i){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){Vo(s,e,t,n,l,i);for(let c=0;c<r;++c)s.fill();isNaN(a)||(l=o+(a%He||He))}return Vo(s,e,t,n,l,i),s.fill(),l}function xT(s,e,t,n,i){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,g=l.borderAlign==="inner";if(!c)return;s.setLineDash(h||[]),s.lineDashOffset=d,g?(s.lineWidth=c*2,s.lineJoin=u||"round"):(s.lineWidth=c,s.lineJoin=u||"bevel");let p=e.endAngle;if(r){Vo(s,e,t,n,p,i);for(let m=0;m<r;++m)s.stroke();isNaN(a)||(p=o+(a%He||He))}g&&bT(s,e,p),l.selfJoin&&p-o>=Oe&&f===0&&u!=="miter"&&yT(s,e,p),r||(Vo(s,e,t,n,p,i),s.stroke())}class zi extends Ys{constructor(t){super();S(this,"circumference");S(this,"endAngle");S(this,"fullCircles");S(this,"innerRadius");S(this,"outerRadius");S(this,"pixelMargin");S(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=Bg(r,{x:t,y:n}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,g=de(d,c-l),p=Pr(o,l,c)&&l!==c,m=g>=He||p,y=Ns(a,u+f,h+f);return m&&y}getCenterPoint(t){const{x:n,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,h=(r+o)/2,d=(a+l+u+c)/2;return{x:n+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:i}=this,r=(n.offset||0)/4,o=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>He?Math.floor(i/He):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Oe,i||0)),u=r*c;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,wT(t,this,u,o,a),xT(t,this,u,o,a),t.restore()}}S(zi,"id","arc"),S(zi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),S(zi,"defaultRoutes",{backgroundColor:"backgroundColor"}),S(zi,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function _p(s,e,t=e){s.lineCap=de(t.borderCapStyle,e.borderCapStyle),s.setLineDash(de(t.borderDash,e.borderDash)),s.lineDashOffset=de(t.borderDashOffset,e.borderDashOffset),s.lineJoin=de(t.borderJoinStyle,e.borderJoinStyle),s.lineWidth=de(t.borderWidth,e.borderWidth),s.strokeStyle=de(t.borderColor,e.borderColor)}function kT(s,e,t){s.lineTo(t.x,t.y)}function ST(s){return s.stepped?Yk:s.tension||s.cubicInterpolationMode==="monotone"?Gk:kT}function wp(s,e,t={}){const n=s.length,{start:i=0,end:r=n-1}=t,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!u?n+c-l:c-l}}function ET(s,e,t,n){const{points:i,options:r}=e,{count:o,start:a,loop:l,ilen:c}=wp(i,t,n),u=ST(r);let{move:h=!0,reverse:d}=n||{},f,g,p;for(f=0;f<=c;++f)g=i[(a+(d?c-f:f))%o],!g.skip&&(h?(s.moveTo(g.x,g.y),h=!1):u(s,p,g,d,r.stepped),p=g);return l&&(g=i[(a+(d?c:0))%o],u(s,p,g,d,r.stepped)),!!l}function TT(s,e,t,n){const i=e.points,{count:r,start:o,ilen:a}=wp(i,t,n),{move:l=!0,reverse:c}=n||{};let u=0,h=0,d,f,g,p,m,y;const b=x=>(o+(c?a-x:x))%r,v=()=>{p!==m&&(s.lineTo(u,m),s.lineTo(u,p),s.lineTo(u,y))};for(l&&(f=i[b(0)],s.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[b(d)],f.skip)continue;const x=f.x,T=f.y,C=x|0;C===g?(T<p?p=T:T>m&&(m=T),u=(h*u+x)/++h):(v(),s.lineTo(x,T),g=C,h=0,p=m=T),y=T}v()}function Bl(s){const e=s.options,t=e.borderDash&&e.borderDash.length;return!s._decimated&&!s._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?TT:ET}function PT(s){return s.stepped?TS:s.tension||s.cubicInterpolationMode==="monotone"?PS:Tn}function OT(s,e,t,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,n)&&i.closePath()),_p(s,e.options),s.stroke(i)}function CT(s,e,t,n){const{segments:i,options:r}=e,o=Bl(e);for(const a of i)_p(s,r,a.style),s.beginPath(),o(s,e,a,{start:t,end:t+n-1})&&s.closePath(),s.stroke()}const AT=typeof Path2D=="function";function RT(s,e,t,n){AT&&!e.options.segment?OT(s,e,t,n):CT(s,e,t,n)}class on extends Ys{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;bS(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=DS(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,o=rp(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],l=PT(n);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=r[h],g=r[d];if(f===g){a.push(f);continue}const p=Math.abs((i-f[t])/(g[t]-f[t])),m=l(f,g,p,n.stepped);m[t]=e[t],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,t,n){return Bl(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=Bl(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)o&=r(e,this,a,{start:t,end:t+n-1});return!!o}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),RT(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}S(on,"id","line"),S(on,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),S(on,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),S(on,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function cd(s,e,t,n){const i=s.options,{[t]:r}=s.getProps([t],n);return Math.abs(e-r)<i.radius+i.hitRadius}class So extends Ys{constructor(t){super();S(this,"parsed");S(this,"skip");S(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(n-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return cd(this,t,"x",n)}inYRange(t,n){return cd(this,t,"y",n)}getCenterPoint(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){const i=this.options;this.skip||i.radius<.1||!Ls(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Nl(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}S(So,"id","point"),S(So,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),S(So,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function xp(s,e){const{x:t,y:n,base:i,width:r,height:o}=s.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return s.horizontal?(h=o/2,a=Math.min(t,i),l=Math.max(t,i),c=n-h,u=n+h):(h=r/2,a=t-h,l=t+h,c=Math.min(n,i),u=Math.max(n,i)),{left:a,top:c,right:l,bottom:u}}function an(s,e,t,n){return s?0:bt(e,t,n)}function MT(s,e,t){const n=s.options.borderWidth,i=s.borderSkipped,r=Gg(n);return{t:an(i.top,r.top,0,t),r:an(i.right,r.right,0,e),b:an(i.bottom,r.bottom,0,t),l:an(i.left,r.left,0,e)}}function DT(s,e,t){const{enableBorderRadius:n}=s.getProps(["enableBorderRadius"]),i=s.options.borderRadius,r=Nn(i),o=Math.min(e,t),a=s.borderSkipped,l=n||Ee(i);return{topLeft:an(!l||a.top||a.left,r.topLeft,0,o),topRight:an(!l||a.top||a.right,r.topRight,0,o),bottomLeft:an(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:an(!l||a.bottom||a.right,r.bottomRight,0,o)}}function IT(s){const e=xp(s),t=e.right-e.left,n=e.bottom-e.top,i=MT(s,t/2,n/2),r=DT(s,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Za(s,e,t,n){const i=e===null,r=t===null,a=s&&!(i&&r)&&xp(s,n);return a&&(i||Ns(e,a.left,a.right))&&(r||Ns(t,a.top,a.bottom))}function NT(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function $T(s,e){s.rect(e.x,e.y,e.w,e.h)}function el(s,e,t={}){const n=s.x!==t.x?-e:0,i=s.y!==t.y?-e:0,r=(s.x+s.w!==t.x+t.w?e:0)-n,o=(s.y+s.h!==t.y+t.h?e:0)-i;return{x:s.x+n,y:s.y+i,w:s.w+r,h:s.h+o,radius:s.radius}}class Eo extends Ys{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=IT(this),a=NT(o.radius)?Or:$T;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,el(o,t,r)),e.clip(),a(e,el(r,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,el(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return Za(this,e,t,n)}inXRange(e,t){return Za(this,e,null,t)}inYRange(e,t){return Za(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}S(Eo,"id","bar"),S(Eo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),S(Eo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var LT=Object.freeze({__proto__:null,ArcElement:zi,BarElement:Eo,LineElement:on,PointElement:So});const Wl=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ud=Wl.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function kp(s){return Wl[s%Wl.length]}function Sp(s){return ud[s%ud.length]}function FT(s,e){return s.borderColor=kp(e),s.backgroundColor=Sp(e),++e}function BT(s,e){return s.backgroundColor=s.data.map(()=>kp(e++)),e}function WT(s,e){return s.backgroundColor=s.data.map(()=>Sp(e++)),e}function jT(s){let e=0;return(t,n)=>{const i=s.getDatasetMeta(n).controller;i instanceof Mn?e=BT(t,e):i instanceof lr?e=WT(t,e):i&&(e=FT(t,e))}}function hd(s){let e;for(e in s)if(s[e].borderColor||s[e].backgroundColor)return!0;return!1}function VT(s){return s&&(s.borderColor||s.backgroundColor)}function UT(){return Ge.borderColor!=="rgba(0,0,0,0.1)"||Ge.backgroundColor!=="rgba(0,0,0,0.1)"}var HT={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,e,t){if(!t.enabled)return;const{data:{datasets:n},options:i}=s.config,{elements:r}=i,o=hd(n)||VT(i)||r&&hd(r)||UT();if(!t.forceOverride&&o)return;const a=jT(s);n.forEach(a)}};function zT(s,e,t,n,i){const r=i.samples||n;if(r>=t)return s.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let u=e,h,d,f,g,p;for(o[l++]=s[u],h=0;h<r-2;h++){let m=0,y=0,b;const v=Math.floor((h+1)*a)+1+e,x=Math.min(Math.floor((h+2)*a)+1,t)+e,T=x-v;for(b=v;b<x;b++)m+=s[b].x,y+=s[b].y;m/=T,y/=T;const C=Math.floor(h*a)+1+e,A=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:O,y:L}=s[u];for(f=g=-1,b=C;b<A;b++)g=.5*Math.abs((O-m)*(s[b].y-L)-(O-s[b].x)*(y-L)),g>f&&(f=g,d=s[b],p=b);o[l++]=d,u=p}return o[l++]=s[c],o}function qT(s,e,t,n){let i=0,r=0,o,a,l,c,u,h,d,f,g,p;const m=[],y=e+t-1,b=s[e].x,x=s[y].x-b;for(o=e;o<e+t;++o){a=s[o],l=(a.x-b)/x*n,c=a.y;const T=l|0;if(T===u)c<g?(g=c,h=o):c>p&&(p=c,d=o),i=(r*i+a.x)/++r;else{const C=o-1;if(!Se(h)&&!Se(d)){const A=Math.min(h,d),O=Math.max(h,d);A!==f&&A!==C&&m.push({...s[A],x:i}),O!==f&&O!==C&&m.push({...s[O],x:i})}o>0&&C!==f&&m.push(s[C]),m.push(a),u=T,r=0,g=p=c,h=d=f=o}}return m}function Ep(s){if(s._decimated){const e=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function dd(s){s.data.datasets.forEach(e=>{Ep(e)})}function YT(s,e){const t=e.length;let n=0,i;const{iScale:r}=s,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(n=bt($s(e,r.axis,o).lo,0,t-1)),c?i=bt($s(e,r.axis,a).hi+1,n,t)-n:i=t-n,{start:n,count:i}}var GT={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,e,t)=>{if(!t.enabled){dd(s);return}const n=s.width;s.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,l=s.getDatasetMeta(r),c=o||i.data;if(Ui([a,s.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=s.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||s.options.parsing)return;let{start:h,count:d}=YT(l,c);const f=t.threshold||4*n;if(d<=f){Ep(i);return}Se(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(t.algorithm){case"lttb":g=zT(c,h,d,n,t);break;case"min-max":g=qT(c,h,d,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=g})},destroy(s){dd(s)}};function KT(s,e,t){const n=s.segments,i=s.points,r=e.points,o=[];for(const a of n){let{start:l,end:c}=a;c=ma(l,c,i);const u=jl(t,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=rp(e,u);for(const d of h){const f=jl(t,r[d.start],r[d.end],d.loop),g=ip(a,i,f);for(const p of g)o.push({source:p,target:d,start:{[t]:fd(u,f,"start",Math.max)},end:{[t]:fd(u,f,"end",Math.min)}})}}return o}function jl(s,e,t,n){if(n)return;let i=e[s],r=t[s];return s==="angle"&&(i=kt(i),r=kt(r)),{property:s,start:i,end:r}}function JT(s,e){const{x:t=null,y:n=null}=s||{},i=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=ma(o,a,i);const l=i[o],c=i[a];n!==null?(r.push({x:l.x,y:n}),r.push({x:c.x,y:n})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function ma(s,e,t){for(;e>s;e--){const n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function fd(s,e,t,n){return s&&e?n(s[t],e[t]):s?s[t]:e?e[t]:0}function Tp(s,e){let t=[],n=!1;return Ye(s)?(n=!0,t=s):t=JT(s,e),t.length?new on({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function gd(s){return s&&s.fill!==!1}function XT(s,e,t){let i=s[e].fill;const r=[e];let o;if(!t)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!et(i))return i;if(o=s[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function QT(s,e,t){const n=s1(s);if(Ee(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return et(i)&&Math.floor(i)===i?ZT(n[0],e,i,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function ZT(s,e,t,n){return(s==="-"||s==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function e1(s,e){let t=null;return s==="start"?t=e.bottom:s==="end"?t=e.top:Ee(s)?t=e.getPixelForValue(s.value):e.getBasePixel&&(t=e.getBasePixel()),t}function t1(s,e,t){let n;return s==="start"?n=t:s==="end"?n=e.options.reverse?e.min:e.max:Ee(s)?n=s.value:n=e.getBaseValue(),n}function s1(s){const e=s.options,t=e.fill;let n=de(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function n1(s){const{scale:e,index:t,line:n}=s,i=[],r=n.segments,o=n.points,a=i1(e,t);a.push(Tp({x:null,y:e.bottom},n));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)r1(i,o[u],a)}return new on({points:i,options:{}})}function i1(s,e){const t=[],n=s.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const r=n[i];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function r1(s,e,t){const n=[];for(let i=0;i<t.length;i++){const r=t[i],{first:o,last:a,point:l}=o1(r,e,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(s.push(l),!a)break}}s.push(...n)}function o1(s,e,t){const n=s.interpolate(e,t);if(!n)return{};const i=n[t],r=s.segments,o=s.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],h=o[u.start][t],d=o[u.end][t];if(Ns(i,h,d)){a=i===h,l=i===d;break}}return{first:a,last:l,point:n}}class Pp{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:r,radius:o}=this;return t=t||{start:0,end:He},e.arc(i,r,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function a1(s){const{chart:e,fill:t,line:n}=s;if(et(t))return l1(e,t);if(t==="stack")return n1(s);if(t==="shape")return!0;const i=c1(s);return i instanceof Pp?i:Tp(i,n)}function l1(s,e){const t=s.getDatasetMeta(e);return t&&s.isDatasetVisible(e)?t.dataset:null}function c1(s){return(s.scale||{}).getPointPositionForValue?h1(s):u1(s)}function u1(s){const{scale:e={},fill:t}=s,n=e1(t,e);if(et(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function h1(s){const{scale:e,fill:t}=s,n=e.options,i=e.getLabels().length,r=n.reverse?e.max:e.min,o=t1(t,e,r),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,r);return new Pp({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function tl(s,e,t){const n=a1(e),{chart:i,index:r,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,h=c.backgroundColor,{above:d=h,below:f=h}=u||{},g=i.getDatasetMeta(r),p=op(i,g);n&&o.points.length&&(da(s,t),d1(s,{line:o,target:n,above:d,below:f,area:t,scale:a,axis:l,clip:p}),fa(s))}function d1(s,e){const{line:t,target:n,above:i,below:r,area:o,scale:a,clip:l}=e,c=t._loop?"angle":e.axis;s.save();let u=r;r!==i&&(c==="x"?(pd(s,n,o.top),sl(s,{line:t,target:n,color:i,scale:a,property:c,clip:l}),s.restore(),s.save(),pd(s,n,o.bottom)):c==="y"&&(md(s,n,o.left),sl(s,{line:t,target:n,color:r,scale:a,property:c,clip:l}),s.restore(),s.save(),md(s,n,o.right),u=i)),sl(s,{line:t,target:n,color:u,scale:a,property:c,clip:l}),s.restore()}function pd(s,e,t){const{segments:n,points:i}=e;let r=!0,o=!1;s.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],h=i[ma(l,c,i)];r?(s.moveTo(u.x,u.y),r=!1):(s.lineTo(u.x,t),s.lineTo(u.x,u.y)),o=!!e.pathSegment(s,a,{move:o}),o?s.closePath():s.lineTo(h.x,t)}s.lineTo(e.first().x,t),s.closePath(),s.clip()}function md(s,e,t){const{segments:n,points:i}=e;let r=!0,o=!1;s.beginPath();for(const a of n){const{start:l,end:c}=a,u=i[l],h=i[ma(l,c,i)];r?(s.moveTo(u.x,u.y),r=!1):(s.lineTo(t,u.y),s.lineTo(u.x,u.y)),o=!!e.pathSegment(s,a,{move:o}),o?s.closePath():s.lineTo(t,h.y)}s.lineTo(t,e.first().y),s.closePath(),s.clip()}function sl(s,e){const{line:t,target:n,property:i,color:r,scale:o,clip:a}=e,l=KT(t,n,i);for(const{source:c,target:u,start:h,end:d}of l){const{style:{backgroundColor:f=r}={}}=c,g=n!==!0;s.save(),s.fillStyle=f,f1(s,o,a,g&&jl(i,h,d)),s.beginPath();const p=!!t.pathSegment(s,c);let m;if(g){p?s.closePath():yd(s,n,d,i);const y=!!n.pathSegment(s,u,{move:p,reverse:!0});m=p&&y,m||yd(s,n,h,i)}s.closePath(),s.fill(m?"evenodd":"nonzero"),s.restore()}}function f1(s,e,t,n){const i=e.chart.chartArea,{property:r,start:o,end:a}=n||{};if(r==="x"||r==="y"){let l,c,u,h;r==="x"?(l=o,c=i.top,u=a,h=i.bottom):(l=i.left,c=o,u=i.right,h=a),s.beginPath(),t&&(l=Math.max(l,t.left),u=Math.min(u,t.right),c=Math.max(c,t.top),h=Math.min(h,t.bottom)),s.rect(l,c,u-l,h-c),s.clip()}}function yd(s,e,t,n){const i=e.interpolate(t,n);i&&s.lineTo(i.x,i.y)}var g1={id:"filler",afterDatasetsUpdate(s,e,t){const n=(s.data.datasets||[]).length,i=[];let r,o,a,l;for(o=0;o<n;++o)r=s.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof on&&(l={visible:s.isDatasetVisible(o),index:o,fill:QT(a,o,n),chart:s,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,i.push(l);for(o=0;o<n;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=XT(i,o,t.propagate))},beforeDraw(s,e,t){const n=t.drawTime==="beforeDraw",i=s.getSortedVisibleDatasetMetas(),r=s.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),n&&a.fill&&tl(s.ctx,a,r))}},beforeDatasetsDraw(s,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const n=s.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const r=n[i].$filler;gd(r)&&tl(s.ctx,r,s.chartArea)}},beforeDatasetDraw(s,e,t){const n=e.meta.$filler;!gd(n)||t.drawTime!=="beforeDatasetDraw"||tl(s.ctx,n,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const bd=(s,e)=>{let{boxHeight:t=e,boxWidth:n=e}=s;return s.usePointStyle&&(t=Math.min(t,e),n=s.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},p1=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class vd extends Ys{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ue(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=gt(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=bd(n,r);let c,u;t.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,p)=>{const m=n+t/2+r.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(h+=u,c[c.length-(p>0?0:1)]=0,f+=u,d++),l[p]={left:0,top:f,row:d,width:m,height:i},c[c.length-1]+=m+a}),h}_fitCols(e,t,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:b,itemHeight:v}=m1(n,t,r,m,i);y>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[y]={left:g,top:f,col:p,width:b,height:v},d=Math.max(d,b),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,o=gi(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=xt(n,this.left+i,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=xt(n,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=xt(n,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=xt(n,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;da(e,this),this._draw(),fa(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:o}=e,a=Ge.color,l=gi(e.rtl,this.left,this.width),c=gt(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=bd(o,h),y=function(C,A,O){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;i.save();const L=de(O.lineWidth,1);if(i.fillStyle=de(O.fillStyle,a),i.lineCap=de(O.lineCap,"butt"),i.lineDashOffset=de(O.lineDashOffset,0),i.lineJoin=de(O.lineJoin,"miter"),i.lineWidth=L,i.strokeStyle=de(O.strokeStyle,a),i.setLineDash(de(O.lineDash,[])),o.usePointStyle){const Y={radius:p*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:L},Z=l.xPlus(C,g/2),q=A+d;Yg(i,Y,Z,q,o.pointStyleWidth&&g)}else{const Y=A+Math.max((h-p)/2,0),Z=l.leftForLtr(C,g),q=Nn(O.borderRadius);i.beginPath(),Object.values(q).some(we=>we!==0)?Or(i,{x:Z,y:Y,w:g,h:p,radius:q}):i.rect(Z,Y,g,p),i.fill(),L!==0&&i.stroke()}i.restore()},b=function(C,A,O){Fn(i,O.text,C,A+m/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?f={x:xt(r,this.left+u,this.right-n[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:xt(r,this.top+x+u,this.bottom-t[0].height),line:0},tp(this.ctx,e.textDirection);const T=m+u;this.legendItems.forEach((C,A)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const O=i.measureText(C.text).width,L=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),Y=g+d+O;let Z=f.x,q=f.y;l.setWidth(this.width),v?A>0&&Z+Y+u>this.right&&(q=f.y+=T,f.line++,Z=f.x=xt(r,this.left+u,this.right-n[f.line])):A>0&&q+T>this.bottom&&(Z=f.x=Z+t[f.line].width+u,f.line++,q=f.y=xt(r,this.top+x+u,this.bottom-t[f.line].height));const we=l.x(Z);if(y(we,q,C),Z=$k(L,Z+g+d,v?Z+Y:this.right,e.rtl),b(l.x(Z),q,C),v)f.x+=Y+u;else if(typeof C.text!="string"){const Be=c.lineHeight;f.y+=Op(C,Be)+u}else f.y+=T}),sp(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=gt(t.font),i=At(t.padding);if(!t.display)return;const r=gi(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=n.size/2,c=i.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=xt(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+xt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=xt(a,h,h+d);o.textAlign=r.textAlign(Rc(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,Fn(o,t.text,f,u,n)}_computeTitleHeight(){const e=this.options.title,t=gt(e.font),n=At(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(Ns(e,this.left,this.right)&&Ns(t,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Ns(e,i.left,i.left+i.width)&&Ns(t,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const t=this.options;if(!v1(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=p1(i,n);i&&!r&&Ue(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Ue(t.onHover,[e,n,this],this)}else n&&Ue(t.onClick,[e,n,this],this)}}function m1(s,e,t,n,i){const r=y1(n,s,e,t),o=b1(i,n,e.lineHeight);return{itemWidth:r,itemHeight:o}}function y1(s,e,t,n){let i=s.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+n.measureText(i).width}function b1(s,e,t){let n=s;return typeof e.text!="string"&&(n=Op(e,t)),n}function Op(s,e){const t=s.text?s.text.length:0;return e*t}function v1(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var _1={id:"legend",_element:vd,start(s,e,t){const n=s.legend=new vd({ctx:s.ctx,options:t,chart:s});Pt.configure(s,n,t),Pt.addBox(s,n)},stop(s){Pt.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,t){const n=s.legend;Pt.configure(s,n,t),n.options=t},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,t){const n=e.datasetIndex,i=t.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=s.legend.options;return s._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=At(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class Wc extends Ys{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=Ye(n.text)?n.text.length:1;this._padding=At(n.padding);const r=i*gt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=xt(a,n,r),h=t+e,c=r-n):(o.position==="left"?(u=n+e,h=xt(a,i,t),l=Oe*-.5):(u=r-e,h=xt(a,t,i),l=Oe*.5),c=i-t),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=gt(t.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Fn(e,t.text,0,0,n,{color:t.color,maxWidth:l,rotation:c,textAlign:Rc(t.align),textBaseline:"middle",translation:[o,a]})}}function w1(s,e){const t=new Wc({ctx:s.ctx,options:e,chart:s});Pt.configure(s,t,e),Pt.addBox(s,t),s.titleBlock=t}var x1={id:"title",_element:Wc,start(s,e,t){w1(s,t)},stop(s){const e=s.titleBlock;Pt.removeBox(s,e),delete s.titleBlock},beforeUpdate(s,e,t){const n=s.titleBlock;Pt.configure(s,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ro=new WeakMap;var k1={id:"subtitle",start(s,e,t){const n=new Wc({ctx:s.ctx,options:t,chart:s});Pt.configure(s,n,t),Pt.addBox(s,n),ro.set(s,n)},stop(s){Pt.removeBox(s,ro.get(s)),ro.delete(s)},beforeUpdate(s,e,t){const n=ro.get(s);Pt.configure(s,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qi={average(s){if(!s.length)return!1;let e,t,n=new Set,i=0,r=0;for(e=0,t=s.length;e<t;++e){const a=s[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),i+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:i/r}},nearest(s,e){if(!s.length)return!1;let t=e.x,n=e.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=s.length;r<o;++r){const l=s[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Dl(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,n=l.y}return{x:t,y:n}}};function gs(s,e){return e&&(Ye(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function Os(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function S1(s,e){const{element:t,datasetIndex:n,index:i}=e,r=s.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:s,label:o,parsed:r.getParsed(i),raw:s.data.datasets[n].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:n,element:t}}function _d(s,e){const t=s.chart.ctx,{body:n,footer:i,title:r}=s,{boxWidth:o,boxHeight:a}=e,l=gt(e.bodyFont),c=gt(e.titleFont),u=gt(e.footerFont),h=r.length,d=i.length,f=n.length,g=At(e.padding);let p=g.height,m=0,y=n.reduce((x,T)=>x+T.before.length+T.lines.length+T.after.length,0);if(y+=s.beforeBody.length+s.afterBody.length,h&&(p+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*x+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const v=function(x){m=Math.max(m,t.measureText(x).width+b)};return t.save(),t.font=c.string,$e(s.title,v),t.font=l.string,$e(s.beforeBody.concat(s.afterBody),v),b=e.displayColors?o+2+e.boxPadding:0,$e(n,x=>{$e(x.before,v),$e(x.lines,v),$e(x.after,v)}),b=0,t.font=u.string,$e(s.footer,v),t.restore(),m+=g.width,{width:m,height:p}}function E1(s,e){const{y:t,height:n}=e;return t<n/2?"top":t>s.height-n/2?"bottom":"center"}function T1(s,e,t,n){const{x:i,width:r}=n,o=t.caretSize+t.caretPadding;if(s==="left"&&i+r+o>e.width||s==="right"&&i-r-o<0)return!0}function P1(s,e,t,n){const{x:i,width:r}=t,{width:o,chartArea:{left:a,right:l}}=s;let c="center";return n==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),T1(c,s,e,t)&&(c="center"),c}function wd(s,e,t){const n=t.yAlign||e.yAlign||E1(s,t);return{xAlign:t.xAlign||e.xAlign||P1(s,e,t,n),yAlign:n}}function O1(s,e){let{x:t,width:n}=s;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function C1(s,e,t){let{y:n,height:i}=s;return e==="top"?n+=t:e==="bottom"?n-=i+t:n-=i/2,n}function xd(s,e,t,n){const{caretSize:i,caretPadding:r,cornerRadius:o}=s,{xAlign:a,yAlign:l}=t,c=i+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Nn(o);let g=O1(e,a);const p=C1(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+i:a==="right"&&(g+=Math.max(h,f)+i),{x:bt(g,0,n.width-e.width),y:bt(p,0,n.height-e.height)}}function oo(s,e,t){const n=At(t.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-n.right:s.x+n.left}function kd(s){return gs([],Os(s))}function A1(s,e,t){return gn(s,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Sd(s,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?s.override(t):s}const Cp={beforeTitle:Ts,title(s){if(s.length>0){const e=s[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:Ts,beforeBody:Ts,beforeLabel:Ts,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const t=s.formattedValue;return Se(t)||(e+=t),e},labelColor(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ts,afterBody:Ts,beforeFooter:Ts,footer:Ts,afterFooter:Ts};function $t(s,e,t,n){const i=s[e].call(t,n);return typeof i>"u"?Cp[e].call(t,n):i}class Vl extends Ys{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new ap(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=A1(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,i=$t(n,"beforeTitle",this,e),r=$t(n,"title",this,e),o=$t(n,"afterTitle",this,e);let a=[];return a=gs(a,Os(i)),a=gs(a,Os(r)),a=gs(a,Os(o)),a}getBeforeBody(e,t){return kd($t(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return $e(e,r=>{const o={before:[],lines:[],after:[]},a=Sd(n,r);gs(o.before,Os($t(a,"beforeLabel",this,r))),gs(o.lines,$t(a,"label",this,r)),gs(o.after,Os($t(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(e,t){return kd($t(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=$t(n,"beforeFooter",this,e),r=$t(n,"footer",this,e),o=$t(n,"afterFooter",this,e);let a=[];return a=gs(a,Os(i)),a=gs(a,Os(r)),a=gs(a,Os(o)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(S1(this.chart,t[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,n))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,n))),$e(a,u=>{const h=Sd(e.callbacks,u);i.push($t(h,"labelColor",this,u)),r.push($t(h,"labelPointStyle",this,u)),o.push($t(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=qi[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=_d(this,n),c=Object.assign({},a,l),u=wd(this.chart,n,c),h=xd(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Nn(a),{x:d,y:f}=e,{width:g,height:p}=t;let m,y,b,v,x,T;return r==="center"?(x=f+p/2,i==="left"?(m=d,y=m-o,v=x+o,T=x-o):(m=d+g,y=m+o,v=x-o,T=x+o),b=m):(i==="left"?y=d+Math.max(l,u)+o:i==="right"?y=d+g-Math.max(c,h)-o:y=this.caretX,r==="top"?(v=f,x=v-o,m=y-o,b=y+o):(v=f+p,x=v+o,m=y+o,b=y-o),T=v),{x1:m,x2:y,x3:b,y1:v,y2:x,y3:T}}drawTitle(e,t,n){const i=this.title,r=i.length;let o,a,l;if(r){const c=gi(n.rtl,this.x,this.width);for(e.x=oo(this,n.titleAlign,n),t.textAlign=c.textAlign(n.titleAlign),t.textBaseline="middle",o=gt(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,u=gt(r.bodyFont),h=oo(this,"left",r),d=i.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=t.y+f;if(r.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=i.leftForLtr(d,c)+c/2,y=g+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Nl(e,p,m,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Nl(e,p,m,y)}else{e.lineWidth=Ee(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=i.leftForLtr(d,c),m=i.leftForLtr(i.xPlus(d,1),c-2),y=Nn(o.borderRadius);Object.values(y).some(b=>b!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Or(e,{x:p,y:g,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Or(e,{x:m,y:g+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(p,g,c,l),e.strokeRect(p,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=gt(n.bodyFont);let d=h.lineHeight,f=0;const g=gi(n.rtl,this.x,this.width),p=function(O){t.fillText(O,g.x(e.x+f),e.y+d/2),e.y+=d+r},m=g.textAlign(o);let y,b,v,x,T,C,A;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=oo(this,m,n),t.fillStyle=n.bodyColor,$e(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,C=i.length;x<C;++x){for(y=i[x],b=this.labelTextColors[x],t.fillStyle=b,$e(y.before,p),v=y.lines,a&&v.length&&(this._drawColorBox(t,e,x,g,n),d=Math.max(h.lineHeight,l)),T=0,A=v.length;T<A;++T)p(v[T]),d=h.lineHeight;$e(y.after,p)}f=0,d=h.lineHeight,$e(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let o,a;if(r){const l=gi(n.rtl,this.x,this.width);for(e.x=oo(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=l.textAlign(n.footerAlign),t.textBaseline="middle",o=gt(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=n,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Nn(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,n,i),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,t,n,i),t.lineTo(a+c,l+u-g),t.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,t,n,i),t.lineTo(a+f,l+u),t.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(e,t,n,i),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const o=qi[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=_d(this,e),l=Object.assign({},o,this._size),c=wd(t,e,l),u=xd(e,l,c,t);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=At(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),tp(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),sp(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!$o(n,i),o=this._positionChanged(i,t);(r||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,n),a=this._positionChanged(o,e),l=t||!$o(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,n,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,o=qi[r.position].call(this,e,t);return o!==!1&&(n!==o.x||i!==o.y)}}S(Vl,"positioners",qi);var R1={id:"tooltip",_element:Vl,positioners:qi,afterInit(s,e,t){t&&(s.tooltip=new Vl({chart:s,options:t}))},beforeUpdate(s,e,t){s.tooltip&&s.tooltip.initialize(t)},reset(s,e,t){s.tooltip&&s.tooltip.initialize(t)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",t)}},afterEvent(s,e){if(s.tooltip){const t=e.replay;s.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Cp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},M1=Object.freeze({__proto__:null,Colors:HT,Decimation:GT,Filler:g1,Legend:_1,SubTitle:k1,Title:x1,Tooltip:R1});const D1=(s,e,t,n)=>(typeof e=="string"?(t=s.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function I1(s,e,t,n){const i=s.indexOf(e);if(i===-1)return D1(s,e,t,n);const r=s.lastIndexOf(e);return i!==r?t:i}const N1=(s,e)=>s===null?null:bt(Math.round(s),0,e);function Ed(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class Ul extends Bn{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:i,label:r}of t)n[i]===r&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Se(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:I1(n,e,de(t,e),this._addedLabels),N1(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return Ed.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}S(Ul,"id","category"),S(Ul,"defaults",{ticks:{callback:Ed}});function $1(s,e){const t=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=s,f=r||1,g=u-1,{min:p,max:m}=e,y=!Se(o),b=!Se(a),v=!Se(c),x=(m-p)/(h+1);let T=_h((m-p)/g/f)*f,C,A,O,L;if(T<1e-14&&!y&&!b)return[{value:p},{value:m}];L=Math.ceil(m/T)-Math.floor(p/T),L>g&&(T=_h(L*T/g/f)*f),Se(l)||(C=Math.pow(10,l),T=Math.ceil(T*C)/C),i==="ticks"?(A=Math.floor(p/T)*T,O=Math.ceil(m/T)*T):(A=p,O=m),y&&b&&r&&Ck((a-o)/r,T/1e3)?(L=Math.round(Math.min((a-o)/T,u)),T=(a-o)/L,A=o,O=a):v?(A=y?o:A,O=b?a:O,L=c-1,T=(O-A)/L):(L=(O-A)/T,rr(L,Math.round(L),T/1e3)?L=Math.round(L):L=Math.ceil(L));const Y=Math.max(wh(T),wh(A));C=Math.pow(10,Se(l)?Y:l),A=Math.round(A*C)/C,O=Math.round(O*C)/C;let Z=0;for(y&&(d&&A!==o?(t.push({value:o}),A<o&&Z++,rr(Math.round((A+Z*T)*C)/C,o,Td(o,x,s))&&Z++):A<o&&Z++);Z<L;++Z){const q=Math.round((A+Z*T)*C)/C;if(b&&q>a)break;t.push({value:q})}return b&&d&&O!==a?t.length&&rr(t[t.length-1].value,a,Td(a,x,s))?t[t.length-1].value=a:t.push({value:a}):(!b||O===a)&&t.push({value:O}),t}function Td(s,e,{horizontal:t,minRotation:n}){const i=ns(n),r=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+s).length;return Math.min(e/r,o)}class Uo extends Bn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=t?i:l,a=l=>r=n?r:l;if(e){const l=ws(i),c=ws(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(i-l)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=$1(i,r);return e.bounds==="ticks"&&Fg(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Lr(e,this.chart.options.locale,this.options.ticks.format)}}class Hl extends Uo{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=et(e)?e:0,this.max=et(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=ns(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}S(Hl,"id","linear"),S(Hl,"defaults",{ticks:{callback:ha.formatters.numeric}});const Ar=s=>Math.floor(nn(s)),xn=(s,e)=>Math.pow(10,Ar(s)+e);function Pd(s){return s/Math.pow(10,Ar(s))===1}function Od(s,e,t){const n=Math.pow(10,t),i=Math.floor(s/n);return Math.ceil(e/n)-i}function L1(s,e){const t=e-s;let n=Ar(t);for(;Od(s,e,n)>10;)n++;for(;Od(s,e,n)<10;)n--;return Math.min(n,Ar(s))}function F1(s,{min:e,max:t}){e=Ht(s.min,e);const n=[],i=Ar(e);let r=L1(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=i>r?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=Ht(s.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<t;)n.push({value:d,major:Pd(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=Ht(s.max,d);return n.push({value:f,major:Pd(f),significand:h}),n}class zl extends Bn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Uo.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return et(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=et(e)?Math.max(0,e):null,this.max=et(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!et(this._userMin)&&(this.min=e===xn(this.min,0)?xn(this.min,-1):xn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=a=>n=e?n:a,o=a=>i=t?i:a;n===i&&(n<=0?(r(1),o(10)):(r(xn(n,-1)),o(xn(i,1)))),n<=0&&r(xn(i,-1)),i<=0&&o(xn(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},n=F1(t,this);return e.bounds==="ticks"&&Fg(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Lr(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=nn(e),this._valueRange=nn(this.max)-nn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(nn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}S(zl,"id","logarithmic"),S(zl,"defaults",{ticks:{callback:ha.formatters.logarithmic,major:{enabled:!0}}});function ql(s){const e=s.ticks;if(e.display&&s.display){const t=At(e.backdropPadding);return de(e.font&&e.font.size,Ge.font.size)+t.height}return 0}function B1(s,e,t){return t=Ye(t)?t:[t],{w:qk(s,e.string,t),h:t.length*e.lineHeight}}function Cd(s,e,t,n,i){return s===n||s===i?{start:e-t/2,end:e+t/2}:s<n||s>i?{start:e-t,end:e}:{start:e,end:e+t}}function W1(s){const e={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},t=Object.assign({},e),n=[],i=[],r=s._pointLabels.length,o=s.options.pointLabels,a=o.centerPointLabels?Oe/r:0;for(let l=0;l<r;l++){const c=o.setContext(s.getPointLabelContext(l));i[l]=c.padding;const u=s.getPointPosition(l,s.drawingArea+i[l],a),h=gt(c.font),d=B1(s.ctx,h,s._pointLabels[l]);n[l]=d;const f=kt(s.getIndexAngle(l)+a),g=Math.round(Cc(f)),p=Cd(g,u.x,d.w,0,180),m=Cd(g,u.y,d.h,90,270);j1(t,e,f,p,m)}s.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),s._pointLabelItems=H1(s,n,i)}function j1(s,e,t,n,i){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/r,s.l=Math.min(s.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/r,s.r=Math.max(s.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,s.t=Math.min(s.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,s.b=Math.max(s.b,e.b+l))}function V1(s,e,t){const n=s.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=t,l=s.getPointPosition(e,n+i+o,r),c=Math.round(Cc(kt(l.angle+it))),u=Y1(l.y,a.h,c),h=z1(c),d=q1(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function U1(s,e){if(!e)return!0;const{left:t,top:n,right:i,bottom:r}=s;return!(Ls({x:t,y:n},e)||Ls({x:t,y:r},e)||Ls({x:i,y:n},e)||Ls({x:i,y:r},e))}function H1(s,e,t){const n=[],i=s._pointLabels.length,r=s.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:ql(r)/2,additionalAngle:o?Oe/i:0};let c;for(let u=0;u<i;u++){l.padding=t[u],l.size=e[u];const h=V1(s,u,l);n.push(h),a==="auto"&&(h.visible=U1(h,c),h.visible&&(c=h))}return n}function z1(s){return s===0||s===180?"center":s<180?"left":"right"}function q1(s,e,t){return t==="right"?s-=e:t==="center"&&(s-=e/2),s}function Y1(s,e,t){return t===90||t===270?s-=e/2:(t>270||t<90)&&(s-=e),s}function G1(s,e,t){const{left:n,top:i,right:r,bottom:o}=t,{backdropColor:a}=e;if(!Se(a)){const l=Nn(e.borderRadius),c=At(e.backdropPadding);s.fillStyle=a;const u=n-c.left,h=i-c.top,d=r-n+c.width,f=o-i+c.height;Object.values(l).some(g=>g!==0)?(s.beginPath(),Or(s,{x:u,y:h,w:d,h:f,radius:l}),s.fill()):s.fillRect(u,h,d,f)}}function K1(s,e){const{ctx:t,options:{pointLabels:n}}=s;for(let i=e-1;i>=0;i--){const r=s._pointLabelItems[i];if(!r.visible)continue;const o=n.setContext(s.getPointLabelContext(i));G1(t,o,r);const a=gt(o.font),{x:l,y:c,textAlign:u}=r;Fn(t,s._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function Ap(s,e,t,n){const{ctx:i}=s;if(t)i.arc(s.xCenter,s.yCenter,e,0,He);else{let r=s.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let o=1;o<n;o++)r=s.getPointPosition(o,e),i.lineTo(r.x,r.y)}}function J1(s,e,t,n,i){const r=s.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!n||!a||!l||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),Ap(s,t,o,n),r.closePath(),r.stroke(),r.restore())}function X1(s,e,t){return gn(s,{label:t,index:e,type:"pointLabel"})}class Yi extends Uo{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=At(ql(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=et(e)&&!isNaN(e)?e:0,this.max=et(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ql(this.options))}generateTickLabels(e){Uo.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{const i=Ue(this.options.pointLabels.callback,[t,n],this);return i||i===0?i:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?W1(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){const t=He/(this._pointLabels.length||1),n=this.options.startAngle||0;return kt(e*t+ns(n))}getDistanceFromCenterForValue(e){if(Se(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Se(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return X1(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const i=this.getIndexAngle(e)-it+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Ap(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&K1(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=i.setContext(d),g=r.setContext(d);J1(this,f,l,o,g)}}),n.display){for(e.save(),a=o-1;a>=0;a--){const u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=n.setContext(this.getContext(l)),u=gt(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=At(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}Fn(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}S(Yi,"id","radialLinear"),S(Yi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ha.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),S(Yi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),S(Yi,"descriptors",{angleLines:{_fallback:"grid"}});const ya={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Bt=Object.keys(ya);function Ad(s,e){return s-e}function Rd(s,e){if(Se(e))return null;const t=s._adapter,{parser:n,round:i,isoWeekday:r}=s._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),et(o)||(o=typeof n=="string"?t.parse(o,n):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(_i(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,i)),+o)}function Md(s,e,t,n){const i=Bt.length;for(let r=Bt.indexOf(s);r<i-1;++r){const o=ya[Bt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=n)return Bt[r]}return Bt[i-1]}function Q1(s,e,t,n,i){for(let r=Bt.length-1;r>=Bt.indexOf(t);r--){const o=Bt[r];if(ya[o].common&&s._adapter.diff(i,n,o)>=e-1)return o}return Bt[t?Bt.indexOf(t):0]}function Z1(s){for(let e=Bt.indexOf(s)+1,t=Bt.length;e<t;++e)if(ya[Bt[e]].common)return Bt[e]}function Dd(s,e,t){if(!t)s[e]=!0;else if(t.length){const{lo:n,hi:i}=Ac(t,e),r=t[n]>=e?t[n]:t[i];s[r]=!0}}function eP(s,e,t,n){const i=s._adapter,r=+i.startOf(e[0].value,n),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,n))l=t[a],l>=0&&(e[l].major=!0);return e}function Id(s,e,t){const n=[],i={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],i[a]=o,n.push({value:a,major:!1});return r===0||!t?n:eP(s,n,i,t)}class Rr extends Bn{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),i=this._adapter=new up._date(e.adapters.date);i.init(t),ir(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Rd(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=et(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=et(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=Dk(i,r,o);return this._unit=t.unit||(n.autoSkip?Md(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):Q1(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Z1(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Id(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?n=r:n=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=bt(t,0,o),n=bt(n,0,o),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||Md(r.minUnit,t,n,this._getLabelCapacity(t)),a=de(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=_i(l)||l===!0,u={};let h=t,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(n,t,o)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<n;d=+e.add(d,a,o),f++)Dd(u,d,g);return(d===n||i.bounds==="ticks"||f===1)&&Dd(u,d,g),Object.keys(u).sort(Ad).map(p=>+p)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,r=this._unit,o=t||i[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,n,i){const r=this.options,o=r.ticks.callback;if(o)return Ue(o,[e,t,n],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=n[t],f=c&&h&&d&&d.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=ns(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Id(this,[e],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,n=i.length;t<n;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(Rd(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jg(e.sort(Ad))}}S(Rr,"id","time"),S(Rr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ao(s,e,t){let n=0,i=s.length-1,r,o,a,l;t?(e>=s[n].pos&&e<=s[i].pos&&({lo:n,hi:i}=$s(s,"pos",e)),{pos:r,time:a}=s[n],{pos:o,time:l}=s[i]):(e>=s[n].time&&e<=s[i].time&&({lo:n,hi:i}=$s(s,"time",e)),{time:r,pos:a}=s[n],{time:o,pos:l}=s[i]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Yl extends Rr{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=ao(t,this.min),this._tableRange=ao(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=n&&i.push(c);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(ao(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return ao(this._table,n*this._tableRange+this._minPos,!0)}}S(Yl,"id","timeseries"),S(Yl,"defaults",Rr.defaults);var tP=Object.freeze({__proto__:null,CategoryScale:Ul,LinearScale:Hl,LogarithmicScale:zl,RadialLinearScale:Yi,TimeScale:Rr,TimeSeriesScale:Yl});const sP=[lE,LT,M1,tP];Kt.register(...sP);const nP={class:"heart-rate-chart"},iP=ne({__name:"HeartRateChart",props:{heartrateStream:{},workoutDuration:{}},setup(s){const e=I(null),t=I(null),n=I(!1),i=I(0),r=s;ht(async()=>{await pt(),await a()});function o(){if(t.value){try{t.value.tooltip.setActiveElements([],{x:0,y:0}),t.value.destroy()}catch(l){console.warn("Error destroying chart:",l)}t.value=null}}async function a(){if(!e.value||!r.heartrateStream||!r.heartrateStream.data||r.heartrateStream.data.length===0||n.value)return;n.value=!0,i.value++;const l=i.value;if(o(),await new Promise(y=>setTimeout(y,50)),await pt(),l!==i.value){n.value=!1;return}if(!e.value){n.value=!1;return}const c=r.heartrateStream.data,u=r.workoutDuration/c.length,h=c.map((y,b)=>({x:b*u,y})),d=getComputedStyle(document.documentElement),f={datasets:[{label:"Heart Rate",data:h,borderColor:"#fc4c02",backgroundColor:"rgba(252, 76, 2, 0.1)",fill:!0,borderWidth:2,pointRadius:0,pointHoverRadius:4,tension:.1}]},g={family:"Avenir",size:14,color:d.getPropertyValue("--text")},p={family:"Avenir",size:16,weight:"900",color:d.getPropertyValue("--text")},m={type:"line",data:f,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},plugins:{tooltip:{mode:"index",intersect:!1,bodyFont:g,backgroundColor:d.getPropertyValue("--sec"),titleColor:d.getPropertyValue("--text"),bodyColor:d.getPropertyValue("--text"),borderColor:d.getPropertyValue("--border"),borderWidth:1,callbacks:{title:function(y){const b=y[0].parsed.x,v=Math.floor(b/60),x=Math.floor(b%60);return`${v}:${x.toString().padStart(2,"0")}`},label:function(y){return`${y.parsed.y} BPM`}}},legend:{display:!1},title:{display:!0,text:"Heart Rate During Workout",font:p}},scales:{x:{type:"linear",title:{display:!0,text:"Time (minutes)",font:g},ticks:{font:g,maxTicksLimit:8,callback:function(y){const b=y,v=Math.floor(b/60),x=Math.floor(b%60),T=Math.floor(b%1*60);return v>0?`${v}:${x.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`:`${x}:${T.toString().padStart(2,"0")}`}},grid:{color:d.getPropertyValue("--border")}},y:{title:{display:!0,text:"Heart Rate (BPM)",font:g},ticks:{font:g,maxTicksLimit:6},grid:{color:d.getPropertyValue("--border")}}}}};try{if(l!==i.value||!e.value){n.value=!1;return}const y=new Kt(e.value,m);l===i.value?t.value=y:y.destroy()}catch(y){console.error("Error creating heart rate chart:",y)}finally{n.value=!1}}return os(()=>r.heartrateStream,async()=>{await pt(),await a()},{deep:!0}),os(()=>r.workoutDuration,async()=>{await pt(),await a()}),(l,c)=>(P(),$("div",nP,[k("canvas",{ref_key:"canvasRef",ref:e,class:"chart-canvas"},null,512)]))}}),rP=ue(iP,[["__scopeId","data-v-a48332fe"]]),oP={key:1,class:"viewArea"},aP={class:"margins"},lP={class:"greyed"},cP={key:0,class:"softBubble"},uP={key:1,class:"heart-rate-section"},hP={key:0,class:"heart-rate-chart-container"},dP={class:"hr-stats"},fP={class:"hr-stat"},gP={class:"value"},pP={class:"hr-stat"},mP={class:"value"},yP={class:"hr-stat"},bP={class:"value"},vP={key:0,class:"fab fa-strava"},_P={key:1,class:"fa-solid fa-spinner fa-spin"},wP={key:3,class:"strava-status"},xP={class:"activity-id"},kP=ne({__name:"ViewWorkout",props:["workout_id"],setup(s){const e=s,t=I(null),n=I(!0),i=I(!0),r=I([]),o=I([]),a=I(!1),l=I(!1),c=I(""),u=I("success"),h=I(!1),d=I(new Si);ht(async()=>{const m=await Is.fetchById(e.workout_id);t.value=m.workout,i.value=!1,console.log(t.value);const y=await ie.rpc("get_weight_pbs",{pb_exercise_ids:await t.value.getExerciseIds()});if(y.error){console.error("Error fetching weight PBs:",y.error);return}y.data&&Array.isArray(y.data)&&(r.value=y.data.map(v=>v.id));const b=await ie.rpc("get_volume_pbs",{pb_exercise_ids:await t.value.getExerciseIds()});if(b.error){console.error("Error fetching volume PBs:",b.error);return}b.data&&Array.isArray(b.data)&&(o.value=b.data.map(v=>v.id)),await g()});const f=I(!1),g=async()=>{try{const{data:{user:m}}=await ie.auth.getUser();if(!m)return;const{data:y,error:b}=await ie.from("profiles").select("strava_access_token").eq("id",m.id).single();if(b){console.error("Error fetching profile:",b);return}y!=null&&y.strava_access_token&&(f.value=!0)}catch(m){console.error("Error checking Strava connection:",m)}},p=async()=>{if(t.value)try{l.value=!0,c.value="";const{data:{session:m}}=await ie.auth.getSession();if(!m)throw new Error("Not authenticated");const y=await fetch("https://gkyqqlkxpfskmtryfmyp.supabase.co/functions/v1/fetchStrava",{method:"POST",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({workout_id:t.value.workout_id})});if(!y.ok)throw new Error("Failed to sync workout");const b=await y.json();if(console.log("Sync result:",b),b.linkedActivity){c.value="Workout synced successfully with Strava!",u.value="success";const v=await Is.fetchById(e.workout_id);t.value=v.workout}else c.value="No matching Strava activity found for this workout.",u.value="error";setTimeout(()=>{c.value=""},3e3)}catch(m){console.error("Sync error:",m),c.value="Failed to sync workout. Please try again.",u.value="error",setTimeout(()=>{c.value=""},3e3)}finally{l.value=!1}};return(m,y)=>(P(),$(_e,null,[W(Nr,{error:d.value},null,8,["error"]),a.value&&t.value?(P(),ke(Kx,{key:0,workout:t.value,onCancel:y[0]||(y[0]=b=>a.value=!1)},null,8,["workout"])):K("",!0),t.value?(P(),$("div",oP,[k("div",aP,[k("h2",null,[ve(se(t.value.getTitle())+" ",1),k("i",{class:"fa-solid fa-ellipsis clickable",onClick:y[1]||(y[1]=b=>a.value=!0)})]),k("p",lP,se(t.value.getDateString()),1),t.value.getNotes()!==""?(P(),$("p",cP,se(t.value.getNotes()),1)):K("",!0),W(mx,{workout:t.value},null,8,["workout"]),t.value.getHeartrateStream()?(P(),$("div",uP,[W(Tt,{onClick:y[2]||(y[2]=b=>h.value=!h.value),fullWidth:""},{default:nt(()=>[y[5]||(y[5]=k("i",{class:"fa-solid fa-heart",style:{color:"#fc4c02"}},null,-1)),ve(" "+se(h.value?"Hide Heart Rate Chart":"Show Heart Rate Chart"),1)]),_:1}),h.value?(P(),$("div",hP,[W(rP,{"heartrate-stream":t.value.getHeartrateStream(),"workout-duration":t.value.getDuration()},null,8,["heartrate-stream","workout-duration"]),k("div",dP,[k("div",fP,[y[6]||(y[6]=k("div",{class:"label"},"Average",-1)),k("div",gP,se(Math.round(t.value.getHeartrateStream().data.reduce((b,v)=>b+v,0)/t.value.getHeartrateStream().data.length))+" BPM",1)]),k("div",pP,[y[7]||(y[7]=k("div",{class:"label"},"Maximum",-1)),k("div",mP,se(Math.max(...t.value.getHeartrateStream().data))+" BPM",1)]),k("div",yP,[y[8]||(y[8]=k("div",{class:"label"},"Minimum",-1)),k("div",bP,se(Math.min(...t.value.getHeartrateStream().data))+" BPM",1)])])])):K("",!0)])):K("",!0),W(Tt,{onClick:y[3]||(y[3]=b=>n.value=!n.value),fullWidth:""},{default:nt(()=>[k("i",{class:at(["fa-solid",n.value?"fa-eye-slash":"fa-eye"])},null,2),ve(" "+se(n.value?"Hide Sets":"Show Sets"),1)]),_:1}),f.value&&!t.value.linked_strava_id?(P(),ke(Tt,{key:2,onClick:p,disabled:l.value,fullWidth:"",class:"strava-sync-btn"},{default:nt(()=>[l.value?(P(),$("i",_P)):(P(),$("i",vP)),ve(" "+se(l.value?"Syncing...":"Sync with Strava"),1)]),_:1},8,["disabled"])):K("",!0),t.value.linked_strava_id?(P(),$("div",wP,[y[9]||(y[9]=k("i",{class:"fab fa-strava"},null,-1)),y[10]||(y[10]=k("span",null,"Linked to Strava Activity",-1)),k("span",xP,"#"+se(t.value.linked_strava_id),1)])):K("",!0),c.value?(P(),$("div",{key:4,class:at(["sync-message",u.value])},se(c.value),3)):K("",!0),(P(!0),$(_e,null,Hs(t.value.getExercises(),(b,v)=>(P(),ke(Hx,{key:b.getName(),exercise:b,showSets:n.value,index:v,weightPbSets:r.value,volumePbSets:o.value},null,8,["exercise","showSets","index","weightPbSets","volumePbSets"]))),128)),W(qx,{workout:t.value},null,8,["workout"]),W(Tt,{onClick:y[4]||(y[4]=b=>t.value.addEmptyExercise()),fullWidth:""},{default:nt(()=>[...y[11]||(y[11]=[k("i",{class:"fa-solid fa-plus"},null,-1),ve(" Add Exercise ",-1)])]),_:1})])])):K("",!0),i.value?(P(),ke(fn,{key:2})):K("",!0)],64))}}),SP=ue(kP,[["__scopeId","data-v-121dd1ad"]]),EP={class:"container"},TP=["onClick"],PP=ne({__name:"Selector",props:{options:{},colorSwap:{type:Boolean}},emits:["select"],setup(s,{emit:e}){const t=s,n=I("");return ht(()=>{t.options.length>0&&(n.value=t.options[0].value)}),(i,r)=>(P(),$("div",EP,[k("div",{class:at(["selector",{colorSwap:s.colorSwap}])},[(P(!0),$(_e,null,Hs(s.options,o=>(P(),$("div",{key:o.value,class:at({selectorOption:!0,clickable:!0,selected:o.value===n.value,colorSwap:s.colorSwap}),onClick:a=>{n.value=o.value,i.$emit("select",o.value)}},se(o.label),11,TP))),128))],2)]))}}),cr=ue(PP,[["__scopeId","data-v-e16fb3a8"]]);function OP(s,e,t,n){if(s.length===0)return[];const i=[...s].sort((h,d)=>h.x.getTime()-d.x.getTime()),r=i[0].x,o=i[i.length-1].x,a=xe.addPeriod(xe.getStartOfTerm(0,t)||r,t,-n),l=xe.addPeriod(xe.getEndOfTerm(0,t)||o,t,-n),c=Rp(a,l,e),u=new Array(c.length-1).fill(0);for(const{x:h,y:d}of s){const f=AP(h,c);f>=0&&f<u.length&&(u[f]+=d)}return u}function CP(s,e,t,n){if(s.length===0)return[];const i=[...s].sort((u,h)=>u.x.getTime()-h.x.getTime()),r=i[0].x,o=i[i.length-1].x,a=xe.addPeriod(xe.getStartOfTerm(0,t)||r,t,-n),l=xe.addPeriod(xe.getEndOfTerm(0,t)||o,t,-n),c=Rp(a,l,e);return c.slice(0,-1).map((u,h)=>RP(u,c[h+1],e))}function Rp(s,e,t){const n=[];let i=Nd(s,t);const r=nl(e,t,1);for(;i<=r;)n.push(new Date(i)),i=Nd(nl(i,t,1),t);return n.length===1&&n.push(nl(n[0],t,1)),n}function AP(s,e){for(let t=0;t<e.length-1;t++)if(s>=e[t]&&s<e[t+1])return t;return s>=e[e.length-1]?e.length-2:-1}function RP(s,e,t){const n=i=>{switch(t){case"day":return i.toLocaleDateString(void 0,{month:"short",day:"numeric"});case"week":return`${i.toLocaleDateString(void 0,{month:"short",day:"numeric"})}`;case"month":return i.toLocaleDateString(void 0,{month:"short",year:"2-digit"});case"year":return i.getFullYear().toString()}};if(t==="week"){const i=new Date(e);return i.setDate(i.getDate()-1),`${n(s)}  ${n(i)}`}return n(s)}function Nd(s,e){const t=new Date(s);switch(e){case"day":t.setHours(0,0,0,0);break;case"week":t.setHours(0,0,0,0);const n=t.getDay();t.setDate(t.getDate()-(n===0?6:n-1));break;case"month":t.setDate(1),t.setHours(0,0,0,0);break;case"year":t.setMonth(0,1),t.setHours(0,0,0,0);break}return t}function nl(s,e,t){const n=new Date(s);switch(e){case"day":n.setDate(n.getDate()+t);break;case"week":n.setDate(n.getDate()+t*7);break;case"month":n.setMonth(n.getMonth()+t);break;case"year":n.setFullYear(n.getFullYear()+t);break}return n}const $d=getComputedStyle(document.documentElement),Mp={borderColor:$d.getPropertyValue("--accent"),backgroundColor:$d.getPropertyValue("--accentTransparent"),borderWidth:2,borderRadius:10,pointRadius:5,pointHoverRadius:10},Dp=6048e5,MP=864e5,Fr=6e4,Br=36e5,DP=1e3,Ld=Symbol.for("constructDateFrom");function tt(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&Ld in s?s[Ld](e):s instanceof Date?new s.constructor(e):new Date(e)}function ge(s,e){return tt(e||s,s)}function ba(s,e,t){const n=ge(s,t==null?void 0:t.in);return isNaN(e)?tt((t==null?void 0:t.in)||s,NaN):(e&&n.setDate(n.getDate()+e),n)}function jc(s,e,t){const n=ge(s,t==null?void 0:t.in);if(isNaN(e))return tt(s,NaN);if(!e)return n;const i=n.getDate(),r=tt(s,n.getTime());r.setMonth(n.getMonth()+e+1,0);const o=r.getDate();return i>=o?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function Vc(s,e,t){return tt(s,+ge(s)+e)}function IP(s,e,t){return Vc(s,e*Br)}let NP={};function Wn(){return NP}function ks(s,e){var a,l,c,u;const t=Wn(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=ge(s,e==null?void 0:e.in),r=i.getDay(),o=(r<n?7:0)+r-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ki(s,e){return ks(s,{...e,weekStartsOn:1})}function Ip(s,e){const t=ge(s,e==null?void 0:e.in),n=t.getFullYear(),i=tt(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const r=ki(i),o=tt(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=ki(o);return t.getTime()>=r.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Ho(s){const e=ge(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function jn(s,...e){const t=tt.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Gl(s,e){const t=ge(s,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function Np(s,e,t){const[n,i]=jn(t==null?void 0:t.in,s,e),r=Gl(n),o=Gl(i),a=+r-Ho(r),l=+o-Ho(o);return Math.round((a-l)/MP)}function $P(s,e){const t=Ip(s,e),n=tt(s,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),ki(n)}function LP(s,e,t){const n=ge(s,t==null?void 0:t.in);return n.setTime(n.getTime()+e*Fr),n}function FP(s,e,t){return jc(s,e*3,t)}function BP(s,e,t){return Vc(s,e*1e3)}function WP(s,e,t){return ba(s,e*7,t)}function jP(s,e,t){return jc(s,e*12,t)}function ur(s,e){const t=+ge(s)-+ge(e);return t<0?-1:t>0?1:t}function VP(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function $p(s){return!(!VP(s)&&typeof s!="number"||isNaN(+ge(s)))}function UP(s,e,t){const[n,i]=jn(t==null?void 0:t.in,s,e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function HP(s,e,t){const[n,i]=jn(t==null?void 0:t.in,s,e);return n.getFullYear()-i.getFullYear()}function Lp(s,e,t){const[n,i]=jn(t==null?void 0:t.in,s,e),r=Fd(n,i),o=Math.abs(Np(n,i));n.setDate(n.getDate()-r*o);const a=+(Fd(n,i)===-r),l=r*(o-a);return l===0?0:l}function Fd(s,e){const t=s.getFullYear()-e.getFullYear()||s.getMonth()-e.getMonth()||s.getDate()-e.getDate()||s.getHours()-e.getHours()||s.getMinutes()-e.getMinutes()||s.getSeconds()-e.getSeconds()||s.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Wr(s){return e=>{const n=(s?Math[s]:Math.trunc)(e);return n===0?0:n}}function zP(s,e,t){const[n,i]=jn(t==null?void 0:t.in,s,e),r=(+n-+i)/Br;return Wr(t==null?void 0:t.roundingMethod)(r)}function Uc(s,e){return+ge(s)-+ge(e)}function qP(s,e,t){const n=Uc(s,e)/Fr;return Wr(t==null?void 0:t.roundingMethod)(n)}function Fp(s,e){const t=ge(s,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function Bp(s,e){const t=ge(s,e==null?void 0:e.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function YP(s,e){const t=ge(s,e==null?void 0:e.in);return+Fp(t,e)==+Bp(t,e)}function Wp(s,e,t){const[n,i,r]=jn(t==null?void 0:t.in,s,s,e),o=ur(i,r),a=Math.abs(UP(i,r));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=ur(i,r)===-o;YP(n)&&a===1&&ur(n,r)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function GP(s,e,t){const n=Wp(s,e,t)/3;return Wr(t==null?void 0:t.roundingMethod)(n)}function KP(s,e,t){const n=Uc(s,e)/1e3;return Wr(t==null?void 0:t.roundingMethod)(n)}function JP(s,e,t){const n=Lp(s,e,t)/7;return Wr(t==null?void 0:t.roundingMethod)(n)}function XP(s,e,t){const[n,i]=jn(t==null?void 0:t.in,s,e),r=ur(n,i),o=Math.abs(HP(n,i));n.setFullYear(1584),i.setFullYear(1584);const a=ur(n,i)===-r,l=r*(o-+a);return l===0?0:l}function QP(s,e){const t=ge(s,e==null?void 0:e.in),n=t.getMonth(),i=n-n%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function ZP(s,e){const t=ge(s,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function eO(s,e){const t=ge(s,e==null?void 0:e.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function jp(s,e){const t=ge(s,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function tO(s,e){const t=ge(s,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function sO(s,e){var a,l;const t=Wn(),n=t.weekStartsOn??((l=(a=t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=ge(s,e==null?void 0:e.in),r=i.getDay(),o=(r<n?-7:0)+6-(r-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function nO(s,e){const t=ge(s,e==null?void 0:e.in);return t.setSeconds(59,999),t}function iO(s,e){const t=ge(s,e==null?void 0:e.in),n=t.getMonth(),i=n-n%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function rO(s,e){const t=ge(s,e==null?void 0:e.in);return t.setMilliseconds(999),t}const oO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aO=(s,e,t)=>{let n;const i=oO[s];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function il(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const lO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hO={date:il({formats:lO,defaultWidth:"full"}),time:il({formats:cO,defaultWidth:"full"}),dateTime:il({formats:uO,defaultWidth:"full"})},dO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fO=(s,e,t,n)=>dO[s];function Ii(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let i;if(n==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=s.formattingValues[a]||s.formattingValues[o]}else{const o=s.defaultWidth,a=t!=null&&t.width?String(t.width):s.defaultWidth;i=s.values[a]||s.values[o]}const r=s.argumentCallback?s.argumentCallback(e):e;return i[r]}}const gO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_O=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},wO={ordinalNumber:_O,era:Ii({values:gO,defaultWidth:"wide"}),quarter:Ii({values:pO,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ii({values:mO,defaultWidth:"wide"}),day:Ii({values:yO,defaultWidth:"wide"}),dayPeriod:Ii({values:bO,defaultWidth:"wide",formattingValues:vO,defaultFormattingWidth:"wide"})};function Ni(s){return(e,t={})=>{const n=t.width,i=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],r=e.match(i);if(!r)return null;const o=r[0],a=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(a)?kO(a,h=>h.test(o)):xO(a,h=>h.test(o));let c;c=s.valueCallback?s.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function xO(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function kO(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function SO(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const i=n[0],r=e.match(s.parsePattern);if(!r)return null;let o=s.valueCallback?s.valueCallback(r[0]):r[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const EO=/^(\d+)(th|st|nd|rd)?/i,TO=/\d+/i,PO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OO={any:[/^b/i,/^(a|c)/i]},CO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AO={any:[/1/i,/2/i,/3/i,/4/i]},RO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},DO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},IO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$O={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LO={ordinalNumber:SO({matchPattern:EO,parsePattern:TO,valueCallback:s=>parseInt(s,10)}),era:Ni({matchPatterns:PO,defaultMatchWidth:"wide",parsePatterns:OO,defaultParseWidth:"any"}),quarter:Ni({matchPatterns:CO,defaultMatchWidth:"wide",parsePatterns:AO,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ni({matchPatterns:RO,defaultMatchWidth:"wide",parsePatterns:MO,defaultParseWidth:"any"}),day:Ni({matchPatterns:DO,defaultMatchWidth:"wide",parsePatterns:IO,defaultParseWidth:"any"}),dayPeriod:Ni({matchPatterns:NO,defaultMatchWidth:"any",parsePatterns:$O,defaultParseWidth:"any"})},Vp={code:"en-US",formatDistance:aO,formatLong:hO,formatRelative:fO,localize:wO,match:LO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function FO(s,e){const t=ge(s,e==null?void 0:e.in);return Np(t,jp(t))+1}function Up(s,e){const t=ge(s,e==null?void 0:e.in),n=+ki(t)-+$P(t);return Math.round(n/Dp)+1}function Hc(s,e){var u,h,d,f;const t=ge(s,e==null?void 0:e.in),n=t.getFullYear(),i=Wn(),r=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(d=i.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=tt((e==null?void 0:e.in)||s,0);o.setFullYear(n+1,0,r),o.setHours(0,0,0,0);const a=ks(o,e),l=tt((e==null?void 0:e.in)||s,0);l.setFullYear(n,0,r),l.setHours(0,0,0,0);const c=ks(l,e);return+t>=+a?n+1:+t>=+c?n:n-1}function BO(s,e){var a,l,c,u;const t=Wn(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=Hc(s,e),r=tt((e==null?void 0:e.in)||s,0);return r.setFullYear(i,0,n),r.setHours(0,0,0,0),ks(r,e)}function Hp(s,e){const t=ge(s,e==null?void 0:e.in),n=+ks(t,e)-+BO(t,e);return Math.round(n/Dp)+1}function Ne(s,e){const t=s<0?"-":"",n=Math.abs(s).toString().padStart(e,"0");return t+n}const Ks={y(s,e){const t=s.getFullYear(),n=t>0?t:1-t;return Ne(e==="yy"?n%100:n,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):Ne(t+1,2)},d(s,e){return Ne(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return Ne(s.getHours()%12||12,e.length)},H(s,e){return Ne(s.getHours(),e.length)},m(s,e){return Ne(s.getMinutes(),e.length)},s(s,e){return Ne(s.getSeconds(),e.length)},S(s,e){const t=e.length,n=s.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return Ne(i,e.length)}},Zn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Bd={G:function(s,e,t){const n=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const n=s.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return Ks.y(s,e)},Y:function(s,e,t,n){const i=Hc(s,n),r=i>0?i:1-i;if(e==="YY"){const o=r%100;return Ne(o,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):Ne(r,e.length)},R:function(s,e){const t=Ip(s);return Ne(t,e.length)},u:function(s,e){const t=s.getFullYear();return Ne(t,e.length)},Q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ne(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ne(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,e,t){const n=s.getMonth();switch(e){case"M":case"MM":return Ks.M(s,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(s,e,t){const n=s.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ne(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(s,e,t,n){const i=Hp(s,n);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Ne(i,e.length)},I:function(s,e,t){const n=Up(s);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Ne(n,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):Ks.d(s,e)},D:function(s,e,t){const n=FO(s);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Ne(n,e.length)},E:function(s,e,t){const n=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(s,e,t,n){const i=s.getDay(),r=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return Ne(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(s,e,t,n){const i=s.getDay(),r=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return Ne(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(s,e,t){const n=s.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Ne(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(s,e,t){const i=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,e,t){const n=s.getHours();let i;switch(n===12?i=Zn.noon:n===0?i=Zn.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,e,t){const n=s.getHours();let i;switch(n>=17?i=Zn.evening:n>=12?i=Zn.afternoon:n>=4?i=Zn.morning:i=Zn.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let n=s.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Ks.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):Ks.H(s,e)},K:function(s,e,t){const n=s.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Ne(n,e.length)},k:function(s,e,t){let n=s.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Ne(n,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):Ks.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):Ks.s(s,e)},S:function(s,e){return Ks.S(s,e)},X:function(s,e,t){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return jd(n);case"XXXX":case"XX":return Pn(n);case"XXXXX":case"XXX":default:return Pn(n,":")}},x:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"x":return jd(n);case"xxxx":case"xx":return Pn(n);case"xxxxx":case"xxx":default:return Pn(n,":")}},O:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Wd(n,":");case"OOOO":default:return"GMT"+Pn(n,":")}},z:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Wd(n,":");case"zzzz":default:return"GMT"+Pn(n,":")}},t:function(s,e,t){const n=Math.trunc(+s/1e3);return Ne(n,e.length)},T:function(s,e,t){return Ne(+s,e.length)}};function Wd(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),i=Math.trunc(n/60),r=n%60;return r===0?t+String(i):t+String(i)+e+Ne(r,2)}function jd(s,e){return s%60===0?(s>0?"-":"+")+Ne(Math.abs(s)/60,2):Pn(s,e)}function Pn(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),i=Ne(Math.trunc(n/60),2),r=Ne(n%60,2);return t+i+e+r}const Vd=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zp=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},WO=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return Vd(s,e);let r;switch(n){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",Vd(n,e)).replace("{{time}}",zp(i,e))},Kl={p:zp,P:WO},jO=/^D+$/,VO=/^Y+$/,UO=["D","DD","YY","YYYY"];function qp(s){return jO.test(s)}function Yp(s){return VO.test(s)}function Jl(s,e,t){const n=HO(s,e,t);if(console.warn(n),UO.includes(s))throw new RangeError(n)}function HO(s,e,t){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,YO=/^'([^]*?)'?$/,GO=/''/g,KO=/[a-zA-Z]/;function JO(s,e,t){var u,h,d,f,g,p,m,y;const n=Wn(),i=(t==null?void 0:t.locale)??n.locale??Vp,r=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((p=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((y=(m=n.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??0,a=ge(s,t==null?void 0:t.in);if(!$p(a))throw new RangeError("Invalid time value");let l=e.match(qO).map(b=>{const v=b[0];if(v==="p"||v==="P"){const x=Kl[v];return x(b,i.formatLong)}return b}).join("").match(zO).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const v=b[0];if(v==="'")return{isToken:!1,value:XO(b)};if(Bd[v])return{isToken:!0,value:b};if(v.match(KO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:r,weekStartsOn:o,locale:i};return l.map(b=>{if(!b.isToken)return b.value;const v=b.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Yp(v)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&qp(v))&&Jl(v,e,String(s));const x=Bd[v[0]];return x(a,v,i.localize,c)}).join("")}function XO(s){const e=s.match(YO);return e?e[1].replace(GO,"'"):s}function QO(){return Object.assign({},Wn())}function ZO(s,e){const t=ge(s,e==null?void 0:e.in).getDay();return t===0?7:t}function eC(s,e){const t=tC(e)?new e(0):tt(e,0);return t.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),t.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),t}function tC(s){var e;return typeof s=="function"&&((e=s.prototype)==null?void 0:e.constructor)===s}const sC=10;class Gp{constructor(){S(this,"subPriority",0)}validate(e,t){return!0}}class nC extends Gp{constructor(e,t,n,i,r){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=i,r&&(this.subPriority=r)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class iC extends Gp{constructor(t,n){super();S(this,"priority",sC);S(this,"subPriority",-1);this.context=t||(i=>tt(n,i))}set(t,n){return n.timestampIsSet?t:tt(t,eC(t,this.context))}}class Ae{run(e,t,n,i){const r=this.parse(e,t,n,i);return r?{setter:new nC(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,t,n){return!0}}class rC extends Ae{constructor(){super(...arguments);S(this,"priority",140);S(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,i){switch(n){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,n,i){return n.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const rt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},bs={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ot(s,e){return s&&{value:e(s.value),rest:s.rest}}function Je(s,e){const t=e.match(s);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function vs(s,e){const t=e.match(s);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,r=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:n*(i*Br+r*Fr+o*DP),rest:e.slice(t[0].length)}}function Kp(s){return Je(rt.anyDigitsSigned,s)}function st(s,e){switch(s){case 1:return Je(rt.singleDigit,e);case 2:return Je(rt.twoDigits,e);case 3:return Je(rt.threeDigits,e);case 4:return Je(rt.fourDigits,e);default:return Je(new RegExp("^\\d{1,"+s+"}"),e)}}function zo(s,e){switch(s){case 1:return Je(rt.singleDigitSigned,e);case 2:return Je(rt.twoDigitsSigned,e);case 3:return Je(rt.threeDigitsSigned,e);case 4:return Je(rt.fourDigitsSigned,e);default:return Je(new RegExp("^-?\\d{1,"+s+"}"),e)}}function zc(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Jp(s,e){const t=e>0,n=t?e:1-e;let i;if(n<=50)i=s||100;else{const r=n+50,o=Math.trunc(r/100)*100,a=s>=r%100;i=s+o-(a?100:0)}return t?i:1-i}function Xp(s){return s%400===0||s%4===0&&s%100!==0}class oC extends Ae{constructor(){super(...arguments);S(this,"priority",130);S(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,i){const r=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return ot(st(4,t),r);case"yo":return ot(i.ordinalNumber(t,{unit:"year"}),r);default:return ot(st(n.length,t),r)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i){const r=t.getFullYear();if(i.isTwoDigitYear){const a=Jp(i.year,r);return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}const o=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class aC extends Ae{constructor(){super(...arguments);S(this,"priority",130);S(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,i){const r=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return ot(st(4,t),r);case"Yo":return ot(i.ordinalNumber(t,{unit:"year"}),r);default:return ot(st(n.length,t),r)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,i,r){const o=Hc(t,r);if(i.isTwoDigitYear){const l=Jp(i.year,o);return t.setFullYear(l,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),ks(t,r)}const a=!("era"in n)||n.era===1?i.year:1-i.year;return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),ks(t,r)}}class lC extends Ae{constructor(){super(...arguments);S(this,"priority",130);S(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return zo(n==="R"?4:n.length,t)}set(t,n,i){const r=tt(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),ki(r)}}class cC extends Ae{constructor(){super(...arguments);S(this,"priority",130);S(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return zo(n==="u"?4:n.length,t)}set(t,n,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class uC extends Ae{constructor(){super(...arguments);S(this,"priority",120);S(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"Q":case"QQ":return st(n.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class hC extends Ae{constructor(){super(...arguments);S(this,"priority",120);S(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"q":case"qq":return st(n.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class dC extends Ae{constructor(){super(...arguments);S(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);S(this,"priority",110)}parse(t,n,i){const r=o=>o-1;switch(n){case"M":return ot(Je(rt.month,t),r);case"MM":return ot(st(2,t),r);case"Mo":return ot(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class fC extends Ae{constructor(){super(...arguments);S(this,"priority",110);S(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,i){const r=o=>o-1;switch(n){case"L":return ot(Je(rt.month,t),r);case"LL":return ot(st(2,t),r);case"Lo":return ot(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function gC(s,e,t){const n=ge(s,t==null?void 0:t.in),i=Hp(n,t)-e;return n.setDate(n.getDate()-i*7),ge(n,t==null?void 0:t.in)}class pC extends Ae{constructor(){super(...arguments);S(this,"priority",100);S(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,i){switch(n){case"w":return Je(rt.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return st(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i,r){return ks(gC(t,i,r),r)}}function mC(s,e,t){const n=ge(s,t==null?void 0:t.in),i=Up(n,t)-e;return n.setDate(n.getDate()-i*7),n}class yC extends Ae{constructor(){super(...arguments);S(this,"priority",100);S(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,i){switch(n){case"I":return Je(rt.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return st(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,i){return ki(mC(t,i))}}const bC=[31,28,31,30,31,30,31,31,30,31,30,31],vC=[31,29,31,30,31,30,31,31,30,31,30,31];class _C extends Ae{constructor(){super(...arguments);S(this,"priority",90);S(this,"subPriority",1);S(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"d":return Je(rt.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return st(n.length,t)}}validate(t,n){const i=t.getFullYear(),r=Xp(i),o=t.getMonth();return r?n>=1&&n<=vC[o]:n>=1&&n<=bC[o]}set(t,n,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class wC extends Ae{constructor(){super(...arguments);S(this,"priority",90);S(this,"subpriority",1);S(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,i){switch(n){case"D":case"DD":return Je(rt.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return st(n.length,t)}}validate(t,n){const i=t.getFullYear();return Xp(i)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function qc(s,e,t){var h,d,f,g;const n=Wn(),i=(t==null?void 0:t.weekStartsOn)??((d=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)??n.weekStartsOn??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,r=ge(s,t==null?void 0:t.in),o=r.getDay(),l=(e%7+7)%7,c=7-i,u=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return ba(r,u,t)}class xC extends Ae{constructor(){super(...arguments);S(this,"priority",90);S(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,i){switch(n){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,r){return t=qc(t,i,r),t.setHours(0,0,0,0),t}}class kC extends Ae{constructor(){super(...arguments);S(this,"priority",90);S(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,i,r){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+l};switch(n){case"e":case"ee":return ot(st(n.length,t),o);case"eo":return ot(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,r){return t=qc(t,i,r),t.setHours(0,0,0,0),t}}class SC extends Ae{constructor(){super(...arguments);S(this,"priority",90);S(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,i,r){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+r.weekStartsOn+6)%7+l};switch(n){case"c":case"cc":return ot(st(n.length,t),o);case"co":return ot(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,i,r){return t=qc(t,i,r),t.setHours(0,0,0,0),t}}function EC(s,e,t){const n=ge(s,t==null?void 0:t.in),i=ZO(n,t),r=e-i;return ba(n,r,t)}class TC extends Ae{constructor(){super(...arguments);S(this,"priority",90);S(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,i){const r=o=>o===0?7:o;switch(n){case"i":case"ii":return st(n.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return ot(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return ot(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return ot(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return ot(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,n){return n>=1&&n<=7}set(t,n,i){return t=EC(t,i),t.setHours(0,0,0,0),t}}class PC extends Ae{constructor(){super(...arguments);S(this,"priority",80);S(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,i){switch(n){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(zc(i),0,0,0),t}}class OC extends Ae{constructor(){super(...arguments);S(this,"priority",80);S(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,i){switch(n){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(zc(i),0,0,0),t}}class CC extends Ae{constructor(){super(...arguments);S(this,"priority",80);S(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,i){switch(n){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,i){return t.setHours(zc(i),0,0,0),t}}class AC extends Ae{constructor(){super(...arguments);S(this,"priority",70);S(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,i){switch(n){case"h":return Je(rt.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return st(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,i){const r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class RC extends Ae{constructor(){super(...arguments);S(this,"priority",70);S(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,i){switch(n){case"H":return Je(rt.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return st(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,i){return t.setHours(i,0,0,0),t}}class MC extends Ae{constructor(){super(...arguments);S(this,"priority",70);S(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,i){switch(n){case"K":return Je(rt.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return st(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class DC extends Ae{constructor(){super(...arguments);S(this,"priority",70);S(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,i){switch(n){case"k":return Je(rt.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return st(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,i){const r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}}class IC extends Ae{constructor(){super(...arguments);S(this,"priority",60);S(this,"incompatibleTokens",["t","T"])}parse(t,n,i){switch(n){case"m":return Je(rt.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return st(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setMinutes(i,0,0),t}}class NC extends Ae{constructor(){super(...arguments);S(this,"priority",50);S(this,"incompatibleTokens",["t","T"])}parse(t,n,i){switch(n){case"s":return Je(rt.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return st(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,i){return t.setSeconds(i,0),t}}class $C extends Ae{constructor(){super(...arguments);S(this,"priority",30);S(this,"incompatibleTokens",["t","T"])}parse(t,n){const i=r=>Math.trunc(r*Math.pow(10,-n.length+3));return ot(st(n.length,t),i)}set(t,n,i){return t.setMilliseconds(i),t}}class LC extends Ae{constructor(){super(...arguments);S(this,"priority",10);S(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return vs(bs.basicOptionalMinutes,t);case"XX":return vs(bs.basic,t);case"XXXX":return vs(bs.basicOptionalSeconds,t);case"XXXXX":return vs(bs.extendedOptionalSeconds,t);case"XXX":default:return vs(bs.extended,t)}}set(t,n,i){return n.timestampIsSet?t:tt(t,t.getTime()-Ho(t)-i)}}class FC extends Ae{constructor(){super(...arguments);S(this,"priority",10);S(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return vs(bs.basicOptionalMinutes,t);case"xx":return vs(bs.basic,t);case"xxxx":return vs(bs.basicOptionalSeconds,t);case"xxxxx":return vs(bs.extendedOptionalSeconds,t);case"xxx":default:return vs(bs.extended,t)}}set(t,n,i){return n.timestampIsSet?t:tt(t,t.getTime()-Ho(t)-i)}}class BC extends Ae{constructor(){super(...arguments);S(this,"priority",40);S(this,"incompatibleTokens","*")}parse(t){return Kp(t)}set(t,n,i){return[tt(t,i*1e3),{timestampIsSet:!0}]}}class WC extends Ae{constructor(){super(...arguments);S(this,"priority",20);S(this,"incompatibleTokens","*")}parse(t){return Kp(t)}set(t,n,i){return[tt(t,i),{timestampIsSet:!0}]}}const jC={G:new rC,y:new oC,Y:new aC,R:new lC,u:new cC,Q:new uC,q:new hC,M:new dC,L:new fC,w:new pC,I:new yC,d:new _C,D:new wC,E:new xC,e:new kC,c:new SC,i:new TC,a:new PC,b:new OC,B:new CC,h:new AC,H:new RC,K:new MC,k:new DC,m:new IC,s:new NC,S:new $C,X:new LC,x:new FC,t:new BC,T:new WC},VC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,HC=/^'([^]*?)'?$/,zC=/''/g,qC=/\S/,YC=/[a-zA-Z]/;function GC(s,e,t,n){var m,y,b,v,x,T,C,A;const i=()=>tt((n==null?void 0:n.in)||t,NaN),r=QO(),o=(n==null?void 0:n.locale)??r.locale??Vp,a=(n==null?void 0:n.firstWeekContainsDate)??((y=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(b=r.locale)==null?void 0:b.options)==null?void 0:v.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((T=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:T.weekStartsOn)??r.weekStartsOn??((A=(C=r.locale)==null?void 0:C.options)==null?void 0:A.weekStartsOn)??0;if(!e)return s?i():ge(t,n==null?void 0:n.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},u=[new iC(n==null?void 0:n.in,t)],h=e.match(UC).map(O=>{const L=O[0];if(L in Kl){const Y=Kl[L];return Y(O,o.formatLong)}return O}).join("").match(VC),d=[];for(let O of h){!(n!=null&&n.useAdditionalWeekYearTokens)&&Yp(O)&&Jl(O,e,s),!(n!=null&&n.useAdditionalDayOfYearTokens)&&qp(O)&&Jl(O,e,s);const L=O[0],Y=jC[L];if(Y){const{incompatibleTokens:Z}=Y;if(Array.isArray(Z)){const we=d.find(Be=>Z.includes(Be.token)||Be.token===L);if(we)throw new RangeError(`The format string mustn't contain \`${we.fullToken}\` and \`${O}\` at the same time`)}else if(Y.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${O}\` and any other token at the same time`);d.push({token:L,fullToken:O});const q=Y.run(s,O,o.match,c);if(!q)return i();u.push(q.setter),s=q.rest}else{if(L.match(YC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");if(O==="''"?O="'":L==="'"&&(O=KC(O)),s.indexOf(O)===0)s=s.slice(O.length);else return i()}}if(s.length>0&&qC.test(s))return i();const f=u.map(O=>O.priority).sort((O,L)=>L-O).filter((O,L,Y)=>Y.indexOf(O)===L).map(O=>u.filter(L=>L.priority===O).sort((L,Y)=>Y.subPriority-L.subPriority)).map(O=>O[0]);let g=ge(t,n==null?void 0:n.in);if(isNaN(+g))return i();const p={};for(const O of f){if(!O.validate(g,c))return i();const L=O.set(g,p,c);Array.isArray(L)?(g=L[0],Object.assign(p,L[1])):g=L}return g}function KC(s){return s.match(HC)[1].replace(zC,"'")}function JC(s,e){const t=ge(s,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function XC(s,e){const t=ge(s,e==null?void 0:e.in);return t.setSeconds(0,0),t}function QC(s,e){const t=ge(s,e==null?void 0:e.in);return t.setMilliseconds(0),t}function ZC(s,e){const t=()=>tt(e==null?void 0:e.in,NaN),n=(e==null?void 0:e.additionalDigits)??2,i=nA(s);let r;if(i.date){const c=iA(i.date,n);r=rA(c.restDateString,c.year)}if(!r||isNaN(+r))return t();const o=+r;let a=0,l;if(i.time&&(a=oA(i.time),isNaN(a)))return t();if(i.timezone){if(l=aA(i.timezone),isNaN(l))return t()}else{const c=new Date(o+a),u=ge(0,e==null?void 0:e.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return ge(o+a+l,e==null?void 0:e.in)}const lo={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},eA=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,tA=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,sA=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nA(s){const e={},t=s.split(lo.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],lo.timeZoneDelimiter.test(e.date)&&(e.date=s.split(lo.timeZoneDelimiter)[0],n=s.substr(e.date.length,s.length))),n){const i=lo.timezone.exec(n);i?(e.time=n.replace(i[1],""),e.timezone=i[1]):e.time=n}return e}function iA(s,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=s.match(t);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,r=n[2]?parseInt(n[2]):null;return{year:r===null?i:r*100,restDateString:s.slice((n[1]||n[2]).length)}}function rA(s,e){if(e===null)return new Date(NaN);const t=s.match(eA);if(!t)return new Date(NaN);const n=!!t[4],i=$i(t[1]),r=$i(t[2])-1,o=$i(t[3]),a=$i(t[4]),l=$i(t[5])-1;if(n)return dA(e,a,l)?lA(e,a,l):new Date(NaN);{const c=new Date(0);return!uA(e,r,o)||!hA(e,i)?new Date(NaN):(c.setUTCFullYear(e,r,Math.max(i,o)),c)}}function $i(s){return s?parseInt(s):1}function oA(s){const e=s.match(tA);if(!e)return NaN;const t=rl(e[1]),n=rl(e[2]),i=rl(e[3]);return fA(t,n,i)?t*Br+n*Fr+i*1e3:NaN}function rl(s){return s&&parseFloat(s.replace(",","."))||0}function aA(s){if(s==="Z")return 0;const e=s.match(sA);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return gA(n,i)?t*(n*Br+i*Fr):NaN}function lA(s,e,t){const n=new Date(0);n.setUTCFullYear(s,0,4);const i=n.getUTCDay()||7,r=(e-1)*7+t+1-i;return n.setUTCDate(n.getUTCDate()+r),n}const cA=[31,null,31,30,31,30,31,31,30,31,30,31];function Qp(s){return s%400===0||s%4===0&&s%100!==0}function uA(s,e,t){return e>=0&&e<=11&&t>=1&&t<=(cA[e]||(Qp(s)?29:28))}function hA(s,e){return e>=1&&e<=(Qp(s)?366:365)}function dA(s,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function fA(s,e,t){return s===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&s>=0&&s<25}function gA(s,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const pA={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};up._date.override({_id:"date-fns",formats:function(){return pA},parse:function(s,e){if(s===null||typeof s>"u")return null;const t=typeof s;return t==="number"||s instanceof Date?s=ge(s):t==="string"&&(typeof e=="string"?s=GC(s,e,new Date,this.options):s=ZC(s,this.options)),$p(s)?s.getTime():null},format:function(s,e){return JO(s,e,this.options)},add:function(s,e,t){switch(t){case"millisecond":return Vc(s,e);case"second":return BP(s,e);case"minute":return LP(s,e);case"hour":return IP(s,e);case"day":return ba(s,e);case"week":return WP(s,e);case"month":return jc(s,e);case"quarter":return FP(s,e);case"year":return jP(s,e);default:return s}},diff:function(s,e,t){switch(t){case"millisecond":return Uc(s,e);case"second":return KP(s,e);case"minute":return qP(s,e);case"hour":return zP(s,e);case"day":return Lp(s,e);case"week":return JP(s,e);case"month":return Wp(s,e);case"quarter":return GP(s,e);case"year":return XP(s,e);default:return 0}},startOf:function(s,e,t){switch(e){case"second":return QC(s);case"minute":return XC(s);case"hour":return JC(s);case"day":return Gl(s);case"week":return ks(s);case"isoWeek":return ks(s,{weekStartsOn:+t});case"month":return ZP(s);case"quarter":return QP(s);case"year":return jp(s);default:return s}},endOf:function(s,e){switch(e){case"second":return rO(s);case"minute":return nO(s);case"hour":return tO(s);case"day":return Fp(s);case"week":return sO(s);case"month":return Bp(s);case"quarter":return iO(s);case"year":return eO(s);default:return s}}});const mA={class:"softBubble"},yA=ne({__name:"WorkoutVolumeByWorkout",props:{workouts:{},graphSize:{},backTimes:{},binSize:{},whatGraphed:{}},setup(s){const e=s,t=I(null),n=I(null),i=I(!1),r=I(0);function o(){if(n.value){try{n.value.destroy()}catch(l){console.warn("Error destroying chart:",l)}n.value=null}}async function a(){if(!t.value||!e.workouts||e.workouts.length===0||i.value)return;i.value=!0,r.value++;const l=r.value;if(o(),await pt(),l!==r.value){i.value=!1;return}if(!t.value){i.value=!1;return}const c=e.workouts.map(p=>({x:p.getStartTime(),y:p.getItem(e.whatGraphed)})),u=getComputedStyle(document.documentElement);[...e.workouts];const h={labels:CP(c,e.binSize,e.graphSize,e.backTimes),datasets:[{label:"My First Dataset",data:OP(c,e.binSize||"day",e.graphSize,e.backTimes),...Mp}]},d={family:"Avenir",size:16},f={family:"Avenir",size:20,weight:"900",color:"#FFFFFF"},g={type:"bar",data:h,options:{responsive:!0,categoryPercentage:1,animation:{duration:0},plugins:{legend:{display:!1},title:{display:!0,text:ss.fullNameForType(e.whatGraphed),font:f,color:u.getPropertyValue("--text")},tooltip:{enabled:!0,mode:"nearest",intersect:!1,callbacks:{label:function(p){return[ss.stringifyItem(p.parsed.y,e.whatGraphed)]}},bodyFont:d}},scales:{y:{ticks:{maxTicksLimit:3,font:d},position:"right",startAtZero:!1}}}};try{if(l!==r.value||!t.value){i.value=!1;return}const p=new Kt(t.value,g);l===r.value?n.value=p:p.destroy()}catch(p){console.error("Error creating chart:",p)}finally{i.value=!1}}return ht(async()=>{await pt(),a()}),os(()=>e.workouts,async(l,c)=>{if(l!==c){if(await pt(),!l||l.length===0){n.value&&(n.value.destroy(),n.value=null);return}await pt(()=>a())}},{deep:!1,immediate:!1}),os(()=>e.whatGraphed,async(l,c)=>{await pt(),a()}),sa(()=>{n.value&&(n.value.destroy(),n.value=null),i.value=!1}),(l,c)=>(P(),$("div",mA,[k("canvas",{ref_key:"canvasRef",ref:t,id:"workoutVolumeChart"},null,512)]))}}),bA={key:0},vA=ne({__name:"DashboardStatBubble",props:{label:{},value:{},prevValue:{},dispValue:{},icon:{},selected:{type:Boolean}},emits:["click"],setup(s,{emit:e}){const t=s;function n(){if(t.prevValue==0)return"N/A";let i=(t.value-t.prevValue)/t.prevValue*100;return i<0&&(i*=-1),i.toFixed(1)}return(i,r)=>(P(),$("div",{class:at(["statBubble softBubble clickable",{selected:s.selected}]),onClick:r[0]||(r[0]=o=>i.$emit("click"))},[k("p",null,[ve(se(s.label)+" ",1),k("i",{class:at(["right fa-solid",s.icon])},null,2)]),k("h2",null,se(s.dispValue),1),s.prevValue!==0?(P(),$("p",bA,[s.value!==s.prevValue?(P(),$("i",{key:0,class:at(["fa-solid",s.value-s.prevValue>=0?"fa-arrow-up":"fa-arrow-down"])},null,2)):K("",!0),ve(" "+se(n())+" % ",1)])):K("",!0)],2))}}),co=ue(vA,[["__scopeId","data-v-40435f7f"]]);class Zt{static getTotalDuration(e){return e.reduce((t,n)=>t+n.getDuration(),0)}static getTotalEnergy(e){return e.reduce((t,n)=>t+(n.getEnergy()||0),0)}static getTotalEnergyString(e){const t=this.getTotalEnergy(e);return`${ss.commaNumber(t)} kj`}static getTotalVolume(e){return e.reduce((t,n)=>t+n.getVolume(),0)}static getTotalVolumeString(e){const t=Zt.getTotalVolume(e);return`${ss.commaNumber(t)} kg`}}const _A={class:"viewArea"},wA={class:"margins"},xA={key:0,class:"periodSelect"},kA={class:"center"},SA={class:"flex"},EA={key:1},TA=ne({__name:"StatsView",setup(s){let e=[];const t=I([]),n=I([]),i=I(!0),r=I("week"),o=I("volume"),a=I(0),l=I(new Si);function c(h){switch(h){case"week":return"day";case"month":return"week";case"year":return"month";default:return"year"}}async function u(h){if(r.value=h,i.value=!0,h==="all"){t.value=[...e],await pt(),i.value=!1;return}const d=xe.getEnd(xe.addPeriod(new Date,h,-a.value),h),f=xe.getStart(d,h),g=xe.getStartOfPrevious(f,h),p=[];n.value=[];for(const m of e)m.getStartTime()>=f&&m.getStartTime()<=d&&p.push(m),m.getStartTime()>=g&&m.getStartTime()<f&&n.value.push(m);t.value=p,await pt(),i.value=!1}return ht(async()=>{try{e=await Rg(),await u("week"),i.value=!1}catch(h){l.value.setError("Failed to load workouts. Please try again later."),console.error("Failed to load workouts:",h),e=[],t.value=[],i.value=!1}}),(h,d)=>(P(),$(_e,null,[W(Nr,{error:l.value},null,8,["error"]),k("div",_A,[k("div",wA,[d[8]||(d[8]=k("h1",null,"Workout Dashboard",-1)),d[9]||(d[9]=k("p",null,"Track your fitness journey and monitor your progress",-1)),W(cr,{options:[{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"},{label:"All Time",value:"all"}],onSelect:d[0]||(d[0]=f=>{a.value=0,u(f)})}),r.value!=="all"?(P(),$("div",xA,[k("i",{class:"fa-solid fa-chevron-left clickable floatleft",onClick:d[1]||(d[1]=f=>{a.value=a.value+1,u(r.value)})}),k("div",kA,se(Te(xe).getPeriodString(r.value,a.value)),1),a.value!==0?(P(),$("i",{key:0,class:"fa-solid fa-chevron-right clickable floatright",onClick:d[2]||(d[2]=f=>{a.value=a.value>0?a.value-1:0,u(r.value)})})):K("",!0)])):K("",!0),k("div",SA,[W(co,{label:"Total Workouts",value:t.value.length,prevValue:n.value.length,dispValue:t.value.length.toString(),icon:"fa-dumbbell",selected:o.value==="workouts",onClick:d[3]||(d[3]=f=>o.value="workouts")},null,8,["value","prevValue","dispValue","selected"]),W(co,{label:"Total Time",value:Te(Zt).getTotalDuration(t.value),prevValue:Te(Zt).getTotalDuration(n.value),dispValue:Te(xe).getDurationString(Te(Zt).getTotalDuration(t.value))||"--",icon:"fa-clock",selected:o.value==="time",onClick:d[4]||(d[4]=f=>o.value="time")},null,8,["value","prevValue","dispValue","selected"]),W(co,{label:"Total Energy",value:Te(Zt).getTotalEnergy(t.value),prevValue:Te(Zt).getTotalEnergy(n.value),dispValue:Te(Zt).getTotalEnergyString(t.value),icon:"fa-fire",selected:o.value==="energy",onClick:d[5]||(d[5]=f=>o.value="energy")},null,8,["value","prevValue","dispValue","selected"]),W(co,{label:"Total Volume",value:Te(Zt).getTotalVolume(t.value),prevValue:Te(Zt).getTotalVolume(n.value),dispValue:Te(Zt).getTotalVolumeString(t.value),icon:"fa-weight-hanging",selected:o.value==="volume",onClick:d[6]||(d[6]=f=>o.value="volume")},null,8,["value","prevValue","dispValue","selected"])]),i.value?(P(),$("div",EA,[...d[7]||(d[7]=[k("p",null,"Loading workouts...",-1)])])):(P(),ke(yA,{key:2,workouts:t.value,graphSize:r.value,binSize:c(r.value),whatGraphed:o.value,backTimes:a.value},null,8,["workouts","graphSize","binSize","whatGraphed","backTimes"]))])])],64))}}),PA=ue(TA,[["__scopeId","data-v-969f4336"]]),OA={key:0,class:"number"},CA={key:0,class:"fa-solid fa-medal"},AA={key:1,class:"number"},RA={key:0,class:"fa-solid fa-medal"},MA={key:2,class:"number"},DA={key:3,class:"number"},IA={key:4,class:"number"},NA=ne({__name:"ExerciseRow",props:{exercise:{},whichPR:{}},setup(s){const e=I(!0),t=Wt(),n=s,i=I(null),r=I(null),o=I(null),a=I(null);return ht(async()=>{await n.exercise.getMoreInfo(),i.value=n.exercise.weightPB,r.value=n.exercise.volumePB,o.value=n.exercise.workoutCount,a.value=n.exercise.setCount,e.value=!1}),(l,c)=>(P(),$(_e,null,[e.value?(P(),ke(fn,{key:0})):K("",!0),k("tr",{class:"exerciseRow clickable",onClick:c[0]||(c[0]=u=>Te(t).push({name:"View Exercise",params:{exercise_id:s.exercise.getId()}}))},[k("td",null,se(s.exercise.name),1),s.whichPR==="weight"?(P(),$("td",OA,[ve(se(i.value!==null?i.value+" kg":"")+" ",1),i.value?(P(),$("i",CA)):K("",!0)])):K("",!0),s.whichPR==="volume"?(P(),$("td",AA,[ve(se(r.value!==null?r.value+" kg":"")+" ",1),r.value?(P(),$("i",RA)):K("",!0)])):K("",!0),s.whichPR==="workouts"?(P(),$("td",MA,se(o.value!==null?o.value:""),1)):K("",!0),s.whichPR==="sets"?(P(),$("td",DA,se(a.value!==null?a.value:""),1)):K("",!0),s.whichPR==="setsPerWorkout"?(P(),$("td",IA,se(o.value&&o.value>0&&a.value!==null?(a.value/o.value).toFixed(2):""),1)):K("",!0)])],64))}}),$A=ue(NA,[["__scopeId","data-v-e35043aa"]]);class va{constructor(e){S(this,"name");S(this,"id");S(this,"description");S(this,"weightPB",null);S(this,"volumePB",null);S(this,"setCount",null);S(this,"workoutCount",null);this.name=e.name,this.id=e.id,this.description=e.description}static async create(e){const{data:t,error:n}=await ie.from("exercises").select().eq("id",e).single();return n?(console.error(`Error fetching exercise info for ID ${e}:`,n),null):new va(t)}async getMoreInfo(){this.weightPB=await this.getWeightPB(),this.volumePB=await this.getVolumePB(),this.setCount=await this.getSetCount(),this.workoutCount=await Mg(this.id).then(e=>e.length)}getName(){return this.name}setName(e){this.name=e}getId(){return this.id}getDescription(){return this.description}setDescription(e){this.description=e}async getWeightPB(){const{data:e,error:t}=await ie.from("sets").select("weight").eq("exercise_id",this.id).order("weight",{ascending:!1}).limit(1);return t?(console.error(`Error fetching weight PB for exercise ID ${this.id}:`,t),Promise.resolve(null)):e&&e.length>0?Promise.resolve(e[0].weight):Promise.resolve(null)}async getVolumePB(){const{data:e,error:t}=await ie.rpc("get_volume_pb",{exercise_id:this.id});return t?(console.error(`Error fetching volume PB for exercise ID ${this.id}:`,t),Promise.resolve(null)):e&&e.length>0?Promise.resolve(e[0].volume):Promise.resolve(null)}async countSets(){const{data:e,error:t}=await ie.from("sets").select("id").eq("exercise_id",this.id);return t?(console.error(`Error counting sets for exercise ID ${this.id}:`,t),Promise.resolve(0)):Promise.resolve(e?e.length:0)}async getSetCount(){const{data:e,error:t}=await ie.from("sets").select("id").eq("exercise_id",this.id);return t?(console.error(`Error fetching set count for exercise ID ${this.id}:`,t),Promise.resolve(0)):Promise.resolve(e?e.length:0)}async delete(){const{error:e}=await ie.from("exercises").delete().eq("id",this.id);return ie.from("sets").delete().eq("exercise_id",this.id),e?(console.error(`Error deleting exercise ID ${this.id}:`,e),!1):!0}}class LA{static sortExercisesBy(e,t,n){switch(typeof n=="string"&&(n=n.toLowerCase()==="true"),t){case"name":return e.sort((i,r)=>n?i.name.localeCompare(r.name):r.name.localeCompare(i.name));case"sets":return e.sort((i,r)=>{const o=i.setCount||0,a=r.setCount||0;return n?o-a:a-o});case"workouts":return e.sort((i,r)=>{const o=i.workoutCount||0,a=r.workoutCount||0;return n?o-a:a-o});default:return e}}}const FA={class:"viewArea margins"},BA={id:"exerciseTable"},WA=ne({__name:"ExercisesView",setup(s){const e=I([]),t=I("weight"),n=I("name"),i=I("true"),r=I(!0);return ht(async()=>{const{data:o,error:a}=await ie.from("exercises").select("*");if(a&&console.error("Error fetching exercises:",a),!!o){for(const l of o)e.value.push(new va(l));e.value.sort((l,c)=>l.name.localeCompare(c.name)),r.value=!1}}),(o,a)=>(P(),$(_e,null,[r.value?(P(),ke(fn,{key:0})):K("",!0),k("div",FA,[W(cr,{options:[{label:"best weight",value:"weight"},{label:"best volume",value:"volume"},{label:"count workouts",value:"workouts"},{label:"count sets",value:"sets"},{label:"sets/workout avg",value:"setsPerWorkout"}],onSelect:a[0]||(a[0]=l=>t.value=l)}),W(cr,{options:[{label:"Sort by name",value:"name"},{label:"set count",value:"sets"},{label:"workout count",value:"workouts"}],onSelect:a[1]||(a[1]=l=>n.value=l)}),W(cr,{options:[{label:"Ascending",value:!0},{label:"Descending",value:!1}],onSelect:a[2]||(a[2]=l=>i.value=l)}),k("table",BA,[(P(!0),$(_e,null,Hs(Te(LA).sortExercisesBy(e.value,n.value,i.value),l=>(P(),ke($A,{key:l.id,exercise:l,whichPR:t.value},null,8,["exercise","whichPR"]))),128))])])],64))}}),jA=ue(WA,[["__scopeId","data-v-cb5768cb"]]);/*!
 * chartjs-plugin-trendline v3.2.0
 * https://github.com/Makanz/chartjs-plugin-trendline
 * (c) 2025 Marcus Alsterfjord
 * Released under the MIT license
 */class VA{constructor(){this.count=0,this.sumx=0,this.sumy=0,this.sumx2=0,this.sumxy=0,this.minx=Number.MAX_VALUE,this.maxx=Number.MIN_VALUE,this._cachedSlope=null,this._cachedIntercept=null,this._cacheValid=!1}add(e,t){this.sumx+=e,this.sumy+=t,this.sumx2+=e*e,this.sumxy+=e*t,e<this.minx&&(this.minx=e),e>this.maxx&&(this.maxx=e),this.count++,this._cacheValid=!1}slope(){return this._cacheValid||this._computeCoefficients(),this._cachedSlope}intercept(){return this._cacheValid||this._computeCoefficients(),this._cachedIntercept}f(e){return this.slope()*e+this.intercept()}fo(){return-this.intercept()/this.slope()}scale(){return this.slope()}_computeCoefficients(){const e=this.count*this.sumx2-this.sumx*this.sumx;this._cachedSlope=(this.count*this.sumxy-this.sumx*this.sumy)/e,this._cachedIntercept=(this.sumy-this._cachedSlope*this.sumx)/this.count,this._cacheValid=!0}}class UA{constructor(){this.count=0,this.sumx=0,this.sumlny=0,this.sumx2=0,this.sumxlny=0,this.minx=Number.MAX_VALUE,this.maxx=Number.MIN_VALUE,this.hasValidData=!0,this.dataPoints=[],this._cachedGrowthRate=null,this._cachedCoefficient=null,this._cachedCorrelation=null,this._cacheValid=!1}add(e,t){if(t<=0){this.hasValidData=!1;return}const n=Math.log(t);if(!isFinite(n)){this.hasValidData=!1;return}this.sumx+=e,this.sumlny+=n,this.sumx2+=e*e,this.sumxlny+=e*n,e<this.minx&&(this.minx=e),e>this.maxx&&(this.maxx=e),this.dataPoints.push({x:e,y:t,lny:n}),this.count++,this._cacheValid=!1}growthRate(){return!this.hasValidData||this.count<2?0:(this._cacheValid||this._computeCoefficients(),this._cachedGrowthRate)}coefficient(){return!this.hasValidData||this.count<2?1:(this._cacheValid||this._computeCoefficients(),this._cachedCoefficient)}f(e){if(!this.hasValidData||this.count<2||(this._cacheValid||this._computeCoefficients(),Math.abs(this._cachedGrowthRate*e)>500))return 0;const t=this._cachedCoefficient*Math.exp(this._cachedGrowthRate*e);return isFinite(t)?t:0}correlation(){return!this.hasValidData||this.count<2?0:(this._cacheValid||this._computeCoefficients(),this._cachedCorrelation)}scale(){return this.growthRate()}_computeCoefficients(){if(!this.hasValidData||this.count<2){this._cachedGrowthRate=0,this._cachedCoefficient=1,this._cachedCorrelation=0,this._cacheValid=!0;return}const e=this.count*this.sumx2-this.sumx*this.sumx;if(Math.abs(e)<1e-10){this._cachedGrowthRate=0,this._cachedCoefficient=1,this._cachedCorrelation=0,this._cacheValid=!0;return}this._cachedGrowthRate=(this.count*this.sumxlny-this.sumx*this.sumlny)/e;const t=(this.sumlny-this._cachedGrowthRate*this.sumx)/this.count;this._cachedCoefficient=Math.exp(t);const n=this.sumlny/this.count;let i=0,r=0;for(const o of this.dataPoints){const a=t+this._cachedGrowthRate*o.x;i+=Math.pow(o.lny-n,2),r+=Math.pow(o.lny-a,2)}this._cachedCorrelation=i===0?1:Math.max(0,1-r/i),this._cacheValid=!0}}const HA=s=>{let e,t;for(const n of Object.values(s.scales))if(n.isHorizontal()?e=n:t=n,e&&t)break;return{xScale:e,yScale:t}},zA=(s,e)=>{switch(e){case"dotted":s.setLineDash([2,2]);break;case"dashed":s.setLineDash([8,3]);break;case"dashdot":s.setLineDash([8,3,2,3]);break;case"solid":default:s.setLineDash([]);break}},qA=({ctx:s,x1:e,y1:t,x2:n,y2:i,colorMin:r,colorMax:o})=>{if(!isFinite(e)||!isFinite(t)||!isFinite(n)||!isFinite(i)){console.warn("Cannot draw trendline: coordinates contain non-finite values",{x1:e,y1:t,x2:n,y2:i});return}s.beginPath(),s.moveTo(e,t),s.lineTo(n,i);try{const a=n-e,l=i-t,c=Math.sqrt(a*a+l*l);if(c<.01)console.warn("Gradient vector too small, using solid color:",{x1:e,y1:t,x2:n,y2:i,length:c}),s.strokeStyle=r;else{let u=s.createLinearGradient(e,t,n,i);u.addColorStop(0,r),u.addColorStop(1,o),s.strokeStyle=u}}catch(a){console.warn("Gradient creation failed, using solid color:",a),s.strokeStyle=r}s.stroke(),s.closePath()},YA=(s,e,t,n,i,r,o)=>{if(!isFinite(e)||!isFinite(t)||!isFinite(n)||!isFinite(i)||!isFinite(r)){console.warn("Cannot fill below trendline: coordinates contain non-finite values",{x1:e,y1:t,x2:n,y2:i,drawBottom:r});return}s.beginPath(),s.moveTo(e,t),s.lineTo(n,i),s.lineTo(n,r),s.lineTo(e,r),s.lineTo(e,t),s.closePath(),s.fillStyle=o,s.fill()},GA=(s,e,t,n,i,r,o,a,l,c,u)=>{s.font=`${c}px ${l}`,s.fillStyle=a;const h=s.measureText(e).width,d=(t+i)/2,f=(n+r)/2;s.save(),s.translate(d,f),s.rotate(o);const g=-h/2,p=u;s.fillText(e,g,p),s.restore()},KA=(s,e,t,n,i)=>{const r=t.yAxisID||"y",o=s.controller.chart.scales[r]||i,a=!!t.trendlineExponential,l=t.trendlineExponential||t.trendlineLinear||{},c=t.borderColor||"rgba(169,169,169, .6)",{colorMin:u=c,colorMax:h=c,width:d=t.borderWidth||3,lineStyle:f="solid",fillColor:g=!1}=l;let p=l.trendoffset||0;const{color:m=c,text:y=a?"Exponential Trendline":"Trendline",display:b=!0,displayValue:v=!0,offset:x=10,percentage:T=!1}=l&&l.label||{},{family:C="'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:A=12}=l&&l.label&&l.label.font||{},O=s.controller.chart.options,L=typeof O.parsing=="object"?O.parsing:void 0,Y=(l==null?void 0:l.xAxisKey)||(L==null?void 0:L.xAxisKey)||"x",Z=(l==null?void 0:l.yAxisKey)||(L==null?void 0:L.yAxisKey)||"y";let q=a?new UA:new VA;Math.abs(p)>=t.data.length&&(p=0);let we=0;if(p>0){const le=t.data.slice(p).findIndex(be=>be!=null);le!==-1?we=p+le:we=t.data.length}else{const le=t.data.findIndex(be=>be!=null);le!==-1?we=le:we=t.data.length}let Be=we<t.data.length&&typeof t.data[we]=="object";if(t.data.forEach((le,be)=>{if(le!=null&&!(p>0&&be<we)&&!(p<0&&be>=t.data.length+p))if(["time","timeseries"].includes(n.options.type)&&Be){let Ce=le[Y]!=null?le[Y]:le.t;const Le=le[Z];Ce!=null&&Ce!==void 0&&Le!=null&&!isNaN(Le)&&q.add(new Date(Ce).getTime(),Le)}else if(Be){const Ce=le[Y],Le=le[Z],lt=Ce!=null&&!isNaN(Ce),qe=Le!=null&&!isNaN(Le);lt&&qe&&q.add(Ce,Le)}else if(["time","timeseries"].includes(n.options.type)&&!Be){const Ce=s.controller.chart.data.labels;if(Ce&&Ce[be]&&le!=null&&!isNaN(le)){const Le=new Date(Ce[be]).getTime();isNaN(Le)||q.add(Le,le)}}else le!=null&&!isNaN(le)&&q.add(be,le)}),q.count<2)return;let ce,Q,J,ee;const ye=s.controller.chart.chartArea;if(l.projection){let le=[];if(a){const B=n.getValueForPixel(ye.left),G=q.f(B);le.push({x:B,y:G});const me=n.getValueForPixel(ye.right),_=q.f(me);le.push({x:me,y:_})}else{const B=q.slope(),G=q.intercept();if(Math.abs(B)>1e-6){const R=o.getValueForPixel(ye.top),N=(R-G)/B;le.push({x:N,y:R});const M=o.getValueForPixel(ye.bottom),H=(M-G)/B;le.push({x:H,y:M})}else le.push({x:n.getValueForPixel(ye.left),y:G}),le.push({x:n.getValueForPixel(ye.right),y:G});const me=n.getValueForPixel(ye.left),_=q.f(me);le.push({x:me,y:_});const w=n.getValueForPixel(ye.right),E=q.f(w);le.push({x:w,y:E})}const be=n.getValueForPixel(ye.left),Ce=n.getValueForPixel(ye.right),lt=[o.getValueForPixel(ye.top),o.getValueForPixel(ye.bottom)].filter(B=>isFinite(B)),qe=lt.length>0?Math.min(...lt):-1/0,D=lt.length>0?Math.max(...lt):1/0;let U=le.filter(B=>isFinite(B.x)&&isFinite(B.y)&&B.x>=be&&B.x<=Ce&&B.y>=qe&&B.y<=D);U=U.filter((B,G,me)=>G===me.findIndex(_=>Math.abs(_.x-B.x)<1e-4&&Math.abs(_.y-B.y)<1e-4)),U.length>=2?(U.sort((B,G)=>B.x-G.x||B.y-G.y),ce=n.getPixelForValue(U[0].x),Q=o.getPixelForValue(U[0].y),J=n.getPixelForValue(U[U.length-1].x),ee=o.getPixelForValue(U[U.length-1].y)):(ce=NaN,Q=NaN,J=NaN,ee=NaN)}else{const le=q.f(q.minx),be=q.f(q.maxx);ce=n.getPixelForValue(q.minx),Q=o.getPixelForValue(le),J=n.getPixelForValue(q.maxx),ee=o.getPixelForValue(be)}let Xe=null;if(isFinite(ce)&&isFinite(Q)&&isFinite(J)&&isFinite(ee)&&(Xe=JA(ce,Q,J,ee,ye)),Xe&&(ce=Xe.x1,Q=Xe.y1,J=Xe.x2,ee=Xe.y2,!(Math.abs(ce-J)<.5&&Math.abs(Q-ee)<.5))){e.lineWidth=d,zA(e,f),qA({ctx:e,x1:ce,y1:Q,x2:J,y2:ee,colorMin:u,colorMax:h}),g&&YA(e,ce,Q,J,ee,ye.bottom,g);const le=Math.atan2(ee-Q,J-ce);if(l.label&&b!==!1){let be=y;if(v)if(a){const Ce=q.coefficient(),Le=q.growthRate();be=`${y} (a=${Ce.toFixed(2)}, b=${Le.toFixed(2)})`}else{const Ce=q.slope();be=`${y} (Slope: ${T?(Ce*100).toFixed(2)+"%":Ce.toFixed(2)})`}GA(e,be,ce,Q,J,ee,le,m,C,A,x)}}};function JA(s,e,t,n,i){let r=t-s,o=n-e,a=0,l=1;const c=[-r,r,-o,o],u=[s-i.left,i.right-s,e-i.top,i.bottom-e];for(let p=0;p<4;p++)if(c[p]===0){if(u[p]<0)return null}else{const m=u[p]/c[p];if(c[p]<0){if(m>l)return null;a=Math.max(a,m)}else{if(m<a)return null;l=Math.min(l,m)}}if(a>l)return null;const h=s+a*r,d=e+a*o,f=s+l*r,g=e+l*o;return{x1:h,y1:d,x2:f,y2:g}}const Xl={id:"chartjs-plugin-trendline",afterDatasetsDraw:s=>{const e=s.ctx,{xScale:t,yScale:n}=HA(s);s.data.datasets.map((r,o)=>({dataset:r,index:o})).filter(r=>r.dataset.trendlineLinear||r.dataset.trendlineExponential).sort((r,o)=>{const a=r.dataset.order??0,l=o.dataset.order??0;return a===0&&l!==0?1:l===0&&a!==0?-1:a-l}).forEach(({dataset:r,index:o})=>{if((r.alwaysShowTrendline||s.isDatasetVisible(o))&&r.data.length>1){const l=s.getDatasetMeta(o);KA(l,e,r,t,n)}}),e.setLineDash([])},beforeInit:s=>{s.data.datasets.forEach(t=>{const n=t.trendlineLinear||t.trendlineExponential;if(n&&n.label){const i=n.label,r=s.legend.options.labels.generateLabels;s.legend.options.labels.generateLabels=function(o){const a=r(o),l=n.legend;return l&&l.display!==!1&&a.push({text:l.text||i+" (Trendline)",strokeStyle:l.color||t.borderColor||"rgba(169,169,169, .6)",fillStyle:l.fillStyle||"transparent",lineCap:l.lineCap||"butt",lineDash:l.lineDash||[],lineWidth:l.width||1}),a}}})}};typeof window<"u"&&window.Chart&&(window.Chart.hasOwnProperty("register")?window.Chart.register(Xl):window.Chart.plugins.register(Xl));const XA=ne({__name:"GraphToolTip",props:{content:{},set:{}},setup(s){const e=Wt(),t=s,n=I(!1),i=I(0),r=I(0),o=I(null);let a=0,l=0;function c(){if(o.value){const f=o.value.offsetWidth;if(i.value+15+f>window.innerWidth)return i.value-15-f}return i.value+15}function u(){if(o.value){const f=o.value.offsetHeight;if(r.value+15+f>window.innerHeight)return r.value-15-f}return r.value+15}os(()=>t.content,(f,g)=>{a=i.value,l=r.value,n.value=!0});function h(f){if(i.value=f.clientX,r.value=f.clientY,Math.abs(i.value-a)>10||Math.abs(r.value-l)>10){n.value=!1;return}(Math.abs(i.value-a)<2.5||Math.abs(r.value-l)>2.5)&&(n.value=!0)}function d(f){if(n.value){e.push({name:"View Workout",params:{workout_id:t.set?t.set.getWorkoutId():null}});return}h(f)}return ht(()=>{window.addEventListener("mousemove",h),window.addEventListener("click",d)}),sa(()=>{window.removeEventListener("mousemove",h),window.removeEventListener("click",d)}),(f,g)=>s.content&&n.value?(P(),$("div",{key:0,ref_key:"tooltipRef",ref:o,class:"graph-tooltip",style:Xo({left:c()+"px",top:u()+"px"})},[(P(!0),$(_e,null,Hs(s.content,(p,m)=>(P(),$("p",{key:m,style:{margin:"0"}},se(p),1))),128))],4)):K("",!0)}}),QA=ue(XA,[["__scopeId","data-v-b71a9463"]]),ZA={class:"softBubble"},eR=ne({__name:"WeightByDate",props:{sets:{}},setup(s){const e=I("weight");Kt.register(Xl);const t=I(null),n=I(null),i=I(!1),r=I(0),o=I(null),a=I(null),l=s;ht(async()=>{await pt(),await u()});function c(){if(n.value){try{n.value.tooltip.setActiveElements([],{x:0,y:0}),n.value.destroy()}catch(h){console.warn("Error destroying chart:",h)}n.value=null}}async function u(){if(!t.value||!l.sets||l.sets.length===0||i.value)return;i.value=!0,r.value++;const h=r.value;if(c(),await new Promise(y=>setTimeout(y,50)),await pt(),h!==r.value){i.value=!1;return}if(!t.value){i.value=!1;return}const d=l.sets.map(y=>({y:e.value==="volume"?y.set.getVolume():y.set.getWeight(),x:y.date,set:y.set,graphed:e.value}));d.sort((y,b)=>y.x.getTime()-b.x.getTime());const f=getComputedStyle(document.documentElement),g={datasets:[{label:"",data:d,...Mp,trendlineExponential:{colorMin:f.getPropertyValue("--accentTransparent"),colorMax:f.getPropertyValue("--accentTransparent"),lineStyle:"solid",width:2}}]},p={family:"Avenir",size:16};f.getPropertyValue("--text");const m={type:"scatter",data:g,options:{responsive:!0,categoryPercentage:1,animation:{duration:0},plugins:{tooltip:{enabled:!0,intersect:!1,bodyFont:p,backgroundColor:"rgba(0,0,0,0)",titleColor:"rgba(0,0,0,0)",bodyColor:"rgba(0,0,0,0)",footerColor:"rgba(0,0,0,0)",displayColors:!1,callbacks:{label:function(y){if(!y.parsed)return"";const b=y.raw.set;if(a.value=b,y.raw.graphed==="volume"){const T=new Date(y.parsed.x),C=y.parsed.y;o.value=[`${C} kgs`,`${b.getReps()} x ${b.getWeight()} kgs`,`${T.toLocaleDateString()}`,"click to view the workout"];return}const v=new Date(y.parsed.x),x=y.parsed.y;o.value=[`${v.toLocaleDateString()}: ${x} kgs`,"click to view the workout"]}}},legend:{display:!1}},scales:{x:{type:"time",time:{tooltipFormat:"d MMM yyyy",unit:"day",displayFormats:{month:"MMM yyyy",day:"MMM d",hour:"MMM d"}},ticks:{font:p,maxTicksLimit:5}},y:{beginAtZero:!1,ticks:{font:p,maxTicksLimit:5}}}}};try{if(h!==r.value||!t.value){i.value=!1;return}const y=new Kt(t.value,m);h===r.value?n.value=y:y.destroy()}catch(y){console.error("Error creating chart:",y)}finally{i.value=!1}}return os(()=>l.sets,async(h,d)=>{if(h!==d){if(await pt(),!h||h.length===0){n.value&&(n.value.destroy(),n.value=null);return}await pt(()=>u())}},{deep:!1,immediate:!1}),os(()=>e.value,async(h,d)=>{await pt(),u()}),(h,d)=>(P(),$(_e,null,[W(QA,{content:o.value,set:a.value},null,8,["content","set"]),k("div",ZA,[W(cr,{options:[{label:"Weight",value:"weight"},{label:"Volume",value:"volume"}],colorSwap:"",onSelect:d[0]||(d[0]=f=>e.value=f)}),k("canvas",{ref_key:"canvasRef",ref:t,id:"weightByDateChart"},null,512)])],64))}}),tR={class:"inputs"},sR=["placeholder"],nR=ne({__name:"NameEditModal",props:{currentName:{},currentDescription:{},exerciseInfo:{},id:{},label:{}},emits:["cancel"],setup(s,{emit:e}){const t=s,n=I(t.currentName);console.log(n.value);const i=I(t.currentDescription);console.log(i.value);const r=I(new Si);async function o(){console.log("yoyoyoyoyoyoyoyoyoyoyoyoyo"),console.log(i.value);const{data:a,error:l}=await ie.from("exercises").update({name:n.value,description:i.value}).eq("id",t.id);if(l){r.value.setError("Failed to update exercise name.","Please check your internet connection and try again.");return}t.exerciseInfo.setName(n.value),t.exerciseInfo.setDescription(i.value),console.log(a)}return(a,l)=>(P(),ke(qs,qf({title:`Edit ${s.label} Name`,confirmText:"Save",cancelText:"Cancel",onCancel:l[2]||(l[2]=c=>a.$emit("cancel")),onConfirm:l[3]||(l[3]=c=>o())},a.$attrs),{default:nt(()=>[k("div",tR,[k("h2",null,[mt(k("input",{id:"nameInput",type:"text",placeholder:`Enter new ${s.label} name`,"onUpdate:modelValue":l[0]||(l[0]=c=>n.value=c)},null,8,sR),[[yt,n.value]])]),mt(k("textarea",{placeholder:"Notes...","onUpdate:modelValue":l[1]||(l[1]=c=>i.value=c)},null,512),[[yt,i.value]])])]),_:1},16,["title"]))}}),iR=ue(nR,[["__scopeId","data-v-b379f1ac"]]),rR={class:"viewArea margins"},oR={key:1},aR=ne({__name:"ExerciseView",props:["exercise_id"],setup(s){const e=Wt(),t=s,n=I([]),i=I(null),r=I(!0),o=I([]),a=I(new Si),l=I(!1),c=I(!1);function u(){return i.value?i.value.getName():""}async function h(){if(!i.value)return;const{data:g,error:p}=await ie.from("sets").select("*").eq("exercise_id",i.value.getId());if(p){console.error("Error fetching sets:",p);return}if(!g)return;const m=[];for(const y of g)m.push(await Wi.create(y,i.value));for(const y of m){const{data:b,error:v}=await ie.from("workouts").select("start_time").eq("workout_id",y.getWorkoutId()).single();if(v){console.error("Error fetching workout for set:",v);continue}o.value.push({set:y,date:new Date(b.start_time)})}}ht(async()=>{i.value=await va.create(t.exercise_id),n.value=await Mg(t.exercise_id),await h(),r.value=!1});function d(){if(r.value=!0,!!i.value){if(n.value.length>0){a.value.setError("Cannot delete exercise","This exercise is used in existing workouts and cannot be deleted."),r.value=!1;return}l.value=!0}}async function f(){if(l.value=!1,r.value=!0,await i.value.delete()){e.push({name:"Exercises"}),r.value=!1;return}a.value.setError("Failed to delete exercise","An error occurred while trying to delete the exercise. Please try again later."),r.value=!1}return(g,p)=>(P(),$(_e,null,[r.value?(P(),ke(fn,{key:0})):K("",!0),W(Nr,{error:a.value},null,8,["error"]),l.value?(P(),ke(qs,{key:1,title:"Delete Exercise",message:"Are you sure you want to delete this exercise? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",onConfirm:p[0]||(p[0]=m=>f()),onCancel:p[1]||(p[1]=m=>l.value=!1)})):K("",!0),k("div",rR,[k("h1",null,[ve(se(u())+" ",1),k("button",{class:"iconButton",onClick:p[2]||(p[2]=m=>c.value=!0)},[...p[6]||(p[6]=[k("i",{class:"fa-solid fa-pen-to-square"},null,-1)])])]),ve(" "+se(i.value?i.value.getDescription():"")+" ",1),!r.value&&o.value.length>0?(P(),ke(eR,{key:0,sets:o.value},null,8,["sets"])):K("",!0),n.value.length>0?(P(),$("h2",oR,"Workouts with "+se(u()),1)):K("",!0),(P(!0),$(_e,null,Hs(n.value,m=>(P(),ke(Cg,{key:m.getId(),workout:m},null,8,["workout"]))),128)),W(Tt,{onClick:p[3]||(p[3]=m=>d()),red:""},{default:nt(()=>[...p[7]||(p[7]=[ve("Delete Exercise",-1)])]),_:1})]),c.value&&i.value?(P(),ke(iR,{key:2,currentName:i.value?i.value.getName():"",currentDescription:i.value?i.value.getDescription():"",exerciseInfo:i.value,id:i.value?i.value.getId():"",label:"Exercise",onConfirm:p[4]||(p[4]=async m=>{i.value.value&&(r.value.value=!0,await i.value.value.updateName(m)||a.value.value.setError("Failed to update name","An error occurred while updating the exercise name. Please try again later."),r.value.value=!1),c.value=!1}),onCancel:p[5]||(p[5]=m=>c.value=!1)},null,8,["currentName","currentDescription","exerciseInfo","id"])):K("",!0)],64))}}),lR=ue(aR,[["__scopeId","data-v-2a559d2c"]]),cR={class:"navBar margins"},uR=ne({__name:"NavBar",setup(s){return(e,t)=>(P(),$("nav",cR,[W(Te(vi),{class:"navItem",to:{name:"landing"}},{default:nt(()=>[...t[0]||(t[0]=[k("b",null,"Paper",-1),k("em",null,"Weight",-1)])]),_:1}),W(Te(vi),{class:"navItem right",to:{name:"Home"}},{default:nt(()=>[W(Tt,null,{default:nt(()=>[...t[1]||(t[1]=[ve("Sign In",-1)])]),_:1})]),_:1})]))}}),hR=ue(uR,[["__scopeId","data-v-8583048c"]]),dR={class:"container"},fR=ne({__name:"SignUpComponent",setup(s){const e=Wt(),t=I("");return(n,i)=>(P(),$("div",dR,[mt(k("input",{type:"text",placeholder:"Enter your email",class:"input-field","onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r)},null,512),[[yt,t.value]]),W(Tt,{class:"sign-up-button",onClick:i[1]||(i[1]=r=>Te(e).push({name:"Sign Up",params:{email:t.value}})),flexgrow:""},{default:nt(()=>[...i[2]||(i[2]=[ve(" Sign up for ",-1),k("b",null,"Paper",-1),k("em",null,"Weight",-1)])]),_:1})]))}}),Zp=ue(fR,[["__scopeId","data-v-dd9ce313"]]),gR={class:"splash"},pR={class:"margins"},mR=ne({__name:"SplashScreen",setup(s){return(e,t)=>(P(),$(_e,null,[k("div",gR,[k("div",pR,[t[0]||(t[0]=k("h1",null,[ve("Your Workout Logs,"),k("br"),k("span",{style:{color:"var(--accent)"}},"Digitized Instantly")],-1)),t[1]||(t[1]=k("p",null,"Snap a photo of your workout notebook and let AI transform it into detailed digital logs. Track your progress, analyze your stats, and crush your personal bests.",-1)),t[2]||(t[2]=k("i",{class:"fa-solid fa-arrow-down fa-2xl"},null,-1)),W(Zp)])]),t[3]||(t[3]=k("div",{class:"gradient"},null,-1)),t[4]||(t[4]=k("div",{class:"splash-spacer"},null,-1))],64))}}),yR=ue(mR,[["__scopeId","data-v-2078dc61"]]),bR={},vR={class:"container"};function _R(s,e){return P(),$("div",vR,[...e[0]||(e[0]=[k("span",{class:"underline"},null,-1)])])}const wR=ue(bR,[["render",_R],["__scopeId","data-v-e9af7038"]]),xR={class:"featureBubble softBubble"},kR=ne({__name:"FeatureBubble",props:{title:{},message:{},iconClass:{}},setup(s){return(e,t)=>(P(),$("div",xR,[k("h2",null,[s.iconClass?(P(),$("i",{key:0,class:at(s.iconClass),style:{"margin-right":"10px"}},null,2)):K("",!0),ve(" "+se(s.title),1)]),W(wR),k("p",null,[ve(se(s.message)+" ",1),fc(e.$slots,"default",{},void 0)])]))}}),Li=ue(kR,[["__scopeId","data-v-157f0aa8"]]),SR={class:"container"},ER={class:"marginsWidth featureSection",id:"featuresSection"},TR={class:"flexbox"},PR=ne({__name:"FeatureSection",setup(s){return(e,t)=>(P(),$("div",SR,[k("div",ER,[t[0]||(t[0]=k("h2",null,"Everything You Need to Track your Progress",-1)),t[1]||(t[1]=k("p",null,"From paper to insights in seconds. PaperWeight transforms your analog logs into powerful digital analytics.",-1)),k("div",TR,[W(Li,{title:"Snap & Upload",message:"Simply take a photo of your handwritten workout log. Our AI handles the rest.",iconClass:"fa-solid fa-camera"}),W(Li,{title:"AI-Powered Recognition",message:"Our advanced AI accurately interprets your handwriting and workout details.",iconClass:"fa-solid fa-robot"}),W(Li,{title:"Overall Stats",message:"Clearly visualize your progress with comprehensive statistics and trends.",iconClass:"fa-solid fa-chart-line"}),W(Li,{title:"Per-Exercise Stats",message:"Dive deep into your performance with detailed stats for each exercise.",iconClass:"fa-solid fa-dumbbell"}),W(Li,{title:"Personal Bests",message:"Easily track and celebrate your personal records over time.",iconClass:"fa-solid fa-medal"})])])]))}}),OR=ue(PR,[["__scopeId","data-v-418a9317"]]),CR={class:"margins"},AR={class:"stepContainer"},RR={class:"rows box"},MR={class:"stepNumber"},DR={class:"stepContent"},IR={key:0},NR={key:0,class:"box2 box"},$R=["src"],LR=ne({__name:"Step",props:{stepNumber:{},title:{},message:{},imgSrc:{}},setup(s){return(e,t)=>(P(),$("div",CR,[k("div",AR,[k("div",RR,[k("div",MR,se(s.stepNumber),1),k("div",DR,[k("h2",null,se(s.title),1),s.message?(P(),$("p",IR,se(s.message),1)):K("",!0)])]),s.imgSrc?(P(),$("div",NR,[k("img",{src:s.imgSrc,class:"stepImage"},null,8,$R)])):K("",!0)])]))}}),FR=ue(LR,[["__scopeId","data-v-41c5a0de"]]),BR="/assets/workout_log-oVDHdRak.jpeg",WR="/assets/workout_logs-CLLSUjwo.png",jR="/assets/stats_screen-Cjv-gl8S.png",VR={class:"fullWidth"},UR=ne({__name:"StepsSection",setup(s){const e=[{title:"Do your workout",message:"You can log your workout in any format on paper. Take a photo through the upload page.",imgSrc:BR},{title:"View your logs",message:"View all of your workouts in the home screen.",imgSrc:WR},{title:"Track your progress",message:"Track your progress through stats such as volume, energy, and workout counts in the stats page.",imgSrc:jR}];return(t,n)=>(P(),$("div",VR,[n[0]||(n[0]=k("div",{class:"margins"},[k("h1",null,"How It Works"),k("p",null,"Three simple steps from paper to progress tracking")],-1)),(P(),$(_e,null,Hs(e,(i,r)=>W(FR,{key:r,stepNumber:r+1,title:i.title,message:i.message,imgSrc:i.imgSrc},null,8,["stepNumber","title","message","imgSrc"])),64))]))}}),HR=ue(UR,[["__scopeId","data-v-138518c5"]]),zR={class:"footer"},qR={class:"margins"},YR=ne({__name:"Footer",setup(s){return Wt(),(e,t)=>(P(),$("footer",zR,[k("div",qR,[t[0]||(t[0]=k("h1",null,"Sign Up for free today",-1)),W(Zp),t[1]||(t[1]=k("div",{class:"links"},null,-1))]),t[2]||(t[2]=k("div",{class:"gradient"},null,-1))]))}}),GR=ue(YR,[["__scopeId","data-v-1906e05a"]]),KR="/assets/slide_1-C77S-ZWc.PNG",JR="/assets/slide_2-Yb7zY4_q.PNG",XR="/assets/slide_3-Dh7ZrF35.PNG",QR="/assets/slide_4-BX62_VTc.PNG",ZR="/assets/slide_5-C51ifKII.PNG",eM="/assets/slide_6-CUorsp8Z.PNG",tM="/assets/slide_7-D4NZ3EGt.PNG",sM={class:"container"},nM={class:"phone"},iM=["src","alt"],rM=ne({__name:"SlideshowSection",setup(s){const e=[KR,JR,XR,QR,ZR,eM,tM],t=["Screenshot of the Home page, which displays logged workouts along with some key stats.","Screenshot of the workout view page, showing mainly the overview of the workout, which displays some key stats.","Screenshot of the workout view page, showing how exercises are displayed on the page, as well as personal records.","Screenshot of the Stats page, showing graph size options, and some key stats.","Screenshot of the Stats page, showing the graph.","Screenshot of the Exercises page, showing a list of exercises, along with their personal records.","Screenshot of the Exercise view page, displaying a graph of set volume by the date that it was completed. And a list of workouts where the exercise was done."];function n(){const r=document.querySelector(".phone");if(r){const o=document.querySelector(".slideContainer"),a=o?o.clientWidth:r.clientWidth;r.scrollBy({left:a,behavior:"smooth"})}}function i(){const r=document.querySelector(".phone");if(r){const o=document.querySelector(".slideContainer"),a=o?o.clientWidth:r.clientWidth;r.scrollBy({left:-a,behavior:"smooth"})}}return ht(()=>{const r=document.querySelectorAll(".phoneSlide")[0];r&&(r.scrollIntoView({behavior:"instant",block:"start"}),window.scrollTo(0,0))}),(r,o)=>(P(),$("div",sM,[k("div",nM,[(P(),$(_e,null,Hs(e,(a,l)=>k("div",{key:l,class:"slideContainer"},[l<e.length-1?(P(),$("button",{key:0,class:"iconButton rightBtn slideSwitcher",onClick:o[0]||(o[0]=c=>n())},[...o[2]||(o[2]=[k("i",{class:"fas fa-chevron-right"},null,-1)])])):K("",!0),l>0?(P(),$("button",{key:1,class:"iconButton leftBtn slideSwitcher",onClick:o[1]||(o[1]=c=>i())},[...o[3]||(o[3]=[k("i",{class:"fas fa-chevron-left"},null,-1)])])):K("",!0),k("img",{src:a,class:"phoneSlide",alt:t[l]},null,8,iM)])),64))])]))}}),oM=ue(rM,[["__scopeId","data-v-ea6cd818"]]),aM={class:"bg"},lM=ne({__name:"LandingPage",setup(s){return(e,t)=>(P(),$(_e,null,[W(hR),W(yR),W(OR),W(oM),k("div",aM,[W(HR),W(GR)])],64))}}),cM=ue(lM,[["__scopeId","data-v-8efad7e0"]]),uM={class:"settings-container"},hM={class:"strava-section"},dM={key:0,class:"description"},fM={key:1,class:"description connected"},gM={key:3,class:"strava-actions"},pM=["disabled"],mM={class:"account-section"},yM=ne({__name:"Settings",setup(s){const e=I(!1),t=I(!1),n=I(""),i=I(!1),r=I(""),o=I("success"),a=Wt();vc();async function l(){await ie.auth.signOut(),a.push({name:"Sign In",params:{message:"signedout"}}),e.value=!1}async function c(){try{const{data:{user:g}}=await ie.auth.getUser();if(!g)return;const{data:p,error:m}=await ie.from("profiles").select("strava_access_token, strava_athlete_name").eq("id",g.id).single();if(m){console.error("Error fetching profile:",m);return}p!=null&&p.strava_access_token&&(t.value=!0,n.value=p.strava_athlete_name||"Strava User")}catch(g){console.error("Error checking Strava connection:",g)}}const u=()=>{const g="192944",p="https://gkyqqlkxpfskmtryfmyp.supabase.co/functions/v1/strava-callback",m="activity:read_all,profile:read_all";console.log("Connecting to Strava with:",{clientId:g,redirectUri:p,scope:m});const y=`https://www.strava.com/oauth/authorize?client_id=${g}&redirect_uri=${encodeURIComponent(p)}&response_type=code&scope=${m}&approval_prompt=force&state=${crypto.randomUUID()}`;console.log("Auth URL:",y),window.location.href=y};async function h(){try{i.value=!0,r.value="";const{data:{session:g}}=await ie.auth.getSession();if(!g)throw new Error("Not authenticated");if(!(await fetch("https://gkyqqlkxpfskmtryfmyp.supabase.co/functions/v1/fetchStrava",{method:"POST",headers:{Authorization:`Bearer ${g.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({})})).ok)throw new Error("Failed to sync workouts");r.value="Workouts synced successfully!",o.value="success",setTimeout(()=>{r.value=""},3e3)}catch(g){console.error("Sync error:",g),r.value="Failed to sync workouts. Please try again.",o.value="error",setTimeout(()=>{r.value=""},3e3)}finally{i.value=!1}}async function d(){try{if(!confirm("Are you sure you want to disconnect your Strava account? This will remove all Strava data from your workouts."))return;const{data:{user:g}}=await ie.auth.getUser();if(!g)throw new Error("Not authenticated");const{error:p}=await ie.from("profiles").update({strava_access_token:null,strava_refresh_token:null,strava_token_expires_at:null,strava_athlete_id:null,strava_athlete_name:null}).eq("id",g.id);if(p)throw p;const{error:m}=await ie.from("workouts").update({linked_strava_id:null,heartrate_stream:null}).eq("user_id",g.id).not("linked_strava_id","is",null);m&&console.error("Error clearing workout Strava data:",m),t.value=!1,n.value="",r.value="Strava account disconnected successfully.",o.value="success",setTimeout(()=>{r.value=""},3e3)}catch(g){console.error("Disconnect error:",g),r.value="Failed to disconnect Strava account. Please try again.",o.value="error",setTimeout(()=>{r.value=""},3e3)}}ht(()=>{c();const g=new URLSearchParams(window.location.search);if(console.log("URL params on mount:",Object.fromEntries(g.entries())),g.get("strava_success")){const p=g.get("data");if(console.log("Encoded data from URL:",p),p)try{const m=atob(decodeURIComponent(p));console.log("Decoded data:",m);const y=JSON.parse(m);console.log("Parsed connection data:",y),f(y)}catch(m){console.error("Error parsing connection data:",m),r.value="Error processing Strava connection",o.value="error"}else{const m=localStorage.getItem("strava_connection_data");if(console.log("Fallback localStorage data:",m),m)try{const y=JSON.parse(m);f(y),localStorage.removeItem("strava_connection_data")}catch(y){console.error("Error parsing connection data:",y),r.value="Error processing Strava connection",o.value="error"}else console.warn("No connection data found in URL or localStorage"),r.value="Successfully connected to Strava!",o.value="success",c()}a.replace({name:"Settings"})}else if(g.get("strava_error")){const p=g.get("strava_error");let m="Failed to connect to Strava";p==="denied"?m="Strava connection was denied":p==="no_code"?m="No authorization code received from Strava":p==="config_missing"?m="Strava configuration is missing. Please contact support.":p==="no_profile"&&(m="No user profile found. Please try logging out and back in."),r.value=m,o.value="error",a.replace({name:"Settings"})}});async function f(g){try{console.log("Saving Strava connection:",g);const{data:{user:p}}=await ie.auth.getUser();if(!p)throw new Error("Not authenticated");console.log("User ID:",p.id);const{data:m,error:y}=await ie.from("profiles").select("id").eq("id",p.id).single();console.log("Existing profile:",m,"Fetch error:",y);let b;if(m){console.log("Updating existing profile with Strava data...");const{error:v}=await ie.from("profiles").update({strava_access_token:g.strava_access_token,strava_refresh_token:g.strava_refresh_token,strava_token_expires_at:g.strava_token_expires_at,strava_athlete_id:g.strava_athlete_id,strava_athlete_name:g.strava_athlete_name}).eq("id",p.id);b=v}else{console.log("Creating new profile with Strava data...");const{error:v}=await ie.from("profiles").insert({id:p.id,strava_access_token:g.strava_access_token,strava_refresh_token:g.strava_refresh_token,strava_token_expires_at:g.strava_token_expires_at,strava_athlete_id:g.strava_athlete_id,strava_athlete_name:g.strava_athlete_name});b=v}if(b)throw console.error("Database operation failed:",b),b;console.log("Strava connection saved successfully"),t.value=!0,n.value=g.strava_athlete_name,r.value="Successfully connected to Strava!",o.value="success",setTimeout(()=>{r.value=""},3e3)}catch(p){console.error("Error saving Strava connection:",p),r.value=`Failed to save Strava connection: ${p.message}`,o.value="error"}}return(g,p)=>(P(),$(_e,null,[k("div",uM,[p[8]||(p[8]=k("h2",null,"Settings",-1)),k("section",hM,[p[5]||(p[5]=k("h3",null,"Strava Integration",-1)),t.value?(P(),$("p",fM," Connected as: "+se(n.value),1)):(P(),$("p",dM," Connect your Strava account to automatically match your paperWeight workouts with Strava activities. ")),t.value?(P(),$("div",gM,[k("button",{onClick:h,class:"sync-btn",disabled:i.value},[k("i",{class:at(["fa-solid fa-sync",{spinning:i.value}])},null,2),ve(" "+se(i.value?"Syncing...":"Sync Workouts"),1)],8,pM),k("button",{onClick:d,class:"disconnect-btn"},[...p[4]||(p[4]=[k("i",{class:"fa-solid fa-unlink"},null,-1),ve(" Disconnect ",-1)])])])):(P(),$("button",{key:2,onClick:u,class:"strava-connect-btn"},[...p[3]||(p[3]=[k("i",{class:"fab fa-strava"},null,-1),ve(" Connect to Strava ",-1)])])),r.value?(P(),$("div",{key:4,class:at(["strava-message",o.value])},se(r.value),3)):K("",!0)]),k("section",mM,[p[7]||(p[7]=k("h3",null,"Account",-1)),k("button",{class:"signOutButton",onClick:p[0]||(p[0]=m=>e.value=!0)},[...p[6]||(p[6]=[k("i",{class:"fa-solid fa-right-from-bracket"},null,-1),ve(" Sign Out ",-1)])])])]),e.value?(P(),ke(qs,{key:0,title:"Sign Out",message:"Are you sure you want to sign out?",confirmText:"Sign Out",confirmRed:"",cancelText:"Cancel",onConfirm:p[1]||(p[1]=m=>l()),onCancel:p[2]||(p[2]=m=>e.value=!1)})):K("",!0)],64))}}),bM=ue(yM,[["__scopeId","data-v-0018aa58"]]),vM=[{path:"/",name:"landing",component:cM},{path:"/signin/:message?",name:"Sign In",component:dh,props:!0},{path:"/signup/:email?",name:"Sign Up",component:D0,props:!0},{path:"/app/emailconf",name:"Email Confirmation",component:L0},{path:"/app",name:"Home",component:nx},{path:"/app/upload",name:"Upload",component:cx},{path:"/app/view-workout/:workout_id",name:"View Workout",component:SP,props:!0},{path:"/app/exercise/:exercise_id",name:"View Exercise",component:lR,props:!0},{path:"/app/stats",name:"Stats",component:PA},{path:"/app/exercises",name:"Exercises",component:jA},{path:"/app/settings",name:"Settings",component:bM},{path:"/email-confirmed",name:"Email Confirmed",component:dh,props:{message:"emailconfirmed"}},{path:"/splash",name:"Splash",component:Og}],em=Tv({history:ov(),routes:vM});em.beforeEach(async(s,e,t)=>{const n=(await ie.auth.getSession()).data.session,i=s.path.startsWith("/app"),r=s.name==="Sign In"||s.name==="Sign Up"||s.name==="Email Confirmation"||s.name==="Email Confirmed";i&&!n?t({name:"Sign In"}):r&&n?t({name:"Home"}):t()});const tm=_b(m0);tm.use(em);tm.mount("#app");
